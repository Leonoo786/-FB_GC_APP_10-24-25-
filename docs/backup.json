{
  ".env": "",
  "README.md": "# Firebase Studio\n\nThis is a NextJS starter in Firebase Studio.\n\nTo get started, take a look at src/app/page.tsx.\n",
  "components.json": "{\n  \"$schema\": \"https://ui.shadcn.com/schema.json\",\n  \"style\": \"default\",\n  \"rsc\": true,\n  \"tsx\": true,\n  \"tailwind\": {\n    \"config\": \"tailwind.config.ts\",\n    \"css\": \"src/app/globals.css\",\n    \"baseColor\": \"neutral\",\n    \"cssVariables\": true,\n    \"prefix\": \"\"\n  },\n  \"aliases\": {\n    \"components\": \"@/components\",\n    \"utils\": \"@/lib/utils\",\n    \"ui\": \"@/components/ui\",\n    \"lib\": \"@/lib\",\n    \"hooks\": \"@/hooks\"\n  },\n  \"iconLibrary\": \"lucide\"\n}",
  "docs/backend.json": "{\n  \"entities\": {\n    \"Project\": {\n      \"title\": \"Project\",\n      \"description\": \"Represents a single construction project.\",\n      \"type\": \"object\",\n      \"properties\": {\n        \"projectNumber\": { \"type\": \"string\" },\n        \"name\": { \"type\": \"string\" },\n        \"ownerName\": { \"type\": \"string\" },\n        \"addressStreet\": { \"type\": \"string\" },\n        \"city\": { \"type\": \"string\" },\n        \"zip\": { \"type\": \"string\" },\n        \"description\": { \"type\": \"string\" },\n        \"status\": { \"type\": \"string\", \"enum\": [\"Planning\", \"In Progress\", \"Completed\"] },\n        \"percentComplete\": { \"type\": \"number\" },\n        \"startDate\": { \"type\": \"string\", \"format\": \"date\" },\n        \"endDate\": { \"type\": \"string\", \"format\": \"date\" },\n        \"revisedContract\": { \"type\": \"number\" },\n        \"finalBidAmount\": { \"type\": \"number\" },\n        \"imageUrl\": { \"type\": \"string\" },\n        \"imageHint\": { \"type\": \"string\" }\n      },\n      \"required\": [\"name\", \"ownerName\", \"description\", \"status\", \"startDate\", \"endDate\"]\n    },\n    \"BudgetCategory\": {\n      \"title\": \"Budget Category\",\n      \"description\": \"A category for budget items.\",\n      \"type\": \"object\",\n      \"properties\": {\n        \"name\": { \"type\": \"string\" }\n      },\n      \"required\": [\"name\"]\n    },\n    \"Vendor\": {\n      \"title\": \"Vendor\",\n      \"description\": \"A vendor or subcontractor.\",\n      \"type\": \"object\",\n      \"properties\": {\n        \"name\": { \"type\": \"string\" },\n        \"contactPerson\": { \"type\": \"string\" },\n        \"phone\": { \"type\": \"string\" },\n        \"email\": { \"type\": \"string\", \"format\": \"email\" },\n        \"trade\": { \"type\": \"string\" }\n      },\n      \"required\": [\"name\", \"trade\"]\n    },\n    \"TeamMember\": {\n      \"title\": \"Team Member\",\n      \"description\": \"An internal team member.\",\n      \"type\": \"object\",\n      \"properties\": {\n        \"name\": { \"type\": \"string\" },\n        \"role\": { \"type\": \"string\" },\n        \"email\": { \"type\": \"string\", \"format\": \"email\" },\n        \"phone\": { \"type\": \"string\" },\n        \"avatarUrl\": { \"type\": \"string\" }\n      },\n      \"required\": [\"name\", \"role\", \"email\"]\n    },\n    \"BudgetItem\": {\n      \"title\": \"Budget Item\",\n      \"description\": \"A single line item in a project's budget.\",\n      \"type\": \"object\",\n      \"properties\": {\n        \"projectId\": { \"type\": \"string\" },\n        \"category\": { \"type\": \"string\" },\n        \"costType\": { \"type\": \"string\", \"enum\": [\"labor\", \"material\", \"both\"] },\n        \"notes\": { \"type\": \"string\" },\n        \"originalBudget\": { \"type\": \"number\" },\n        \"approvedCOBudget\": { \"type\": \"number\" },\n        \"committedCost\": { \"type\": \"number\" },\n        \"projectedCost\": { \"type\": \"number\" }\n      },\n      \"required\": [\"projectId\", \"category\", \"costType\", \"originalBudget\"]\n    },\n    \"Expense\": {\n      \"title\": \"Expense\",\n      \"description\": \"A single expense record for a project.\",\n      \"type\": \"object\",\n      \"properties\": {\n        \"projectId\": { \"type\": \"string\" },\n        \"date\": { \"type\": \"string\", \"format\": \"date\" },\n        \"category\": { \"type\": \"string\" },\n        \"vendorName\": { \"type\": \"string\" },\n        \"description\": { \"type\": \"string\" },\n        \"amount\": { \"type\": \"number\" },\n        \"paymentMethod\": { \"type\": \"string\" },\n        \"paymentReference\": { \"type\": \"string\" },\n        \"invoiceNumber\": { \"type\": \"string\" }\n      },\n      \"required\": [\"projectId\", \"date\", \"category\", \"description\", \"amount\", \"paymentMethod\"]\n    },\n    \"ChangeOrder\": {\n      \"title\": \"Change Order\",\n      \"description\": \"A change order for a project.\",\n      \"type\": \"object\",\n      \"properties\": {\n        \"projectId\": { \"type\": \"string\" },\n        \"coNumber\": { \"type\": \"string\" },\n        \"description\": { \"type\": \"string\" },\n        \"totalRequest\": { \"type\": \"number\" },\n        \"status\": { \"type\": \"string\", \"enum\": [\"Submitted\", \"Approved\", \"Executed\", \"Rejected\"] }\n      },\n      \"required\": [\"projectId\", \"coNumber\", \"description\", \"totalRequest\", \"status\"]\n    },\n    \"Task\": {\n      \"title\": \"Task\",\n      \"description\": \"A single task for a project.\",\n      \"type\": \"object\",\n      \"properties\": {\n        \"projectId\": { \"type\": \"string\" },\n        \"title\": { \"type\": \"string\" },\n        \"status\": { \"type\": \"string\", \"enum\": [\"To Do\", \"In Progress\", \"Done\"] },\n        \"priority\": { \"type\": \"string\", \"enum\": [\"Low\", \"Medium\", \"High\"] },\n        \"assigneeId\": { \"type\": \"string\" },\n        \"dueDate\": { \"type\": \"string\", \"format\": \"date\" }\n      },\n      \"required\": [\"projectId\", \"title\", \"status\", \"priority\"]\n    },\n    \"RFI\": {\n      \"title\": \"Request for Information\",\n      \"description\": \"A Request for Information (RFI) for a project.\",\n      \"type\": \"object\",\n      \"properties\": {\n        \"projectId\": { \"type\": \"string\" },\n        \"rfiNumber\": { \"type\": \"string\" },\n        \"dateSubmitted\": { \"type\": \"string\", \"format\": \"date\" },\n        \"subject\": { \"type\": \"string\" },\n        \"question\": { \"type\": \"string\" },\n        \"status\": { \"type\": \"string\", \"enum\": [\"Open\", \"Closed\"] },\n        \"answer\": { \"type\": \"string\" },\n        \"dateAnswered\": { \"type\": \"string\", \"format\": \"date\" }\n      },\n      \"required\": [\"projectId\", \"rfiNumber\", \"dateSubmitted\", \"subject\", \"question\", \"status\"]\n    },\n    \"Issue\": {\n      \"title\": \"Issue\",\n      \"description\": \"An issue or problem on a project.\",\n      \"type\": \"object\",\n      \"properties\": {\n        \"projectId\": { \"type\": \"string\" },\n        \"date\": { \"type\": \"string\", \"format\": \"date\" },\n        \"severity\": { \"type\": \"string\", \"enum\": [\"Low\", \"Medium\", \"High\"] },\n        \"description\": { \"type\": \"string\" },\n        \"status\": { \"type\": \"string\", \"enum\": [\"Open\", \"Closed\"] },\n        \"correctiveAction\": { \"type\": \"string\" }\n      },\n      \"required\": [\"projectId\", \"date\", \"severity\", \"description\", \"status\"]\n    },\n    \"Milestone\": {\n      \"title\": \"Milestone\",\n      \"description\": \"A major milestone in a project.\",\n      \"type\": \"object\",\n      \"properties\": {\n        \"projectId\": { \"type\": \"string\" },\n        \"name\": { \"type\": \"string\" },\n        \"description\": { \"type\": \"string\" },\n        \"dueDate\": { \"type\": \"string\", \"format\": \"date\" },\n        \"status\": { \"type\": \"string\", \"enum\": [\"Upcoming\", \"In Progress\", \"Completed\"] }\n      },\n      \"required\": [\"projectId\", \"name\", \"dueDate\", \"status\"]\n    },\n    \"AppUser\": {\n      \"title\": \"App User\",\n      \"description\": \"A user of the application.\",\n      \"type\": \"object\",\n      \"properties\": {\n        \"name\": { \"type\": \"string\" },\n        \"email\": { \"type\": \"string\", \"format\": \"email\" },\n        \"avatarUrl\": { \"type\": \"string\" }\n      },\n      \"required\": [\"name\", \"email\"]\n    },\n    \"CompanyProfile\": {\n      \"title\": \"Company Profile\",\n      \"description\": \"The profile of the company using the app.\",\n      \"type\": \"object\",\n      \"properties\": {\n        \"name\": { \"type\": \"string\" },\n        \"logoUrl\": { \"type\": \"string\" }\n      },\n      \"required\": [\"name\"]\n    }\n  },\n  \"auth\": {\n    \"providers\": [\"google.com\"]\n  },\n  \"firestore\": {\n    \"/projects/{projectId}\": {\n      \"schema\": { \"$ref\": \"#/entities/Project\" },\n      \"description\": \"Stores individual project details.\"\n    },\n    \"/budgetCategories/{categoryId}\": {\n      \"schema\": { \"$ref\": \"#/entities/BudgetCategory\" },\n      \"description\": \"Stores the master list of budget categories.\"\n    },\n    \"/vendors/{vendorId}\": {\n      \"schema\": { \"$ref\": \"#/entities/Vendor\" },\n      \"description\": \"Stores the master list of vendors.\"\n    },\n    \"/teamMembers/{memberId}\": {\n      \"schema\": { \"$ref\": \"#/entities/TeamMember\" },\n      \"description\": \"Stores the master list of internal team members.\"\n    },\n    \"/budgetItems/{itemId}\": {\n      \"schema\": { \"$ref\": \"#/entities/BudgetItem\" },\n      \"description\": \"Stores all budget items across all projects.\"\n    },\n    \"/expenses/{expenseId}\": {\n      \"schema\": { \"$ref\": \"#/entities/Expense\" },\n      \"description\": \"Stores all expenses across all projects.\"\n    },\n    \"/changeOrders/{changeOrderId}\": {\n      \"schema\": { \"$ref\": \"#/entities/ChangeOrder\" },\n      \"description\": \"Stores all change orders across all projects.\"\n    },\n    \"/tasks/{taskId}\": {\n      \"schema\": { \"$ref\": \"#/entities/Task\" },\n      \"description\": \"Stores all tasks across all projects.\"\n    },\n    \"/rfis/{rfiId}\": {\n      \"schema\": { \"$ref\": \"#/entities/RFI\" },\n      \"description\": \"Stores all RFIs across all projects.\"\n    },\n    \"/issues/{issueId}\": {\n      \"schema\": { \"$ref\": \"#/entities/Issue\" },\n      \"description\": \"Stores all issues across all projects.\"\n    },\n    \"/milestones/{milestoneId}\": {\n      \"schema\": { \"$ref\": \"#/entities/Milestone\" },\n      \"description\": \"Stores all milestones across all projects.\"\n    },\n    \"/users/{userId}\": {\n      \"schema\": { \"$ref\": \"#/entities/AppUser\" },\n      \"description\": \"Stores public user profile information.\"\n    },\n    \"/company/profile\": {\n        \"schema\": { \"$ref\": \"#/entities/CompanyProfile\"},\n        \"description\": \"Stores the company's profile information.\"\n    }\n  }\n}\n",
  "firebase.json": "{\n  \"hosting\": {\n    \"source\": \".\",\n    \"ignore\": [\n      \"firebase.json\",\n      \"**/.*\",\n      \"**/node_modules/**\"\n    ],\n    \"frameworksBackend\": {\n      \"region\": \"us-central1\"\n    }\n  }\n}\n",
  "firestore.rules": "\nrules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Helper function to check if a user is signed in\n    function isSignedIn() {\n      return request.auth != null;\n    }\n\n    // Users can read and write their own profile\n    match /users/{userId} {\n      allow read, write: if isSignedIn() && request.auth.uid == userId;\n    }\n    \n    // Any signed-in user can read the company profile\n    match /company/profile {\n        allow read, write: if isSignedIn();\n    }\n\n    // Rules for all other collections\n    // This allows any signed-in user to read, write, and list documents.\n    match /{collection}/{docId} {\n      allow read, write, delete: if isSignedIn();\n    }\n    \n    // This is the crucial addition: It allows collection-wide reads (list operations).\n    match /{path=**}/documents {\n      allow list: if isSignedIn();\n    }\n  }\n}\n",
  "next.config.ts": "import type {NextConfig} from 'next';\n\nconst nextConfig: NextConfig = {\n  /* config options here */\n  typescript: {\n    ignoreBuildErrors: true,\n  },\n  eslint: {\n    ignoreDuringBuilds: true,\n  },\n  images: {\n    unoptimized: true,\n    remotePatterns: [\n      {\n        protocol: 'https',\n        hostname: 'placehold.co',\n        port: '',\n        pathname: '/**',\n      },\n      {\n        protocol: 'https',\n        hostname: 'images.unsplash.com',\n        port: '',\n        pathname: '/**',\n      },\n      {\n        protocol: 'https',\n        hostname: 'picsum.photos',\n        port: '',\n        pathname: '/**',\n      },\n    ],\n  },\n};\n\nexport default nextConfig;\n",
  "package.json": "{\n  \"name\": \"nextn\",\n  \"version\": \"0.1.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"dev\": \"next dev --turbopack -p 9002\",\n    \"genkit:dev\": \"genkit start -- tsx src/ai/dev.ts\",\n    \"genkit:watch\": \"genkit start -- tsx --watch src/ai/dev.ts\",\n    \"build\": \"NODE_ENV=production next build\",\n    \"start\": \"next start\",\n    \"lint\": \"next lint\",\n    \"typecheck\": \"tsc --noEmit\"\n  },\n  \"dependencies\": {\n    \"@genkit-ai/google-genai\": \"^1.20.0\",\n    \"@genkit-ai/next\": \"^1.20.0\",\n    \"@hookform/resolvers\": \"^4.1.3\",\n    \"@radix-ui/react-accordion\": \"^1.2.3\",\n    \"@radix-ui/react-alert-dialog\": \"^1.1.6\",\n    \"@radix-ui/react-avatar\": \"^1.1.3\",\n    \"@radix-ui/react-checkbox\": \"^1.1.4\",\n    \"@radix-ui/react-collapsible\": \"^1.1.11\",\n    \"@radix-ui/react-dialog\": \"^1.1.6\",\n    \"@radix-ui/react-dropdown-menu\": \"^2.1.6\",\n    \"@radix-ui/react-label\": \"^2.1.2\",\n    \"@radix-ui/react-menubar\": \"^1.1.6\",\n    \"@radix-ui/react-popover\": \"^1.1.6\",\n    \"@radix-ui/react-progress\": \"^1.1.2\",\n    \"@radix-ui/react-radio-group\": \"^1.2.3\",\n    \"@radix-ui/react-scroll-area\": \"^1.2.3\",\n    \"@radix-ui/react-select\": \"^2.1.6\",\n    \"@radix-ui/react-separator\": \"^1.1.2\",\n    \"@radix-ui/react-slider\": \"^1.2.3\",\n    \"@radix-ui/react-slot\": \"^1.2.3\",\n    \"@radix-ui/react-switch\": \"^1.1.3\",\n    \"@radix-ui/react-tabs\": \"^1.1.3\",\n    \"@radix-ui/react-toast\": \"^1.2.6\",\n    \"@radix-ui/react-tooltip\": \"^1.1.8\",\n    \"class-variance-authority\": \"^0.7.1\",\n    \"clsx\": \"^2.1.1\",\n    \"cmdk\": \"^1.0.0\",\n    \"date-fns\": \"^3.6.0\",\n    \"dotenv\": \"^16.5.0\",\n    \"embla-carousel-react\": \"^8.6.0\",\n    \"firebase\": \"^11.9.1\",\n    \"genkit\": \"^1.20.0\",\n    \"lucide-react\": \"^0.475.0\",\n    \"next\": \"15.3.3\",\n    \"next-themes\": \"^0.3.0\",\n    \"patch-package\": \"^8.0.0\",\n    \"react\": \"^18.3.1\",\n    \"react-day-picker\": \"^8.10.1\",\n    \"react-dom\": \"^18.3.1\",\n    \"react-hook-form\": \"^7.54.2\",\n    \"recharts\": \"^2.15.1\",\n    \"tailwind-merge\": \"^3.0.1\",\n    \"tailwindcss-animate\": \"^1.0.7\",\n    \"xlsx\": \"^0.18.5\",\n    \"zod\": \"^3.24.2\"\n  },\n  \"devDependencies\": {\n    \"@types/node\": \"^20\",\n    \"@types/react\": \"^18\",\n    \"@types/react-dom\": \"^18\",\n    \"@tanstack/eslint-plugin-query\": \"^5.51.1\",\n    \"genkit-cli\": \"^1.20.0\",\n    \"postcss\": \"^8\",\n    \"tailwindcss\": \"^3.4.1\",\n    \"typescript\": \"^5\"\n  }\n}\n",
  "src/ai/dev.ts": "import { config } from 'dotenv';\nconfig();\n\nimport '@/ai/flows/ai-change-order-automation.ts';\nimport '@/ai/flows/ai-job-estimator.ts';\n",
  "src/ai/flows/ai-change-order-automation.ts": "'use server';\n\n/**\n * @fileOverview This file defines the AI Change Order Automation flow.\n *\n * - suggestChangeOrder - An AI function that suggests a potential change order based on new RFI answers or issues.\n * - SuggestChangeOrderInput - The input type for the suggestChangeOrder function.\n * - SuggestChangeOrderOutput - The return type for the suggestChangeOrder function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst SuggestChangeOrderInputSchema = z.object({\n  rfiAnswer: z.string().optional().describe('The answer to the RFI, if applicable.'),\n  issueDescription: z.string().optional().describe('The description of the issue, if applicable.'),\n  projectDescription: z.string().describe('Project description to give more context.'),\n  currentChangeOrders: z.string().describe('Current change orders for the project.')\n});\nexport type SuggestChangeOrderInput = z.infer<typeof SuggestChangeOrderInputSchema>;\n\nconst SuggestChangeOrderOutputSchema = z.object({\n  suggestChangeOrder: z.boolean().describe('Whether or not a change order is suggested.'),\n  description: z.string().describe('The suggested description for the change order.'),\n  potentialCostImpact: z.number().describe('The potential cost impact of the change order.'),\n});\nexport type SuggestChangeOrderOutput = z.infer<typeof SuggestChangeOrderOutputSchema>;\n\nexport async function suggestChangeOrder(input: SuggestChangeOrderInput): Promise<SuggestChangeOrderOutput> {\n  return suggestChangeOrderFlow(input);\n}\n\nconst prompt = ai.definePrompt({\n  name: 'suggestChangeOrderPrompt',\n  input: {schema: SuggestChangeOrderInputSchema},\n  output: {schema: SuggestChangeOrderOutputSchema},\n  prompt: `You are an AI assistant that reviews project information such as project description, current change orders, RFIs and Issues.\n\nYou will make a determination as to whether a change order is suggested or not, and set the suggestChangeOrder appropriately. Provide a description and potential cost impact if a change order is suggested. If a change order is not suggested, return empty strings for description and potentialCostImpact. Always respond in the specified JSON format.\n\nConsider these factors when suggesting a change order:\n* Scope Change: If the RFI answer or issue introduces work outside the original project scope.\n* Unforeseen Conditions: If the RFI answer or issue reveals unexpected site conditions or discrepancies in plans.\n* Delays: If the RFI answer or issue will likely cause project delays.\n* Cost Increases: If the RFI answer or issue requires additional materials, labor, or equipment.\n\nDescription: {{{projectDescription}}}\nCurrent Change Orders: {{{currentChangeOrders}}}\nRFI Answer: {{{rfiAnswer}}}\nIssue Description: {{{issueDescription}}}`, \n});\n\nconst suggestChangeOrderFlow = ai.defineFlow(\n  {\n    name: 'suggestChangeOrderFlow',\n    inputSchema: SuggestChangeOrderInputSchema,\n    outputSchema: SuggestChangeOrderOutputSchema,\n  },\n  async input => {\n    const {output} = await prompt(input);\n    return output!;\n  }\n);\n",
  "src/ai/flows/ai-job-estimator.ts": "'use server';\n\n/**\n * @fileOverview AI Job Estimator flow.\n *\n * - aiJobEstimator - A function that generates a preliminary budget with line items based on a blueprint or description.\n * - AIJobEstimatorInput - The input type for the aiJobEstimator function.\n * - AIJobEstimatorOutput - The return type for the aiJobEstimator function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst AIJobEstimatorInputSchema = z.object({\n  jobDescription: z.string().describe('A detailed description of the construction job, including scope, materials, and specific requirements.'),\n  blueprintDataUri: z.string().optional().describe(\n    \"A blueprint of the job, as a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'.\"\n  ),\n});\n\nexport type AIJobEstimatorInput = z.infer<typeof AIJobEstimatorInputSchema>;\n\nconst AIJobEstimatorOutputSchema = z.object({\n  budgetItems: z.array(\n    z.object({\n      category: z.string().describe('The budget category for the line item.'),\n      description: z.string().describe('A description of the budget item.'),\n      cost: z.number().describe('The estimated cost for the budget item.'),\n    })\n  ).describe('A list of budget items with categories, descriptions, and estimated costs.'),\n});\n\nexport type AIJobEstimatorOutput = z.infer<typeof AIJobEstimatorOutputSchema>;\n\nexport async function aiJobEstimator(input: AIJobEstimatorInput): Promise<AIJobEstimatorOutput> {\n  return aiJobEstimatorFlow(input);\n}\n\nconst prompt = ai.definePrompt({\n  name: 'aiJobEstimatorPrompt',\n  input: {schema: AIJobEstimatorInputSchema},\n  output: {schema: AIJobEstimatorOutputSchema},\n  prompt: `You are an AI job estimator that generates a preliminary budget with line items based on a blueprint or description.\n\n  The budget should be broken down into the following categories:\n  - Ansul System\n  - Bathroom Partitions\n  - Bollards/Stoppers\n  - Change Order\n  - Cleaning\n  - CMU\n  - Doors/Hardware\n  - Electrical\n  - Exterior panels\n  - Fences\n  - Floor\n  - Foundation Labor\n  - Foundation Material\n  - Foundation-Piers Labor\n  - Framing Labor\n  - Framing Material\n  - Fuel Canopy Labor\n  - Fuel Canopy Material\n  - FuelCanopyBricks\n  - Get Reimbursed\n  - Grass Cut\n  - Haul-Off\n  - HVAC\n  - KnoxBox\n  - Landsacpe Labor\n  - Landsacpe Material\n  - Millwork\n  - Misc\n  - Nichiha Labor\n  - Nichiha Material\n  - Paint Labor\n  - Paint Material\n  - Parking lot Labor\n  - Parking lot Material\n  - Permit\n  - Plumbing\n  - Pollution Control\n  - Rental\n  - Roof\n  - Sitework Labor\n  - Sitework Material\n  - Steel Labor\n  - Steel Material\n  - StoreFrontCanopy Labor\n  - StoreFrontCanopy Material\n  - Store Front Glass\n  - Striping\n  - Stucco/Stone\n  - Survey\n  - SWPP\n  - Tiles Labor\n  - Tiles Material\n  - TO BE PAID\n  - Undrgrnd pipes Labor\n  - Undrgrnd pipes Material\n  - Utility Bill\n  - Venthood\n  - Builders Risk\n  - Curbs Labor\n  - Curbs Material\n  - Sitework Material\n  - Sidewalk Labor\n  - Sidewalk Material\n  - Dirtwork-Lbr\n\n  Job Description: {{{jobDescription}}}\n  {{~#if blueprintDataUri}}\n  Blueprint: {{media url=blueprintDataUri}}\n  {{~/if}}\n\n  Generate a preliminary budget with line items based on the job description and blueprint (if provided).\n  Include a category, description, and estimated cost for each line item.\n  Make sure to output a valid JSON object conforming to the AIJobEstimatorOutputSchema schema.\n  `, config: {\n    safetySettings: [\n      {\n        category: 'HARM_CATEGORY_HATE_SPEECH',\n        threshold: 'BLOCK_ONLY_HIGH',\n      },\n      {\n        category: 'HARM_CATEGORY_DANGEROUS_CONTENT',\n        threshold: 'BLOCK_NONE',\n      },\n      {\n        category: 'HARM_CATEGORY_HARASSMENT',\n        threshold: 'BLOCK_MEDIUM_AND_ABOVE',\n      },\n      {\n        category: 'HARM_CATEGORY_SEXUALLY_EXPLICIT',\n        threshold: 'BLOCK_LOW_AND_ABOVE',\n      },\n    ],\n  },\n});\n\nconst aiJobEstimatorFlow = ai.defineFlow(\n  {\n    name: 'aiJobEstimatorFlow',\n    inputSchema: AIJobEstimatorInputSchema,\n    outputSchema: AIJobEstimatorOutputSchema,\n  },\n  async input => {\n    const {output} = await prompt(input);\n    return output!;\n  }\n);\n",
  "src/ai/genkit.ts": "import {genkit} from 'genkit';\nimport {googleAI} from '@genkit-ai/google-genai';\n\nexport const ai = genkit({\n  plugins: [googleAI()],\n  model: 'googleai/gemini-2.5-flash',\n});\n",
  "src/app/(app)/aia/page.tsx": "\n'use client';\n\nimport { useState, useContext, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableFooter,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { AppStateContext } from '@/context/app-state-context';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { CalendarIcon, Download, Printer } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { format, isValid } from 'date-fns';\nimport { Calendar } from '@/components/ui/calendar';\nimport { useForm, Controller } from 'react-hook-form';\nimport type { ChangeOrder } from '@/lib/types';\n\ntype FormValues = {\n    applicationNo: string;\n    periodTo: Date;\n    architectName: string;\n    totalCompletedAndStored: number;\n    retainagePercentage: number;\n    storedMaterialRetainagePercentage: number;\n    previousCertificates: number;\n    amountCertified: number;\n};\n\nexport default function AIAPage() {\n  const appState = useContext(AppStateContext);\n  const [selectedProjectId, setSelectedProjectId] = useState<string | null>(null);\n\n  const { control, watch, setValue } = useForm<FormValues>({\n    defaultValues: {\n      applicationNo: '',\n      architectName: '',\n      totalCompletedAndStored: 0,\n      retainagePercentage: 10,\n      storedMaterialRetainagePercentage: 10,\n      previousCertificates: 0,\n      amountCertified: 0,\n      periodTo: new Date(),\n    }\n  });\n\n  const formValues = watch();\n\n  useEffect(() => {\n    if (selectedProjectId && appState) {\n        const project = appState.projects.find(p => p.id === selectedProjectId);\n        if (project) {\n            // Reset some fields when project changes to avoid carrying over old data\n            setValue('totalCompletedAndStored', 0);\n            setValue('previousCertificates', 0);\n        }\n    }\n  }, [selectedProjectId, appState, setValue]);\n\n\n  if (!appState) {\n    return <div>Loading...</div>;\n  }\n\n  const { projects, companyName, changeOrders } = appState;\n  const selectedProject = projects.find(p => p.id === selectedProjectId);\n\n  const projectChangeOrders: ChangeOrder[] = selectedProject\n    ? changeOrders.filter(co => co.projectId === selectedProject.id && (co.status === 'Approved' || co.status === 'Executed'))\n    : [];\n\n  const totalAdditions = projectChangeOrders.reduce((sum, co) => co.totalRequest > 0 ? sum + co.totalRequest : sum, 0);\n  const totalDeductions = projectChangeOrders.reduce((sum, co) => co.totalRequest < 0 ? sum + co.totalRequest : sum, 0);\n  const netChangeByChangeOrders = totalAdditions + totalDeductions;\n\n  const originalContractSum = selectedProject?.revisedContract ?? 0;\n  const contractSumToDate = originalContractSum + netChangeByChangeOrders;\n  const totalCompletedAndStored = formValues.totalCompletedAndStored || 0;\n  \n  const retainageOfCompletedWork = totalCompletedAndStored * (formValues.retainagePercentage / 100);\n  const retainageOfStoredMaterial = 0; // Assuming 0 for now, can be an input later\n  const totalRetainage = retainageOfCompletedWork + retainageOfStoredMaterial;\n  \n  const totalEarnedLessRetainage = totalCompletedAndStored - totalRetainage;\n  const lessPreviousCertificates = formValues.previousCertificates || 0;\n  const currentPaymentDue = totalEarnedLessRetainage - lessPreviousCertificates;\n  const balanceToFinish = contractSumToDate - totalEarnedLessRetainage;\n\n\n  const aiaTableRows = [\n    { id: 1, description: '1. Original Contract Sum', value: originalContractSum },\n    { id: 2, description: '2. Net change by Change Orders', value: netChangeByChangeOrders },\n    { id: 3, description: '3. Contract Sum to Date (Line 1 Â± 2)', value: contractSumToDate },\n    { id: 4, description: '4. Total Completed & Stored to Date', isInput: true, fieldName: 'totalCompletedAndStored', value: totalCompletedAndStored },\n    { id: 5, description: '5. Retainage', subDescription: 'a. % of Completed Work', value: retainageOfCompletedWork, isRetainageInput: true, fieldName: 'retainagePercentage' },\n    { id: 6, description: null, subDescription: 'b. % of Stored Material', value: retainageOfStoredMaterial, isRetainageInput: true, fieldName: 'storedMaterialRetainagePercentage' },\n    { id: 7, description: '6. Total Retainage (Lines 5a + 5b)', value: totalRetainage },\n    { id: 8, description: '7. Total Earned Less Retainage (Line 4 - Line 6 Total)', value: totalEarnedLessRetainage },\n    { id: 9, description: '8. Less Previous Certificates for Payment', isInput: true, fieldName: 'previousCertificates', value: lessPreviousCertificates },\n    { id: 10, description: '9. Current Payment Due', value: currentPaymentDue },\n    { id: 11, description: '10. Balance to Finish, Including Retainage', value: balanceToFinish },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-start\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">\n            AIA G702 Application for Payment\n          </h1>\n          <p className=\"text-muted-foreground\">\n            Create and manage your payment applications.\n          </p>\n        </div>\n         <div className=\"flex gap-2\">\n            <Button variant=\"outline\"><Printer className=\"mr-2\" /> Print</Button>\n            <Button><Download className=\"mr-2\" /> Export as PDF</Button>\n        </div>\n      </div>\n      <Card>\n        <CardHeader>\n            <CardTitle>Project Information</CardTitle>\n        </CardHeader>\n        <CardContent className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"space-y-2\">\n                <Label>Select Project</Label>\n                 <Select onValueChange={setSelectedProjectId} value={selectedProjectId || undefined}>\n                    <SelectTrigger>\n                        <SelectValue placeholder=\"Select a project to auto-fill details\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                        {projects.map((project) => (\n                        <SelectItem key={project.id} value={project.id}>\n                            {project.name}\n                        </SelectItem>\n                        ))}\n                    </SelectContent>\n                </Select>\n            </div>\n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                    <Label>To (Owner)</Label>\n                    <Input readOnly value={selectedProject?.ownerName || 'N/A'}/>\n                </div>\n                <div>\n                    <Label>From (Contractor)</Label>\n                    <Input readOnly value={companyName || 'N/A'} />\n                </div>\n                <div>\n                    <Label>Project</Label>\n                    <Input readOnly value={selectedProject?.name || 'N/A'} />\n                </div>\n                 <Controller\n                    name=\"architectName\"\n                    control={control}\n                    render={({ field }) => (\n                        <div>\n                            <Label>Via (Architect)</Label>\n                            <Input placeholder=\"Enter Architect Name\" {...field} />\n                        </div>\n                    )}\n                 />\n             </div>\n        </CardContent>\n         <CardHeader>\n            <CardTitle>Application Details</CardTitle>\n        </CardHeader>\n         <CardContent className=\"grid grid-cols-2 md:grid-cols-4 gap-6\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"application-no\">Application No.</Label>\n                <Controller\n                    name=\"applicationNo\"\n                    control={control}\n                    render={({ field }) => (\n                        <Input id=\"application-no\" placeholder=\"e.g., 003\" {...field} />\n                    )}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"period-to\">Period To</Label>\n                <Controller\n                    name=\"periodTo\"\n                    control={control}\n                    render={({ field }) => (\n                        <Popover>\n                            <PopoverTrigger asChild>\n                                <Button variant=\"outline\" className={cn(\"w-full justify-start text-left font-normal\")}>\n                                    <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                                    {field.value && isValid(new Date(field.value)) ? format(new Date(field.value), 'PP') : <span>Pick a date</span>}\n                                </Button>\n                            </PopoverTrigger>\n                            <PopoverContent className=\"w-auto p-0\">\n                                <Calendar mode=\"single\" selected={field.value} onSelect={field.onChange} initialFocus />\n                            </PopoverContent>\n                        </Popover>\n                    )}\n                />\n              </div>\n               <div className=\"space-y-2\">\n                <Label htmlFor=\"contract-date\">Contract Date</Label>\n                 <Input id=\"contract-date\" readOnly value={selectedProject ? format(new Date(selectedProject.startDate), 'PP') : 'N/A'}/>\n              </div>\n               <div className=\"space-y-2\">\n                <Label htmlFor=\"project-no\">Project No.</Label>\n                <Input id=\"project-no\" readOnly value={selectedProject?.projectNumber || 'N/A'} />\n              </div>\n         </CardContent>\n      </Card>\n      \n      <Card>\n        <CardHeader>\n          <CardTitle>Contractor&apos;s Application for Payment</CardTitle>\n          <CardDescription>\n            Summary of the contract sum, changes, and payments.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead className=\"w-[60%]\">Description</TableHead>\n                <TableHead className=\"text-right\">Amount</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {aiaTableRows.map((row) => (\n                <TableRow key={row.id}>\n                  <TableCell className={cn(\"font-medium\", !row.description && \"pl-8\")}>\n                    {row.description || row.subDescription}\n                    {row.isRetainageInput && (\n                        <Controller\n                            name={row.fieldName as keyof FormValues}\n                            control={control}\n                            render={({ field }) => (\n                                <Input \n                                    type=\"number\" \n                                    className=\"w-16 h-6 inline-block ml-2 px-1 text-center\"\n                                    {...field}\n                                    value={field.value || 0}\n                                    onChange={e => field.onChange(parseFloat(e.target.value) || 0)}\n                                />\n                            )}\n                        />\n                    )}\n                     <span className={cn('ml-1', !row.isRetainageInput && 'hidden')}>%</span>\n                  </TableCell>\n                  <TableCell className=\"text-right\">\n                    {row.isInput ? (\n                        <Controller\n                            name={row.fieldName as keyof FormValues}\n                            control={control}\n                            render={({ field }) => (\n                                <Input \n                                    type=\"number\" \n                                    className=\"w-48 h-8 ml-auto text-right\"\n                                    {...field}\n                                    value={field.value || 0}\n                                    onChange={e => field.onChange(parseFloat(e.target.value) || 0)}\n                                />\n                            )}\n                        />\n                    ) : (\n                        row.value.toLocaleString('en-US', {\n                          style: 'currency',\n                          currency: 'USD',\n                        })\n                    )}\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n      <Card>\n        <CardHeader>\n            <CardTitle>Change Order Summary</CardTitle>\n        </CardHeader>\n        <CardContent>\n             <Table>\n                <TableHeader>\n                    <TableRow>\n                        <TableHead>CO #</TableHead>\n                        <TableHead>Description</TableHead>\n                        <TableHead className=\"text-right\">ADDITIONS</TableHead>\n                        <TableHead className=\"text-right\">DEDUCTIONS</TableHead>\n                    </TableRow>\n                </TableHeader>\n                <TableBody>\n                    {projectChangeOrders.map((co) => (\n                        <TableRow key={co.id}>\n                            <TableCell>{co.coNumber}</TableCell>\n                            <TableCell>{co.description}</TableCell>\n                            <TableCell className=\"text-right\">{co.totalRequest > 0 ? co.totalRequest.toLocaleString('en-US', { style: 'currency', currency: 'USD' }) : '$0.00'}</TableCell>\n                             <TableCell className=\"text-right\">{co.totalRequest < 0 ? co.totalRequest.toLocaleString('en-US', { style: 'currency', currency: 'USD' }) : '$0.00'}</TableCell>\n                        </TableRow>\n                    ))}\n                    {projectChangeOrders.length === 0 && <TableRow><TableCell colSpan={4} className=\"text-center h-24\">No approved change orders for this project.</TableCell></TableRow>}\n                </TableBody>\n                <TableFooter>\n                     <TableRow>\n                        <TableCell colSpan={2} className=\"font-bold text-right\">TOTALS</TableCell>\n                        <TableCell className=\"text-right font-bold\">{(totalAdditions).toLocaleString('en-US', { style: 'currency', currency: 'USD' })}</TableCell>\n                        <TableCell className=\"text-right font-bold\">{(totalDeductions).toLocaleString('en-US', { style: 'currency', currency: 'USD' })}</TableCell>\n                    </TableRow>\n                     <TableRow>\n                        <TableCell colSpan={3} className=\"font-bold text-right\">NET CHANGE BY CHANGE ORDERS</TableCell>\n                        <TableCell className=\"text-right font-bold\">{(netChangeByChangeOrders).toLocaleString('en-US', { style: 'currency', currency: 'USD' })}</TableCell>\n                    </TableRow>\n                </TableFooter>\n             </Table>\n        </CardContent>\n      </Card>\n      <Card>\n          <CardHeader>\n            <CardTitle>Architect&apos;s Certificate for Payment</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <p className=\"text-sm\">\n                In accordance with the Contract Documents, based on on-site observations and the data comprising this application, the Architect certifies to the Owner that to the best of the Architect&apos;s knowledge, information and belief the Work has progressed as indicated, the quality of the Work is in accordance with the Contract Documents, and the Contractor is entitled to payment of the AMOUNT CERTIFIED.\n            </p>\n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                    <Label>Amount Certified</Label>\n                    <Controller\n                        name=\"amountCertified\"\n                        control={control}\n                        render={({ field }) => (\n                           <Input \n                                type=\"number\" \n                                placeholder=\"$0.00\" \n                                {...field}\n                                value={field.value || 0}\n                                onChange={e => field.onChange(parseFloat(e.target.value) || 0)}\n                           />\n                        )}\n                    />\n                </div>\n                <div className=\"space-y-2\">\n                    <Label>Architect Signature</Label>\n                    <Input disabled placeholder='Signature required after printing' />\n                </div>\n             </div>\n          </CardContent>\n      </Card>\n    </div>\n  );\n}\n\n    ",
  "src/app/(app)/chat/page.tsx": "import { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Paperclip, Send } from \"lucide-react\";\n\nexport default function ChatPage() {\n    return (\n        <div className=\"flex h-[calc(100vh-8rem)] flex-col\">\n            <header className=\"border-b p-4\">\n                <h1 className=\"text-xl font-bold tracking-tight\">AI Assistant</h1>\n                <p className=\"text-sm text-muted-foreground\">Ask me anything about your projects.</p>\n            </header>\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-6\">\n                <div className=\"flex items-start gap-3\">\n                    <Avatar className=\"h-9 w-9 border\">\n                        <AvatarImage src=\"/placeholder-user.jpg\" />\n                        <AvatarFallback>AI</AvatarFallback>\n                    </Avatar>\n                    <div className=\"rounded-lg bg-secondary p-3 max-w-[75%]\">\n                        <p className=\"text-sm\">\n                           Hello! I'm your AI assistant for ConstructAI. How can I help you today? You can ask me things like \"What are the overdue tasks for the Downtown Office Tower?\"\n                        </p>\n                    </div>\n                </div>\n                <div className=\"flex items-start gap-3 justify-end\">\n                     <div className=\"rounded-lg bg-primary text-primary-foreground p-3 max-w-[75%]\">\n                        <p className=\"text-sm\">\n                           Show me the budget for plumbing on project 2023-002\n                        </p>\n                    </div>\n                    <Avatar className=\"h-9 w-9 border\">\n                        <AvatarImage src=\"https://i.pravatar.cc/150?u=john\" />\n                        <AvatarFallback>JD</AvatarFallback>\n                    </Avatar>\n                </div>\n                 <div className=\"flex items-start gap-3\">\n                    <Avatar className=\"h-9 w-9 border\">\n                        <AvatarImage src=\"/placeholder-user.jpg\" />\n                        <AvatarFallback>AI</AvatarFallback>\n                    </Avatar>\n                    <div className=\"rounded-lg bg-secondary p-3 max-w-[75%]\">\n                        <p className=\"text-sm\">\n                           Searching for budget details... Unfortunately, I can't access live project data just yet. This feature is under construction.\n                        </p>\n                    </div>\n                </div>\n            </div>\n            <div className=\"border-t p-4\">\n                <div className=\"relative\">\n                    <Input placeholder=\"Type your message...\" className=\"pr-20\" />\n                    <div className=\"absolute top-1/2 right-2 -translate-y-1/2 flex items-center gap-1\">\n                        <Button variant=\"ghost\" size=\"icon\">\n                            <Paperclip className=\"w-5 h-5\" />\n                        </Button>\n                        <Button size=\"icon\">\n                            <Send className=\"w-5 h-5\" />\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n",
  "src/app/(app)/daily-reports/page.tsx": "export default function DailyReportsPage() {\n    return (\n        <div>\n            <h1 className=\"text-3xl font-bold tracking-tight\">Daily Reports</h1>\n            <p className=\"text-muted-foreground\">\n                This page will allow users to create and view daily reports.\n            </p>\n        </div>\n    );\n}\n",
  "src/app/(app)/dashboard/_components/budget-chart.tsx": "\n\"use client\"\n\nimport { useContext } from \"react\"\nimport { Bar, BarChart, CartesianGrid, XAxis, YAxis } from \"recharts\"\n\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\"\nimport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n} from \"@/components/ui/chart\"\nimport { AppStateContext } from \"@/context/app-state-context\"\n\nconst chartConfig = {\n  budget: {\n    label: \"Budget\",\n    color: \"hsl(var(--chart-2))\",\n  },\n  actual: {\n    label: \"Actual\",\n    color: \"hsl(var(--chart-1))\",\n  },\n}\n\nexport function BudgetChart() {\n  const appState = useContext(AppStateContext);\n\n  if (!appState || !appState.projects || !appState.budgetItems || !appState.expenses) {\n    return <div>Loading...</div>;\n  }\n  \n  const { projects, budgetItems, expenses } = appState;\n  \n  const activeProjects = projects.filter(p => p.status === \"In Progress\");\n\n  const chartData = activeProjects.map(project => {\n    const items = budgetItems.filter(item => item.projectId === project.id);\n    const projectExpenses = expenses.filter(expense => expense.projectId === project.id);\n    const totalBudget = items.reduce((acc, item) => acc + item.originalBudget + item.approvedCOBudget, 0);\n    const totalSpent = projectExpenses.reduce((acc, item) => acc + item.amount, 0);\n    return {\n      project: project.name,\n      budget: totalBudget,\n      actual: totalSpent,\n    };\n  });\n\n\n  return (\n    <ChartContainer config={chartConfig} className=\"min-h-[200px] w-full\">\n      <BarChart accessibilityLayer data={chartData}>\n        <CartesianGrid vertical={false} />\n        <XAxis\n          dataKey=\"project\"\n          tickLine={false}\n          tickMargin={10}\n          axisLine={false}\n          tickFormatter={(value) => value.slice(0, 3)}\n        />\n        <YAxis \n          tickFormatter={(value) => `$${Number(value) / 1000000}M`}\n        />\n        <ChartTooltip content={<ChartTooltipContent />} />\n        <ChartLegend content={<ChartLegendContent />} />\n        <Bar dataKey=\"budget\" fill=\"var(--color-budget)\" radius={4} />\n        <Bar dataKey=\"actual\" fill=\"var(--color-actual)\" radius={4} />\n      </BarChart>\n    </ChartContainer>\n  )\n}\n",
  "src/app/(app)/dashboard/_components/project-timeline.tsx": "\n\n'use client';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport type { Project } from '@/lib/types';\nimport { differenceInDays, format, parseISO } from 'date-fns';\n\ntype ProjectTimelineProps = {\n    projects: Project[];\n};\n\nexport function ProjectTimeline({ projects }: ProjectTimelineProps) {\n    const months = Array.from({ length: 6 }, (_, i) => {\n        const d = new Date();\n        d.setDate(1); // Start from the first day of the month\n        d.setMonth(d.getMonth() + i);\n        return d;\n    });\n\n    const timelineStart = months[0];\n    const timelineEnd = new Date(months[5].getFullYear(), months[5].getMonth() + 1, 0); // End of the last month\n    const totalDisplayDays = differenceInDays(timelineEnd, timelineStart);\n\n    const getTimelineStyle = (project: Project) => {\n        const startDate = parseISO(project.startDate);\n        const endDate = parseISO(project.endDate);\n        \n        const startOffsetDays = differenceInDays(startDate, timelineStart);\n        const endOffsetDays = differenceInDays(endDate, timelineStart);\n        \n        const left = (startOffsetDays / totalDisplayDays) * 100;\n        const width = ((endOffsetDays - startOffsetDays) / totalDisplayDays) * 100;\n\n        return {\n            left: `${Math.max(0, left)}%`,\n            width: `${Math.min(100 - Math.max(0, left), width)}%`,\n        };\n    };\n\n    const activeProjects = projects.filter(p => p.status === 'In Progress');\n\n    return (\n        <div className=\"relative\">\n            <Table>\n                <TableHeader>\n                    <TableRow>\n                        <TableHead className=\"w-1/4\">Project</TableHead>\n                        {months.map(month => (\n                             <TableHead key={month.toISOString()} className=\"text-center\">{format(month, 'MMM yyyy')}</TableHead>\n                        ))}\n                    </TableRow>\n                </TableHeader>\n                 <TableBody>\n                    {activeProjects.slice(0, 5).map(project => (\n                        <TableRow key={project.id}>\n                            <TableCell>\n                                <div className=\"font-medium\">{project.name}</div>\n                                <div className=\"text-xs text-muted-foreground\">{project.status}</div>\n                            </TableCell>\n                            <TableCell colSpan={6} className=\"relative p-0 h-12\">\n                                <div className=\"h-full py-2 px-2\">\n                                     <div \n                                        className=\"absolute h-4 bg-primary rounded-sm top-1/2 -translate-y-1/2\" \n                                        style={getTimelineStyle(project)}\n                                        title={`${project.name}: ${format(parseISO(project.startDate), 'MMM d')} - ${format(parseISO(project.endDate), 'MMM d')}`}\n                                    />\n                                </div>\n                            </TableCell>\n                        </TableRow>\n                    ))}\n                 </TableBody>\n            </Table>\n             {activeProjects.length === 0 && (\n                <div className=\"text-center text-muted-foreground py-8\">\n                    No active projects to display on timeline.\n                </div>\n             )}\n        </div>\n    );\n}\n",
  "src/app/(app)/dashboard/_components/tasks-due-today.tsx": "\n'use client';\n\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { CheckCircle } from 'lucide-react';\nimport type { Task, Project } from '@/lib/types';\nimport Link from 'next/link';\nimport { addDays, startOfDay } from 'date-fns';\n\ntype TasksDueTodayProps = {\n    tasks: Task[];\n    projects: Project[];\n    onAddTask: () => void;\n    onViewTask: (task: Task) => void;\n};\n\nexport function TasksDueToday({ tasks, projects, onAddTask, onViewTask }: TasksDueTodayProps) {\n    const tasksDueSoon = tasks.filter(t => {\n        const dueDate = new Date(t.dueDate);\n        const today = startOfDay(new Date());\n        const inAWeek = addDays(today, 7);\n        return dueDate >= today && dueDate <= inAWeek && t.status !== 'Done';\n    });\n\n    return (\n        <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between\">\n                <CardTitle>Tasks Due in Next 7 Days</CardTitle>\n                <Button variant=\"ghost\" size=\"sm\" asChild>\n                    <Link href=\"/tasks\">View All</Link>\n                </Button>\n            </CardHeader>\n            <CardContent>\n                {tasksDueSoon.length > 0 ? (\n                    <ul className=\"space-y-4\">\n                        {tasksDueSoon.map(task => (\n                             <li key={task.id} className=\"flex items-center justify-between\">\n                                <div>\n                                    <p className=\"font-medium\">{task.title}</p>\n                                    <p className=\"text-sm text-muted-foreground\">\n                                        {projects.find(p => p.id === task.projectId)?.name || 'Unknown Project'}\n                                    </p>\n                                </div>\n                                <Button variant=\"secondary\" size=\"sm\" onClick={() => onViewTask(task)}>View</Button>\n                            </li>\n                        ))}\n                    </ul>\n                ) : (\n                    <div className=\"text-center text-muted-foreground py-8\">\n                        <CheckCircle className=\"mx-auto h-8 w-8 mb-2\" />\n                        <p>No tasks due in the next 7 days</p>\n                        <Button variant=\"outline\" size=\"sm\" className=\"mt-4\" onClick={onAddTask}>\n                            Add New Task\n                        </Button>\n                    </div>\n                )}\n            </CardContent>\n        </Card>\n    );\n}\n",
  "src/app/(app)/dashboard/page.tsx": "\n\n'use client';\n\nimport { useContext, useMemo, useState } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  Activity,\n  CheckCircle,\n  DollarSign,\n  MoreVertical,\n  CircleHelp,\n  ArrowUp,\n} from 'lucide-react';\nimport Link from 'next/link';\nimport { AppStateContext } from '@/context/app-state-context';\nimport { BudgetChart } from './_components/budget-chart';\nimport { ProjectTimeline } from './_components/project-timeline';\nimport { TasksDueToday } from './_components/tasks-due-today';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';\nimport { AddTaskDialog } from '../tasks/_components/add-task-dialog';\nimport type { Task } from '@/lib/types';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function DashboardPage() {\n  const appState = useContext(AppStateContext);\n  const [isAddTaskOpen, setIsAddTaskOpen] = useState(false);\n  const [selectedTask, setSelectedTask] = useState<Task | null>(null);\n  const { toast } = useToast();\n\n\n  if (\n    !appState ||\n    !appState.projects ||\n    !appState.rfis ||\n    !appState.issues ||\n    !appState.tasks ||\n    !appState.budgetItems ||\n    !appState.expenses\n  ) {\n    return <div>Loading...</div>;\n  }\n\n  const { projects, tasks, setTasks, budgetItems, expenses, teamMembers, userName } = appState;\n  \n  const handleSaveTask = (task: Task) => {\n    if (task.id) {\n        setTasks(current => current.map(t => t.id === task.id ? task : t));\n    } else {\n        setTasks(current => [{...task, id: crypto.randomUUID()}, ...current]);\n    }\n     toast({\n      title: `Task ${task.id ? 'Updated' : 'Created'}`,\n      description: `Successfully ${task.id ? 'updated' : 'created'} task: ${task.title}.`,\n    });\n  };\n\n  const handleOpenTaskDialog = (task: Task | null) => {\n    setSelectedTask(task);\n    setIsAddTaskOpen(true);\n  };\n\n\n  const activeProjects = useMemo(() => projects.filter(p => p.status === 'In Progress'), [projects]);\n  const activeProjectIds = useMemo(() => activeProjects.map(p => p.id), [activeProjects]);\n\n  const activeProjectsCount = activeProjects.length;\n  \n  const tasksDueSoonCount = tasks.filter(t => {\n      const dueDate = new Date(t.dueDate);\n      const today = new Date();\n      const inAWeek = new Date();\n      inAWeek.setDate(today.getDate() + 7);\n      return dueDate >= today && dueDate <= inAWeek && t.status !== 'Done';\n    }).length;\n  \n  const activeBudgetItems = useMemo(() => budgetItems.filter(item => activeProjectIds.includes(item.projectId)), [budgetItems, activeProjectIds]);\n  const activeExpenses = useMemo(() => expenses.filter(expense => activeProjectIds.includes(expense.projectId)), [expenses, activeProjectIds]);\n\n  const totalBudget = activeBudgetItems.reduce((acc, item) => acc + item.originalBudget + item.approvedCOBudget, 0);\n  const totalSpent = activeExpenses.reduce((acc, expense) => acc + expense.amount, 0);\n  const budgetUtilization = totalBudget > 0 ? (totalSpent / totalBudget) * 100 : 0;\n\n  const categorySpending = useMemo(() => {\n    const spendingMap: { [key: string]: number } = {};\n    activeExpenses.forEach(expense => {\n      if (!spendingMap[expense.category]) {\n        spendingMap[expense.category] = 0;\n      }\n      spendingMap[expense.category] += expense.amount;\n    });\n    return Object.entries(spendingMap)\n      .sort(([, a], [, b]) => b - a)\n      .slice(0, 3)\n      .map(([category, spent]) => ({ category, spent }));\n  }, [activeExpenses]);\n\n  return (\n    <>\n    <AddTaskDialog\n        open={isAddTaskOpen}\n        onOpenChange={setIsAddTaskOpen}\n        onSave={handleSaveTask}\n        task={selectedTask}\n        projects={projects}\n        teamMembers={teamMembers}\n    />\n    <TooltipProvider>\n      <div className=\"flex flex-col gap-6\">\n        <div>\n          <h1 className=\"text-2xl font-bold tracking-tight\">Dashboard</h1>\n          <p className=\"text-muted-foreground\">Welcome back, {userName.split(' ')[0]}</p>\n        </div>\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          <Card>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2 cursor-pointer\">\n                  <CardTitle className=\"text-sm font-medium\">Active Projects</CardTitle>\n                  <Activity className=\"h-4 w-4 text-muted-foreground\" />\n                </CardHeader>\n              </TooltipTrigger>\n              <TooltipContent>\n                 <p className=\"font-bold mb-2\">Active Projects</p>\n                  <ul className=\"list-disc pl-4\">\n                    {activeProjects.map(p => (\n                      <li key={p.id} className=\"text-sm\">\n                        <span className=\"font-semibold\">{p.name}:</span> {p.description}\n                      </li>\n                    ))}\n                  </ul>\n              </TooltipContent>\n            </Tooltip>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{activeProjectsCount}</div>\n              <p className=\"text-xs text-muted-foreground\">\n                {projects.length - activeProjectsCount} inactive\n              </p>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Tasks Due Soon</CardTitle>\n              <CheckCircle className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{tasksDueSoonCount}</div>\n              <p className=\"text-xs text-muted-foreground\">In the next 7 days</p>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">\n                Budget Utilization\n              </CardTitle>\n              <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{budgetUtilization.toFixed(0)}%</div>\n              <p className=\"text-xs text-muted-foreground\">\n                Across all active projects\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          <div className=\"lg:col-span-2 space-y-6\">\n            <Card>\n              <CardHeader>\n                  <CardTitle>Project Timeline</CardTitle>\n              </CardHeader>\n              <CardContent>\n                  <ProjectTimeline projects={projects} />\n              </CardContent>\n            </Card>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <Card>\n                      <CardHeader>\n                          <CardTitle>Budget vs. Actual</CardTitle>\n                          <CardDescription>For active projects</CardDescription>\n                      </CardHeader>\n                      <CardContent>\n                          <BudgetChart />\n                      </CardContent>\n                  </Card>\n                  <Card>\n                      <CardHeader>\n                          <CardTitle>Budget Overview</CardTitle>\n                          <CardDescription>For active projects</CardDescription>\n                      </CardHeader>\n                      <CardContent className=\"space-y-4\">\n                          <div className=\"flex justify-between\">\n                              <div>\n                                  <p className=\"text-sm text-muted-foreground\">Total Budget</p>\n                                  <p className=\"text-2xl font-bold\">${totalBudget.toLocaleString()}</p>\n                              </div>\n                              <div>\n                                  <p className=\"text-sm text-muted-foreground text-right\">Spent to Date</p>\n                                  <p className=\"text-2xl font-bold text-right\">${totalSpent.toLocaleString()}</p>\n                              </div>\n                          </div>\n                          <div>\n                              <p className=\"text-sm text-muted-foreground mb-1\">Overall Budget Utilization</p>\n                              <Progress value={budgetUtilization} />\n                          </div>\n                          <div className=\"border-t pt-4\">\n                              <p className=\"text-sm font-medium mb-2\">Top Spending Categories</p>\n                               {categorySpending.length > 0 ? (\n                                <div className=\"space-y-2\">\n                                  {categorySpending.map(({ category, spent }) => (\n                                    <div key={category} className=\"flex justify-between items-center text-sm\">\n                                      <div className=\"flex items-center gap-2\">\n                                        <ArrowUp className=\"h-4 w-4 text-green-500\" />\n                                        <span>{category}</span>\n                                      </div>\n                                      <span className=\"font-medium\">${spent.toLocaleString()}</span>\n                                    </div>\n                                  ))}\n                                </div>\n                              ) : (\n                                <div className=\"text-center text-muted-foreground py-4\">\n                                  <CircleHelp className=\"mx-auto h-8 w-8 mb-2\" />\n                                  <p className=\"text-sm\">No spending recorded for active projects</p>\n                                  <p className=\"text-xs\">Start adding expenses to see this report.</p>\n                                </div>\n                              )}\n                          </div>\n                          <div className=\"flex justify-between gap-2\">\n                              <Button asChild variant=\"outline\" className=\"w-full\">\n                                <Link href=\"/profit-loss\">View Full Report</Link>\n                              </Button>\n                              <Button variant=\"ghost\" className=\"w-full\">Export Report</Button>\n                          </div>\n                      </CardContent>\n                  </Card>\n              </div>\n          </div>\n          <div className=\"lg:col-span-1 space-y-6\">\n              <TasksDueToday \n                tasks={tasks} \n                projects={projects} \n                onAddTask={() => handleOpenTaskDialog(null)}\n                onViewTask={(task) => handleOpenTaskDialog(task)}\n              />\n              <Card>\n                  <CardHeader className=\"flex flex-row items-center justify-between\">\n                      <CardTitle>Team Members</CardTitle>\n                      <Button variant=\"ghost\" size=\"sm\" asChild><Link href=\"/estimating/team\">View All</Link></Button>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                      {teamMembers.slice(0, 4).map(member => (\n                          <div key={member.id} className=\"flex items-center justify-between\">\n                              <div className=\"flex items-center gap-3\">\n                                  <Avatar className=\"h-9 w-9\">\n                                      <AvatarImage src={member.avatarUrl} alt={member.name} />\n                                      <AvatarFallback>{member.name.split(' ').map(n => n[0]).join('')}</AvatarFallback>\n                                  </Avatar>\n                                  <div>\n                                      <p className=\"font-medium\">{member.name}</p>\n                                      <p className=\"text-xs text-muted-foreground\">{member.role}</p>\n                                  </div>\n                              </div>\n                              <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\n                                  <MoreVertical className=\"h-4 w-4\" />\n                              </Button>\n                          </div>\n                      ))}\n                  </CardContent>\n              </Card>\n              <Card>\n                  <CardHeader className=\"flex flex-row items-center justify-between\">\n                      <CardTitle>Recent Activity</CardTitle>\n                      <Button variant=\"ghost\" size=\"sm\">View All</Button>\n                  </CardHeader>\n                  <CardContent>\n                      <div className=\"text-center text-muted-foreground py-8\">\n                          <p>No recent activity</p>\n                      </div>\n                  </CardContent>\n              </Card>\n          </div>\n        </div>\n      </div>\n    </TooltipProvider>\n    </>\n  );\n}\n",
  "src/app/(app)/estimating/budget-categories/_components/add-edit-budget-category-dialog.tsx": "\n\n'use client';\n\nimport { useEffect, useContext } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { useToast } from '@/hooks/use-toast';\nimport type { BudgetCategory } from '@/lib/types';\nimport { AppStateContext } from '@/context/app-state-context';\n\nconst formSchema = z.object({\n  name: z.string().min(1, 'Category name is required.'),\n});\n\ntype FormValues = z.infer<typeof formSchema>;\n\nexport function AddEditBudgetCategoryDialog({\n  open,\n  onOpenChange,\n  category,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  category: BudgetCategory | null;\n}) {\n  const { toast } = useToast();\n  const appState = useContext(AppStateContext);\n  const form = useForm<FormValues>({\n    resolver: zodResolver(formSchema),\n  });\n\n  useEffect(() => {\n    if (category) {\n      form.reset({ name: category.name });\n    } else {\n      form.reset({ name: '' });\n    }\n  }, [category, form, open]);\n\n  const onSubmit = (data: FormValues) => {\n    if (!appState) return;\n    const { setBudgetCategories } = appState;\n    const isEditing = !!category;\n\n    if (isEditing) {\n        setBudgetCategories(prev => prev.map(c => c.id === category.id ? { ...c, ...data } : c));\n    } else {\n        setBudgetCategories(prev => [...prev, { id: crypto.randomUUID(), ...data }]);\n    }\n    \n    toast({\n      title: `Category ${category ? 'Updated' : 'Created'}`,\n      description: `Successfully ${category ? 'updated' : 'created'} category: ${data.name}.`,\n    });\n    onOpenChange(false);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>{category ? 'Edit' : 'New'} Budget Category</DialogTitle>\n          <DialogDescription>\n            {category ? 'Update the name of this budget category.' : 'Create a new budget category.'}\n          </DialogDescription>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"name\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Category Name</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., Demolition\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <DialogFooter className=\"pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                onClick={() => onOpenChange(false)}\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\">Save</Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
  "src/app/(app)/estimating/budget-categories/page.tsx": "\n\n'use client';\n\nimport { useState, useContext } from 'react';\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { MoreHorizontal, PlusCircle } from \"lucide-react\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuLabel, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { AppStateContext } from '@/context/app-state-context';\nimport { AddEditBudgetCategoryDialog } from './_components/add-edit-budget-category-dialog';\nimport type { BudgetCategory } from '@/lib/types';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from \"@/components/ui/alert-dialog\";\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function BudgetCategoriesPage() {\n    const [dialogOpen, setDialogOpen] = useState(false);\n    const [selectedCategory, setSelectedCategory] = useState<BudgetCategory | null>(null);\n    const appState = useContext(AppStateContext);\n    const { toast } = useToast();\n\n    if (!appState) {\n        return <div>Loading...</div>;\n    }\n\n    const { budgetCategories, setBudgetCategories } = appState;\n\n    const handleNewCategory = () => {\n        setSelectedCategory(null);\n        setDialogOpen(true);\n    };\n\n    const handleEditCategory = (category: BudgetCategory) => {\n        setSelectedCategory(category);\n        setDialogOpen(true);\n    };\n\n    const handleDeleteCategory = (categoryId: string) => {\n        setBudgetCategories(prev => prev.filter(c => c.id !== categoryId));\n        toast({\n            title: \"Category Deleted\",\n            description: \"The budget category has been successfully deleted.\",\n            variant: \"destructive\"\n        });\n    };\n\n    return (\n        <>\n            <AddEditBudgetCategoryDialog\n                open={dialogOpen}\n                onOpenChange={setDialogOpen}\n                category={selectedCategory}\n            />\n            <div className=\"space-y-6\">\n                <div className=\"flex items-center justify-between\">\n                    <div>\n                        <h1 className=\"text-3xl font-bold tracking-tight\">Budget Categories</h1>\n                        <p className=\"text-muted-foreground\">\n                            Manage a master list of budget categories.\n                        </p>\n                    </div>\n                    <Button onClick={handleNewCategory}>\n                        <PlusCircle className=\"mr-2\" />\n                        New Category\n                    </Button>\n                </div>\n                \n                <Card>\n                    <CardHeader>\n                        <CardTitle>All Categories</CardTitle>\n                        <CardDescription>A list of all predefined budget categories for your projects.</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                        <Table>\n                            <TableHeader>\n                                <TableRow>\n                                    <TableHead>Name</TableHead>\n                                    <TableHead className=\"w-[50px]\"></TableHead>\n                                </TableRow>\n                            </TableHeader>\n                            <TableBody>\n                                {budgetCategories.sort((a, b) => a.name.localeCompare(b.name)).map(category => (\n                                    <TableRow key={category.id}>\n                                        <TableCell className=\"font-medium\">{category.name}</TableCell>\n                                        <TableCell>\n                                            <DropdownMenu>\n                                                <DropdownMenuTrigger asChild>\n                                                    <Button aria-haspopup=\"true\" size=\"icon\" variant=\"ghost\">\n                                                        <MoreHorizontal className=\"h-4 w-4\" />\n                                                        <span className=\"sr-only\">Toggle menu</span>\n                                                    </Button>\n                                                </DropdownMenuTrigger>\n                                                <DropdownMenuContent align=\"end\">\n                                                    <DropdownMenuLabel>Actions</DropdownMenuLabel>\n                                                    <DropdownMenuItem onClick={() => handleEditCategory(category)}>Edit</DropdownMenuItem>\n                                                    <AlertDialog>\n                                                        <AlertDialogTrigger asChild>\n                                                            <DropdownMenuItem onSelect={(e) => e.preventDefault()} className=\"text-destructive\">Delete</DropdownMenuItem>\n                                                        </AlertDialogTrigger>\n                                                        <AlertDialogContent>\n                                                            <AlertDialogHeader>\n                                                                <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                                                                <AlertDialogDescription>\n                                                                    This action cannot be undone. This will permanently delete the category &quot;{category.name}&quot;.\n                                                                </AlertDialogDescription>\n                                                            </AlertDialogHeader>\n                                                            <AlertDialogFooter>\n                                                                <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                                                <AlertDialogAction onClick={() => handleDeleteCategory(category.id)} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\n                                                                    Delete\n                                                                </AlertDialogAction>\n                                                            </AlertDialogFooter>\n                                                        </AlertDialogContent>\n                                                    </AlertDialog>\n                                                </DropdownMenuContent>\n                                            </DropdownMenu>\n                                        </TableCell>\n                                    </TableRow>\n                                ))}\n                            </TableBody>\n                        </Table>\n                    </CardContent>\n                </Card>\n            </div>\n        </>\n    );\n}\n",
  "src/app/(app)/estimating/job-estimator/_actions/estimate-job.ts": "\"use server\";\n\nimport {\n  aiJobEstimator,\n  type AIJobEstimatorInput,\n  type AIJobEstimatorOutput,\n} from \"@/ai/flows/ai-job-estimator\";\n\nexport async function estimateJob(\n  input: AIJobEstimatorInput\n): Promise<AIJobEstimatorOutput> {\n  try {\n    const result = await aiJobEstimator(input);\n    return result;\n  } catch (error) {\n    console.error(\"Error in AI job estimator flow:\", error);\n    throw new Error(\"Failed to generate job estimate.\");\n  }\n}\n",
  "src/app/(app)/estimating/job-estimator/_components/job-estimator-form.tsx": "\"use client\";\n\nimport { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport * as z from \"zod\";\n\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Loader2, Wand2 } from \"lucide-react\";\nimport type { AIJobEstimatorOutput } from \"@/ai/flows/ai-job-estimator\";\nimport { estimateJob } from \"../_actions/estimate-job\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n\nconst formSchema = z.object({\n  jobDescription: z.string().min(20, {\n    message: \"Job description must be at least 20 characters.\",\n  }),\n  blueprint: z.any().optional(),\n});\n\nexport function JobEstimatorForm() {\n  const [isLoading, setIsLoading] = useState(false);\n  const [result, setResult] = useState<AIJobEstimatorOutput | null>(null);\n  const { toast } = useToast();\n\n  const form = useForm<z.infer<typeof formSchema>>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      jobDescription: \"\",\n    },\n  });\n\n  async function onSubmit(values: z.infer<typeof formSchema>) {\n    setIsLoading(true);\n    setResult(null);\n\n    let blueprintDataUri: string | undefined;\n    if (values.blueprint && values.blueprint[0]) {\n      const file = values.blueprint[0] as File;\n      const reader = new FileReader();\n      blueprintDataUri = await new Promise((resolve) => {\n        reader.onload = (e) => resolve(e.target?.result as string);\n        reader.readAsDataURL(file);\n      });\n    }\n\n    try {\n      const estimationResult = await estimateJob({\n        jobDescription: values.jobDescription,\n        blueprintDataUri,\n      });\n      setResult(estimationResult);\n    } catch (error) {\n      console.error(error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to generate estimate. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  }\n\n  const totalCost = result?.budgetItems.reduce((acc, item) => acc + item.cost, 0) || 0;\n\n  return (\n    <>\n      <Form {...form}>\n        <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-8\">\n          <FormField\n            control={form.control}\n            name=\"jobDescription\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Job Description</FormLabel>\n                <FormControl>\n                  <Textarea\n                    placeholder=\"e.g., Construction of a 2000 sq ft single-family home with a two-car garage...\"\n                    rows={6}\n                    {...field}\n                  />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n          <FormField\n            control={form.control}\n            name=\"blueprint\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Blueprint (Optional)</FormLabel>\n                <FormControl>\n                  <Input\n                    type=\"file\"\n                    accept=\"image/*,.pdf\"\n                    onChange={(e) => field.onChange(e.target.files)}\n                  />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n          <Button type=\"submit\" disabled={isLoading}>\n            {isLoading ? (\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n            ) : (\n              <Wand2 className=\"mr-2 h-4 w-4\" />\n            )}\n            Generate Estimate\n          </Button>\n        </form>\n      </Form>\n\n      {result && (\n        <Card className=\"mt-8\">\n          <CardHeader>\n            <CardTitle>Generated Budget</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Category</TableHead>\n                  <TableHead>Description</TableHead>\n                  <TableHead className=\"text-right\">Estimated Cost</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {result.budgetItems.map((item, index) => (\n                  <TableRow key={index}>\n                    <TableCell>{item.category}</TableCell>\n                    <TableCell>{item.description}</TableCell>\n                    <TableCell className=\"text-right\">\n                      {item.cost.toLocaleString(\"en-US\", {\n                        style: \"currency\",\n                        currency: \"USD\",\n                      })}\n                    </TableCell>\n                  </TableRow>\n                ))}\n                <TableRow className=\"font-bold bg-secondary\">\n                    <TableCell colSpan={2}>Total Estimated Cost</TableCell>\n                    <TableCell className=\"text-right\">\n                        {totalCost.toLocaleString(\"en-US\", {\n                            style: \"currency\",\n                            currency: \"USD\",\n                        })}\n                    </TableCell>\n                </TableRow>\n              </TableBody>\n            </Table>\n          </CardContent>\n        </Card>\n      )}\n    </>\n  );\n}\n",
  "src/app/(app)/estimating/job-estimator/page.tsx": "import {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { JobEstimatorForm } from \"./_components/job-estimator-form\";\n\nexport default function JobEstimatorPage() {\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">AI Job Estimator</h1>\n        <p className=\"text-muted-foreground\">\n          Generate a preliminary budget from a job description or blueprint.\n        </p>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>New Estimate</CardTitle>\n          <CardDescription>\n            Provide as much detail as possible for a more accurate estimate.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <JobEstimatorForm />\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n",
  "src/app/(app)/estimating/team/_components/add-edit-team-member-dialog.tsx": "\n\n'use client';\n\nimport { useEffect, useState, useContext } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { useToast } from '@/hooks/use-toast';\nimport type { TeamMember } from '@/lib/types';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { User } from 'lucide-react';\nimport { AppStateContext } from '@/context/app-state-context';\n\nconst formSchema = z.object({\n  name: z.string().min(1, 'Name is required.'),\n  role: z.string().min(1, 'Role is required.'),\n  email: z.string().email('Invalid email address.'),\n  phone: z.string().min(1, 'Phone number is required.'),\n  avatar: z.any().optional(),\n});\n\ntype FormValues = z.infer<typeof formSchema>;\n\nexport function AddEditTeamMemberDialog({\n  open,\n  onOpenChange,\n  member,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  member: TeamMember | null;\n}) {\n  const { toast } = useToast();\n  const appState = useContext(AppStateContext);\n  const form = useForm<FormValues>({\n    resolver: zodResolver(formSchema),\n  });\n  const [avatarPreview, setAvatarPreview] = useState<string | null>(null);\n  const isEditing = !!member;\n\n  useEffect(() => {\n    if (open) {\n      if (isEditing && member) {\n        form.reset({\n            name: member.name,\n            role: member.role,\n            email: member.email,\n            phone: member.phone,\n        });\n        setAvatarPreview(member.avatarUrl);\n      } else {\n        form.reset({\n          name: '',\n          role: '',\n          email: '',\n          phone: '',\n          avatar: undefined,\n        });\n        setAvatarPreview(null);\n      }\n    }\n  }, [member, isEditing, open, form]);\n\n  const handleAvatarChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setAvatarPreview(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n      form.setValue('avatar', event.target.files);\n    }\n  };\n\n  const onSubmit = async (data: FormValues) => {\n    if (!appState) return;\n\n    let avatarUrl = member?.avatarUrl || `https://i.pravatar.cc/150?u=${crypto.randomUUID()}`;\n    if (data.avatar && data.avatar[0]) {\n      const file = data.avatar[0] as File;\n      avatarUrl = await new Promise((resolve) => {\n        const reader = new FileReader();\n        reader.onload = (e) => resolve(e.target?.result as string);\n        reader.readAsDataURL(file);\n      });\n    }\n\n    const memberToSave: Omit<TeamMember, 'id'> = {\n      name: data.name,\n      role: data.role,\n      email: data.email,\n      phone: data.phone,\n      avatarUrl,\n    };\n    \n    if (isEditing && member) {\n        appState.setTeamMembers(prev => prev.map(m => m.id === member.id ? { ...member, ...memberToSave } : m));\n    } else {\n        appState.setTeamMembers(prev => [...prev, { id: crypto.randomUUID(), ...memberToSave }]);\n    }\n\n    toast({\n      title: `Member ${isEditing ? 'Updated' : 'Created'}`,\n      description: `Successfully ${isEditing ? 'updated' : 'created'} member: ${data.name}.`,\n    });\n    onOpenChange(false);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>{isEditing ? 'Edit' : 'New'} Team Member</DialogTitle>\n          <DialogDescription>\n            {isEditing ? 'Update the details for this team member.' : 'Add a new member to your team.'}\n          </DialogDescription>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4 max-h-[70vh] overflow-y-auto pr-4\">\n            <FormField\n              control={form.control}\n              name=\"avatar\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Avatar</FormLabel>\n                  <FormControl>\n                     <div className=\"flex items-center gap-4\">\n                        <Avatar className=\"h-20 w-20\">\n                            {avatarPreview ? (\n                                <AvatarImage src={avatarPreview} alt=\"Avatar preview\" />\n                            ) : null}\n                            <AvatarFallback>\n                                <User className=\"h-10 w-10\" />\n                            </AvatarFallback>\n                        </Avatar>\n                        <div className='flex-1'>\n                            <Input \n                            type=\"file\" \n                            accept=\"image/*\" \n                            onChange={handleAvatarChange}\n                            className='w-full'\n                            />\n                            <p className='text-xs text-muted-foreground mt-1'>Upload a photo for the team member.</p>\n                        </div>\n                    </div>\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <FormField\n              control={form.control}\n              name=\"name\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Full Name</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., John Doe\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n             <FormField\n              control={form.control}\n              name=\"role\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Role</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., Project Manager\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n             <FormField\n              control={form.control}\n              name=\"email\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Email</FormLabel>\n                  <FormControl>\n                    <Input type=\"email\" placeholder=\"e.g., john.d@company.com\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n             <FormField\n              control={form.control}\n              name=\"phone\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Phone</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., 555-123-4567\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <DialogFooter className=\"pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                onClick={() => onOpenChange(false)}\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\">Save</Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
  "src/app/(app)/estimating/team/page.tsx": "\n\n'use client';\n\nimport { useContext, useState } from 'react';\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { AppStateContext } from \"@/context/app-state-context\";\nimport { MoreHorizontal, PlusCircle } from \"lucide-react\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuLabel, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { AddEditTeamMemberDialog } from './_components/add-edit-team-member-dialog';\nimport type { TeamMember } from '@/lib/types';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function TeamPage() {\n    const [dialogOpen, setDialogOpen] = useState(false);\n    const [selectedMember, setSelectedMember] = useState<TeamMember | null>(null);\n    const appState = useContext(AppStateContext);\n    const { toast } = useToast();\n\n    if (!appState) {\n        return <div>Loading...</div>;\n    }\n    \n    const { teamMembers, setTeamMembers } = appState;\n\n    const handleNewMember = () => {\n        setSelectedMember(null);\n        setDialogOpen(true);\n    };\n\n    const handleEditMember = (member: TeamMember) => {\n        setSelectedMember(member);\n        setDialogOpen(true);\n    };\n\n    const handleDeleteMember = (memberId: string) => {\n        setTeamMembers(prev => prev.filter(m => m.id !== memberId));\n        toast({\n            title: \"Team Member Deleted\",\n            description: \"The team member has been successfully removed.\",\n            variant: \"destructive\"\n        });\n    };\n\n    return (\n        <>\n            <AddEditTeamMemberDialog\n                open={dialogOpen}\n                onOpenChange={setDialogOpen}\n                member={selectedMember}\n            />\n            <div className=\"space-y-6\">\n                <div className=\"flex items-center justify-between\">\n                    <div>\n                        <h1 className=\"text-3xl font-bold tracking-tight\">Team Members</h1>\n                        <p className=\"text-muted-foreground\">\n                            Manage all internal team members.\n                        </p>\n                    </div>\n                    <Button onClick={handleNewMember}>\n                        <PlusCircle className=\"mr-2\" />\n                        New Member\n                    </Button>\n                </div>\n                \n                <Card>\n                    <CardHeader>\n                        <CardTitle>All Team Members</CardTitle>\n                        <CardDescription>A list of all internal team members in your organization.</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                        <Table>\n                            <TableHeader>\n                                <TableRow>\n                                    <TableHead>Name</TableHead>\n                                    <TableHead>Role</TableHead>\n                                    <TableHead>Email</TableHead>\n                                    <TableHead>Phone</TableHead>\n                                    <TableHead className=\"w-[50px]\"></TableHead>\n                                </TableRow>\n                            </TableHeader>\n                            <TableBody>\n                                {teamMembers.map(member => (\n                                    <TableRow key={member.id}>\n                                        <TableCell>\n                                            <div className=\"flex items-center gap-3\">\n                                                <Avatar>\n                                                    <AvatarImage src={member.avatarUrl} alt={member.name} />\n                                                    <AvatarFallback>{member.name.split(' ').map(n => n[0]).join('')}</AvatarFallback>\n                                                </Avatar>\n                                                <span className=\"font-medium\">{member.name}</span>\n                                            </div>\n                                        </TableCell>\n                                        <TableCell>{member.role}</TableCell>\n                                        <TableCell>{member.email}</TableCell>\n                                        <TableCell>{member.phone}</TableCell>\n                                        <TableCell>\n                                            <DropdownMenu>\n                                                <DropdownMenuTrigger asChild>\n                                                    <Button aria-haspopup=\"true\" size=\"icon\" variant=\"ghost\">\n                                                        <MoreHorizontal className=\"h-4 w-4\" />\n                                                        <span className=\"sr-only\">Toggle menu</span>\n                                                    </Button>\n                                                </DropdownMenuTrigger>\n                                                <DropdownMenuContent align=\"end\">\n                                                    <DropdownMenuLabel>Actions</DropdownMenuLabel>\n                                                    <DropdownMenuItem onClick={() => handleEditMember(member)}>Edit</DropdownMenuItem>\n                                                    <AlertDialog>\n                                                        <AlertDialogTrigger asChild>\n                                                            <DropdownMenuItem onSelect={(e) => e.preventDefault()} className=\"text-destructive\">Delete</DropdownMenuItem>\n                                                        </AlertDialogTrigger>\n                                                        <AlertDialogContent>\n                                                            <AlertDialogHeader>\n                                                                <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                                                                <AlertDialogDescription>\n                                                                    This action cannot be undone. This will permanently delete the team member &quot;{member.name}&quot;.\n                                                                </AlertDialogDescription>\n                                                            </AlertDialogHeader>\n                                                            <AlertDialogFooter>\n                                                                <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                                                <AlertDialogAction onClick={() => handleDeleteMember(member.id)} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\n                                                                    Delete\n                                                                </AlertDialogAction>\n                                                            </AlertDialogFooter>\n                                                        </AlertDialogContent>\n                                                    </AlertDialog>\n                                                </DropdownMenuContent>\n                                            </DropdownMenu>\n                                        </TableCell>\n                                    </TableRow>\n                                ))}\n                            </TableBody>\n                        </Table>\n                    </CardContent>\n                </Card>\n            </div>\n        </>\n    );\n}\n",
  "src/app/(app)/estimating/vendors/_components/add-edit-vendor-dialog.tsx": "\n\n'use client';\n\nimport { useEffect, useContext } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { useToast } from '@/hooks/use-toast';\nimport type { Vendor } from '@/lib/types';\nimport { AppStateContext } from '@/context/app-state-context';\n\nconst formSchema = z.object({\n  name: z.string().min(1, 'Vendor name is required.'),\n  trade: z.string().min(1, 'Trade is required.'),\n  contactPerson: z.string().min(1, 'Contact person is required.'),\n  phone: z.string().min(1, 'Phone number is required.'),\n  email: z.string().email('Invalid email address.'),\n});\n\ntype FormValues = z.infer<typeof formSchema>;\n\nexport function AddEditVendorDialog({\n  open,\n  onOpenChange,\n  vendor,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  vendor: Vendor | null;\n}) {\n  const { toast } = useToast();\n  const appState = useContext(AppStateContext);\n  const form = useForm<FormValues>({\n    resolver: zodResolver(formSchema),\n  });\n\n  useEffect(() => {\n    if (vendor) {\n      form.reset(vendor);\n    } else {\n      form.reset({\n        name: '',\n        trade: '',\n        contactPerson: '',\n        phone: '',\n        email: '',\n      });\n    }\n  }, [vendor, form, open]);\n\n  const onSubmit = (data: FormValues) => {\n    if (!appState) return;\n    const { setVendors } = appState;\n    const isEditing = !!vendor;\n\n    if (isEditing) {\n        setVendors(prev => prev.map(v => v.id === vendor.id ? { ...v, ...data } : v));\n    } else {\n        setVendors(prev => [...prev, { id: crypto.randomUUID(), ...data }]);\n    }\n\n    toast({\n      title: `Vendor ${vendor ? 'Updated' : 'Created'}`,\n      description: `Successfully ${vendor ? 'updated' : 'created'} vendor: ${data.name}.`,\n    });\n    onOpenChange(false);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>{vendor ? 'Edit' : 'New'} Vendor</DialogTitle>\n          <DialogDescription>\n            {vendor ? 'Update the details for this vendor.' : 'Create a new vendor or subcontractor.'}\n          </DialogDescription>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"name\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Vendor Name</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., A-1 Electric\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n             <FormField\n              control={form.control}\n              name=\"trade\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Trade</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., Electrical\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n             <FormField\n              control={form.control}\n              name=\"contactPerson\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Contact Person</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., Sarah Connor\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n             <FormField\n              control={form.control}\n              name=\"phone\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Phone</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., 555-0101\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n             <FormField\n              control={form.control}\n              name=\"email\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Email</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., sarah.c@a1electric.com\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <DialogFooter className=\"pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                onClick={() => onOpenChange(false)}\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\">Save</Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
  "src/app/(app)/estimating/vendors/page.tsx": "\n\n'use client';\n\nimport { useState, useContext, useRef, useMemo } from 'react';\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { MoreHorizontal, PlusCircle, Trash2, Upload } from \"lucide-react\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuLabel, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { AppStateContext } from '@/context/app-state-context';\nimport { AddEditVendorDialog } from './_components/add-edit-vendor-dialog';\nimport type { Vendor } from '@/lib/types';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from \"@/components/ui/alert-dialog\";\nimport { useToast } from '@/hooks/use-toast';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport * as XLSX from 'xlsx';\n\nexport default function VendorsPage() {\n    const [dialogOpen, setDialogOpen] = useState(false);\n    const [selectedVendor, setSelectedVendor] = useState<Vendor | null>(null);\n    const [selectedRowKeys, setSelectedRowKeys] = useState<string[]>([]);\n    const appState = useContext(AppStateContext);\n    const { toast } = useToast();\n    const fileInputRef = useRef<HTMLInputElement>(null);\n\n\n    if (!appState) {\n        return <div>Loading...</div>;\n    }\n\n    const { vendors, setVendors } = appState;\n\n    const sortedVendors = useMemo(() => vendors.sort((a, b) => a.name.localeCompare(b.name)), [vendors]);\n\n    const handleNewVendor = () => {\n        setSelectedVendor(null);\n        setDialogOpen(true);\n    };\n\n    const handleEditVendor = (vendor: Vendor) => {\n        setSelectedVendor(vendor);\n        setDialogOpen(true);\n    };\n\n    const handleDeleteVendor = (vendorId: string) => {\n        setVendors(prev => prev.filter(v => v.id !== vendorId));\n        toast({\n            title: \"Vendor Deleted\",\n            description: \"The vendor has been successfully deleted.\",\n            variant: \"destructive\"\n        });\n    };\n\n     const handleDeleteSelected = () => {\n        setVendors(current => current.filter(v => !selectedRowKeys.includes(v.id)));\n        toast({\n            title: `${selectedRowKeys.length} Vendor(s) Deleted`,\n            description: \"The selected vendors have been removed.\",\n            variant: \"destructive\"\n        });\n        setSelectedRowKeys([]);\n    };\n\n    const handleImportClick = () => {\n        fileInputRef.current?.click();\n    };\n\n    const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const file = event.target.files?.[0];\n        if (!file) return;\n\n        const reader = new FileReader();\n        reader.onload = (e) => {\n            try {\n                const data = e.target?.result;\n                const workbook = XLSX.read(data, { type: 'array' });\n                const sheetName = workbook.SheetNames[0];\n                const worksheet = workbook.Sheets[sheetName];\n                const json = XLSX.utils.sheet_to_json(worksheet, { header: 1 }) as any[][];\n                \n                const newVendors: Vendor[] = json.slice(1).map(row => {\n                    if (!row || row.length === 0 || !row[0]) return null;\n                    return {\n                        id: crypto.randomUUID(),\n                        name: row[0] || '',\n                        trade: row[1] || 'N/A',\n                        contactPerson: row[2] || 'N/A',\n                        phone: row[3] || 'N/A',\n                        email: row[4] || 'N/A'\n                    };\n                }).filter((v): v is Vendor => v !== null);\n\n                if (newVendors.length > 0) {\n                    setVendors(current => [...current, ...newVendors]);\n                    toast({\n                        title: 'Import Successful',\n                        description: `${newVendors.length} vendors have been imported.`,\n                    });\n                } else {\n                     toast({\n                        title: 'Import Warning',\n                        description: 'No valid vendors found in the file.',\n                        variant: 'destructive',\n                    });\n                }\n            } catch (error) {\n                console.error('Error importing vendors:', error);\n                toast({\n                    title: 'Import Failed',\n                    description: 'There was an error processing your file.',\n                    variant: 'destructive',\n                });\n            }\n        };\n\n        reader.readAsArrayBuffer(file);\n        if (fileInputRef.current) {\n            fileInputRef.current.value = '';\n        }\n    };\n\n\n    return (\n        <>\n            <input\n                type=\"file\"\n                ref={fileInputRef}\n                className=\"hidden\"\n                onChange={handleFileChange}\n                accept=\".xlsx, .xls, .csv, .txt\"\n            />\n            <AddEditVendorDialog\n                open={dialogOpen}\n                onOpenChange={setDialogOpen}\n                vendor={selectedVendor}\n            />\n            <div className=\"space-y-6\">\n                <div className=\"flex items-center justify-between\">\n                    <div>\n                        <h1 className=\"text-3xl font-bold tracking-tight\">Vendors</h1>\n                        <p className=\"text-muted-foreground\">\n                            Manage a master list of all company vendors and subcontractors.\n                        </p>\n                    </div>\n                     <div className=\"flex items-center gap-2\">\n                        {selectedRowKeys.length > 0 ? (\n                            <AlertDialog>\n                                <AlertDialogTrigger asChild>\n                                    <Button variant=\"destructive\">\n                                        <Trash2 className=\"mr-2 h-4 w-4\" />\n                                        Delete ({selectedRowKeys.length})\n                                    </Button>\n                                </AlertDialogTrigger>\n                                <AlertDialogContent>\n                                    <AlertDialogHeader>\n                                        <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                                        <AlertDialogDescription>\n                                            This action cannot be undone. This will permanently delete {selectedRowKeys.length} vendor(s).\n                                        </AlertDialogDescription>\n                                    </AlertDialogHeader>\n                                    <AlertDialogFooter>\n                                        <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                        <AlertDialogAction onClick={handleDeleteSelected} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\n                                            Delete\n                                        </AlertDialogAction>\n                                    </AlertDialogFooter>\n                                </AlertDialogContent>\n                            </AlertDialog>\n                        ) : (\n                            <>\n                                <Button variant=\"outline\" onClick={handleImportClick}>\n                                    <Upload className=\"mr-2 h-4 w-4\" />\n                                    Import\n                                </Button>\n                                <Button onClick={handleNewVendor}>\n                                    <PlusCircle className=\"mr-2\" />\n                                    New Vendor\n                                </Button>\n                            </>\n                        )}\n                    </div>\n                </div>\n                \n                <Card>\n                    <CardHeader>\n                        <CardTitle>All Vendors</CardTitle>\n                        <CardDescription>A list of all vendors and subcontractors available for your projects.</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                        <Table>\n                            <TableHeader>\n                                <TableRow>\n                                    <TableHead className=\"w-[40px]\">\n                                        <Checkbox\n                                            checked={selectedRowKeys.length > 0 && selectedRowKeys.length === sortedVendors.length}\n                                            onCheckedChange={(checked) => {\n                                                if (checked) {\n                                                    setSelectedRowKeys(sortedVendors.map(v => v.id));\n                                                } else {\n                                                    setSelectedRowKeys([]);\n                                                }\n                                            }}\n                                            aria-label=\"Select all rows\"\n                                        />\n                                    </TableHead>\n                                    <TableHead>Name</TableHead>\n                                    <TableHead>Trade</TableHead>\n                                    <TableHead>Contact Person</TableHead>\n                                    <TableHead>Phone</TableHead>\n                                    <TableHead>Email</TableHead>\n                                    <TableHead className=\"w-[50px]\"></TableHead>\n                                </TableRow>\n                            </TableHeader>\n                            <TableBody>\n                                {sortedVendors.map(vendor => (\n                                    <TableRow key={vendor.id} data-state={selectedRowKeys.includes(vendor.id) && \"selected\"}>\n                                        <TableCell>\n                                            <Checkbox\n                                                checked={selectedRowKeys.includes(vendor.id)}\n                                                onCheckedChange={(checked) => {\n                                                    if (checked) {\n                                                        setSelectedRowKeys(prev => [...prev, vendor.id]);\n                                                    } else {\n                                                        setSelectedRowKeys(prev => prev.filter(id => id !== vendor.id));\n                                                    }\n                                                }}\n                                                aria-label=\"Select row\"\n                                            />\n                                        </TableCell>\n                                        <TableCell className=\"font-medium\">{vendor.name}</TableCell>\n                                        <TableCell>{vendor.trade}</TableCell>\n                                        <TableCell>{vendor.contactPerson}</TableCell>\n                                        <TableCell>{vendor.phone}</TableCell>\n                                        <TableCell>{vendor.email}</TableCell>\n                                        <TableCell>\n                                            <DropdownMenu>\n                                                <DropdownMenuTrigger asChild>\n                                                    <Button aria-haspopup=\"true\" size=\"icon\" variant=\"ghost\">\n                                                        <MoreHorizontal className=\"h-4 w-4\" />\n                                                        <span className=\"sr-only\">Toggle menu</span>\n                                                    </Button>\n                                                </DropdownMenuTrigger>\n                                                <DropdownMenuContent align=\"end\">\n                                                    <DropdownMenuLabel>Actions</DropdownMenuLabel>\n                                                    <DropdownMenuItem onClick={() => handleEditVendor(vendor)}>Edit</DropdownMenuItem>\n                                                    <AlertDialog>\n                                                        <AlertDialogTrigger asChild>\n                                                            <DropdownMenuItem onSelect={(e) => e.preventDefault()} className=\"text-destructive\">Delete</DropdownMenuItem>\n                                                        </AlertDialogTrigger>\n                                                        <AlertDialogContent>\n                                                            <AlertDialogHeader>\n                                                                <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                                                                <AlertDialogDescription>\n                                                                    This action cannot be undone. This will permanently delete the vendor &quot;{vendor.name}&quot;.\n                                                                </AlertDialogDescription>\n                                                            </AlertDialogHeader>\n                                                            <AlertDialogFooter>\n                                                                <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                                                <AlertDialogAction onClick={() => handleDeleteVendor(vendor.id)} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\n                                                                    Delete\n                                                                </AlertDialogAction>\n                                                            </AlertDialogFooter>\n                                                        </AlertDialogContent>\n                                                    </AlertDialog>\n                                                </DropdownMenuContent>\n                                            </DropdownMenu>\n                                        </TableCell>\n                                    </TableRow>\n                                ))}\n                            </TableBody>\n                        </Table>\n                    </CardContent>\n                </Card>\n            </div>\n        </>\n    );\n}\n",
  "src/app/(app)/import-export/page.tsx": "\n'use client';\n\nimport { useContext, useRef, useMemo } from 'react';\nimport { Button } from '@/components/ui/button';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { AppStateContext } from '@/context/app-state-context';\nimport { useToast } from '@/hooks/use-toast';\nimport { Download, Upload, HardDrive, Database, BookOpen, PenSquare, Trash2 } from 'lucide-react';\nimport type {\n  Project,\n  BudgetItem,\n  Expense,\n  Vendor,\n  TeamMember,\n  BudgetCategory,\n  Task,\n  ChangeOrder,\n  RFI,\n  Issue,\n  Milestone,\n} from '@/lib/types';\nimport { Progress } from '@/components/ui/progress';\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\n\ntype AllData = {\n  projects: Project[];\n  vendors: Vendor[];\n  teamMembers: TeamMember[];\n  budgetCategories: BudgetCategory[];\n  tasks: Task[];\n  budgetItems: BudgetItem[];\n  expenses: Expense[];\n  changeOrders: ChangeOrder[];\n  rfis: RFI[];\n  issues: Issue[];\n  milestones: Milestone[];\n  companyName: string;\n  companyLogoUrl: string;\n  userName: string;\n  userAvatarUrl: string;\n  userEmail: string;\n};\n\nconst ONE_GIB_IN_BYTES = 1 * 1024 * 1024 * 1024;\n\nexport default function ImportExportPage() {\n  const appState = useContext(AppStateContext);\n  const { toast } = useToast();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  if (!appState) {\n    return <div>Loading...</div>;\n  }\n\n  const {\n    projects,\n    vendors,\n    teamMembers,\n    budgetCategories,\n    tasks,\n    budgetItems,\n    expenses,\n    changeOrders,\n    rfis,\n    issues,\n    milestones,\n    companyName,\n    companyLogoUrl,\n    userName,\n    userAvatarUrl,\n    userEmail,\n    setProjects,\n    setVendors,\n    setTeamMembers,\n    setBudgetCategories,\n    setTasks,\n    setBudgetItems,\n    setExpenses,\n    setChangeOrders,\n    setRfis,\n    setIssues,\n    setMilestones,\n    setCompanyName,\n    setCompanyLogoUrl,\n    setUserName,\n    setUserAvatarUrl,\n    setUserEmail,\n  } = appState;\n  \n  const allData: AllData = {\n    projects,\n    vendors,\n    teamMembers,\n    budgetCategories,\n    tasks,\n    budgetItems,\n    expenses,\n    changeOrders,\n    rfis,\n    issues,\n    milestones,\n    companyName,\n    companyLogoUrl,\n    userName,\n    userAvatarUrl,\n    userEmail,\n  };\n  \n  const { sizeInBytes, displaySize } = useMemo(() => {\n    try {\n      const jsonString = JSON.stringify(allData);\n      const bytes = new Blob([jsonString]).size;\n      let sizeLabel: string;\n      if (bytes < 1024) {\n        sizeLabel = `${bytes.toFixed(2)} Bytes`;\n      } else if (bytes < 1024 * 1024) {\n        sizeLabel = `${(bytes / 1024).toFixed(2)} KB`;\n      } else if (bytes < 1024 * 1024 * 1024){\n        sizeLabel = `${(bytes / (1024 * 1024)).toFixed(2)} MB`;\n      } else {\n        sizeLabel = `${(bytes / ONE_GIB_IN_BYTES).toFixed(2)} GB`;\n      }\n      return { sizeInBytes: bytes, displaySize: sizeLabel };\n    } catch {\n      return { sizeInBytes: 0, displaySize: \"N/A\" };\n    }\n  }, [allData]);\n\n  const storageUsagePercentage = (sizeInBytes / ONE_GIB_IN_BYTES) * 100;\n\n  const handleImportClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      try {\n        const text = e.target?.result as string;\n        const data: AllData = JSON.parse(text);\n\n        // Here we could add validation with Zod if we had schemas for AllData\n        // For now, we'll trust the structure.\n\n        setProjects(data.projects || []);\n        setVendors(data.vendors || []);\n        setTeamMembers(data.teamMembers || []);\n        setBudgetCategories(data.budgetCategories || []);\n        setTasks(data.tasks || []);\n        setBudgetItems(data.budgetItems || []);\n        setExpenses(data.expenses || []);\n        setChangeOrders(data.changeOrders || []);\n        setRfis(data.rfis || []);\n        setIssues(data.issues || []);\n        setMilestones(data.milestones || []);\n        setCompanyName(data.companyName || 'FancyBuilders');\n        setCompanyLogoUrl(data.companyLogoUrl || '/your-logo.png');\n        setUserName(data.userName || 'John Doe');\n        setUserAvatarUrl(data.userAvatarUrl || 'https://i.pravatar.cc/150?u=john');\n        setUserEmail(data.userEmail || 'john.doe@constructai.com');\n\n        toast({\n          title: 'Import Successful',\n          description: 'All application data has been restored from your file.',\n        });\n      } catch (error) {\n        console.error('Error importing data:', error);\n        toast({\n          title: 'Import Failed',\n          description:\n            'There was an error processing the file. Please ensure it is a valid JSON backup file.',\n          variant: 'destructive',\n        });\n      }\n    };\n    reader.readAsText(file);\n\n    // Reset file input\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleExport = () => {\n    try {\n      const jsonString = JSON.stringify(allData, null, 2);\n      const blob = new Blob([jsonString], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      const date = new Date().toISOString().split('T')[0];\n      link.download = `constructai-backup-${date}.json`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      URL.revokeObjectURL(url);\n\n      toast({\n        title: 'Export Successful',\n        description: 'All application data has been downloaded.',\n      });\n    } catch (error) {\n      console.error('Export failed:', error);\n      toast({\n        title: 'Export Failed',\n        description: 'An unexpected error occurred during the export.',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <input\n        type=\"file\"\n        ref={fileInputRef}\n        className=\"hidden\"\n        onChange={handleFileChange}\n        accept=\".json\"\n      />\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">Import / Export</h1>\n        <p className=\"text-muted-foreground\">\n          Manage your application data in bulk and monitor storage usage.\n        </p>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Data Management</CardTitle>\n          <CardDescription>\n            Download a single backup file of all your data, or upload a backup file to restore your application state.\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n            <div\n              className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between rounded-lg border p-4\"\n            >\n              <div className='mb-4 sm:mb-0'>\n                <p className=\"font-medium\">All Application Data</p>\n                <p className=\"text-sm text-muted-foreground\">\n                  Save or load a snapshot of your entire application.\n                </p>\n              </div>\n              <div className=\"flex w-full sm:w-auto items-center gap-2\">\n                <Button\n                  variant=\"outline\"\n                  className='w-1/2 sm:w-auto'\n                  onClick={handleImportClick}\n                >\n                  <Upload className=\"mr-2 h-4 w-4\" /> Import\n                </Button>\n                <Button variant=\"default\" className='w-1/2 sm:w-auto' onClick={handleExport}>\n                  <Download className=\"mr-2 h-4 w-4\" /> Export\n                </Button>\n              </div>\n            </div>\n             <Card>\n                <CardHeader className=\"flex flex-row items-center gap-4 space-y-0 pb-2\">\n                    <HardDrive className=\"h-8 w-8 text-muted-foreground\" />\n                    <div>\n                        <CardTitle>Current Data Size</CardTitle>\n                        <CardDescription>The total size of your data stored in the browser relative to Firestore's 1 GiB free tier.</CardDescription>\n                    </div>\n                </CardHeader>\n                <CardContent>\n                    <p className=\"text-3xl font-bold\">{displaySize}</p>\n                    <Progress value={storageUsagePercentage} className=\"mt-2\" />\n                    <p className=\"text-xs text-muted-foreground mt-1\">\n                      You've used {storageUsagePercentage.toFixed(4)}% of the 1 GiB free limit.\n                    </p>\n                </CardContent>\n            </Card>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <Card>\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                        <CardTitle className=\"text-sm font-medium\">Document Reads</CardTitle>\n                        <BookOpen className=\"h-4 w-4 text-muted-foreground\" />\n                    </CardHeader>\n                    <CardContent>\n                        <div className=\"text-2xl font-bold\">0</div>\n                        <p className=\"text-xs text-muted-foreground\">\n                        of 50,000 per day (free tier)\n                        </p>\n                    </CardContent>\n                </Card>\n                 <Card>\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                        <CardTitle className=\"text-sm font-medium\">Document Writes</CardTitle>\n                        <PenSquare className=\"h-4 w-4 text-muted-foreground\" />\n                    </CardHeader>\n                    <CardContent>\n                        <div className=\"text-2xl font-bold\">0</div>\n                        <p className=\"text-xs text-muted-foreground\">\n                        of 20,000 per day (free tier)\n                        </p>\n                    </CardContent>\n                </Card>\n                 <Card>\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                        <CardTitle className=\"text-sm font-medium\">Document Deletes</CardTitle>\n                        <Trash2 className=\"h-4 w-4 text-muted-foreground\" />\n                    </CardHeader>\n                    <CardContent>\n                        <div className=\"text-2xl font-bold\">0</div>\n                        <p className=\"text-xs text-muted-foreground\">\n                        of 20,000 per day (free tier)\n                        </p>\n                    </CardContent>\n                </Card>\n            </div>\n            <Alert>\n              <Database className=\"h-4 w-4\" />\n              <AlertTitle>Note on Usage Metrics</AlertTitle>\n              <AlertDescription>\n                The read, write, and delete counts are currently zero because the application is using local browser storage. Migrating to Firebase Firestore would enable these real-time metrics.\n              </AlertDescription>\n            </Alert>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n",
  "src/app/(app)/issues/page.tsx": "export default function IssuesPage() {\n    return (\n        <div>\n            <h1 className=\"text-3xl font-bold tracking-tight\">Issues</h1>\n            <p className=\"text-muted-foreground\">\n                This page will display all issues across all projects.\n            </p>\n        </div>\n    );\n}\n",
  "src/app/(app)/layout.tsx": "\n\n'use client'\n\nimport Link from 'next/link';\nimport {\n    Sidebar,\n    SidebarContent,\n    SidebarHeader,\n    SidebarInset,\n    SidebarProvider,\n    SidebarTrigger,\n} from '@/components/ui/sidebar';\nimport { MainNav } from '@/components/main-nav';\nimport { UserNav } from '@/components/user-nav';\nimport { Logo } from '@/components/icons';\nimport { Input } from '@/components/ui/input';\nimport { Search } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { AppStateProvider } from '@/context/app-state-context';\nimport { useEffect, useState } from 'react';\n\n\nfunction AppLayoutClient({ children }: { children: React.ReactNode }) {\n    const [hasMounted, setHasMounted] = useState(false);\n\n    useEffect(() => {\n        setHasMounted(true);\n    }, []);\n\n    if (!hasMounted) {\n        return null;\n    }\n\n    return (\n        <AppStateProvider>\n            <SidebarProvider>\n                <Sidebar>\n                    <SidebarHeader className=\"p-4\">\n                        <Link href=\"/dashboard\" className=\"flex items-center gap-2\">\n                            <Logo className=\"size-8\" />\n                            <span className=\"text-lg font-semibold\">ConstructAI</span>\n                        </Link>\n                    </SidebarHeader>\n                    <SidebarContent>\n                        <MainNav />\n                    </SidebarContent>\n                </Sidebar>\n\n                <SidebarInset className=\"flex flex-col\">\n                    <header className=\"sticky top-0 z-10 flex h-14 items-center justify-between gap-4 border-b bg-background px-4 sm:px-6\">\n                        <div className=\"flex items-center gap-2\">\n                            <SidebarTrigger className=\"md:hidden\" />\n                            <div className=\"relative hidden md:block\">\n                                <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n                                <Input\n                                    type=\"search\"\n                                    placeholder=\"Search projects...\"\n                                    className=\"w-full rounded-lg bg-secondary pl-8 md:w-[200px] lg:w-[320px]\"\n                                />\n                            </div>\n                        </div>\n\n                        <div className=\"flex items-center gap-4\">\n                            <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\n                                <Search className=\"h-5 w-5\" />\n                                <span className=\"sr-only\">Search</span>\n                            </Button>\n                            <UserNav />\n                        </div>\n                    </header>\n                    <main className=\"flex-1 overflow-auto p-4 sm:p-6\">\n                        {children}\n                    </main>\n                </SidebarInset>\n            </SidebarProvider>\n        </AppStateProvider>\n    );\n}\n\nexport default function AppLayout({ children }: { children: React.ReactNode }) {\n    return (\n        <AppLayoutClient>{children}</AppLayoutClient>\n    );\n}\n",
  "src/app/(app)/profit-loss/page.tsx": "\n'use client';\n\nimport { useState, useMemo, useContext } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from '@/components/ui/tabs';\nimport {\n  BarChart,\n  TrendingDown,\n  TrendingUp,\n  Wallet,\n} from 'lucide-react';\nimport { FinancialBreakdownChart } from './_components/financial-breakdown-chart';\nimport { AppStateContext } from '@/context/app-state-context';\n\nexport default function ProfitLossPage() {\n  const [selectedProjectId, setSelectedProjectId] = useState('all');\n  const appState = useContext(AppStateContext);\n\n  if (!appState) {\n    return <div>Loading...</div>;\n  }\n\n  const { projects, budgetItems, expenses: allExpenses } = appState;\n\n  const financialData = useMemo(() => {\n    const relevantProjects =\n      selectedProjectId === 'all'\n        ? projects\n        : projects.filter((p) => p.id === selectedProjectId);\n\n    const projectIds = relevantProjects.map((p) => p.id);\n    \n    const bidAmount = relevantProjects.reduce((acc, p) => acc + p.finalBidAmount, 0);\n\n    const relevantBudgetItems = budgetItems.filter((item) =>\n      projectIds.includes(item.projectId)\n    );\n\n    const budget = relevantBudgetItems.reduce(\n      (acc, item) => acc + item.originalBudget + item.approvedCOBudget,\n      0\n    );\n\n    const relevantExpenses = allExpenses.filter((expense) =>\n      projectIds.includes(expense.projectId)\n    );\n    const expenses = relevantExpenses.reduce((acc, exp) => acc + exp.amount, 0);\n\n    const profitLoss = bidAmount - expenses;\n    const remainingBudget = budget - expenses;\n\n    return { bidAmount, budget, expenses, profitLoss, remainingBudget };\n  }, [selectedProjectId, projects, allExpenses, budgetItems]);\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-start\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">\n            Profit & Loss Reports\n          </h1>\n          <p className=\"text-muted-foreground\">\n            View financial performance across projects or for specific projects\n          </p>\n        </div>\n        <Select\n          defaultValue=\"all\"\n          onValueChange={(value) => setSelectedProjectId(value)}\n        >\n          <SelectTrigger className=\"w-[180px]\">\n            <SelectValue placeholder=\"Select a project\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Projects</SelectItem>\n            {projects.map((project) => (\n              <SelectItem key={project.id} value={project.id}>\n                {project.name}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </div>\n\n      <Tabs defaultValue=\"summary\">\n        <TabsList>\n          <TabsTrigger value=\"summary\">Summary</TabsTrigger>\n          <TabsTrigger value=\"detailed-analysis\" disabled>\n            Detailed Analysis\n          </TabsTrigger>\n          <TabsTrigger value=\"project-comparison\" disabled>\n            Project Comparison\n          </TabsTrigger>\n        </TabsList>\n        <TabsContent value=\"summary\" className=\"mt-6\">\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n            <Card>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">Total Budget</CardTitle>\n                <BarChart className=\"h-4 w-4 text-muted-foreground\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">\n                  {financialData.budget.toLocaleString('en-US', {\n                    style: 'currency',\n                    currency: 'USD',\n                  })}\n                </div>\n                <p className=\"text-xs text-muted-foreground\">Sum of all budget line items</p>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">\n                  Spent so far\n                </CardTitle>\n                <TrendingDown className=\"h-4 w-4 text-muted-foreground\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">\n                  {financialData.expenses.toLocaleString('en-US', {\n                    style: 'currency',\n                    currency: 'USD',\n                  })}\n                </div>\n                <p className=\"text-xs text-muted-foreground\">\n                  Actual expenditure\n                </p>\n              </CardContent>\n            </Card>\n             <Card>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">\n                  Remaining\n                </CardTitle>\n                <Wallet className=\"h-4 w-4 text-muted-foreground\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">\n                  {financialData.remainingBudget.toLocaleString('en-US', {\n                    style: 'currency',\n                    currency: 'USD',\n                  })}\n                </div>\n                <p className=\"text-xs text-muted-foreground\">Budget - Spent</p>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">\n                  Profit/Loss\n                </CardTitle>\n                <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">\n                  {financialData.profitLoss.toLocaleString('en-US', {\n                    style: 'currency',\n                    currency: 'USD',\n                  })}\n                </div>\n                <p className=\"text-xs text-muted-foreground\">Bid - Expenses</p>\n              </CardContent>\n            </Card>\n          </div>\n          <div className=\"mt-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Financial Breakdown</CardTitle>\n                <p className=\"text-sm text-muted-foreground\">\n                  Visual comparison of budget, expenses, and profit\n                </p>\n              </CardHeader>\n              <CardContent className=\"pl-2\">\n                <FinancialBreakdownChart\n                  data={{\n                    budget: financialData.budget,\n                    expenses: financialData.expenses,\n                    remaining: financialData.profitLoss,\n                  }}\n                />\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n",
  "src/app/(app)/profit-loss/_components/financial-breakdown-chart.tsx": "\n\"use client\"\n\nimport { useMemo } from \"react\"\nimport { Bar, BarChart, CartesianGrid, XAxis, YAxis, ResponsiveContainer } from \"recharts\"\n\nimport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n} from \"@/components/ui/chart\"\n\nconst chartConfig = {\n  value: {\n    label: \"Amount\",\n  },\n  budget: {\n    label: \"Budget\",\n    color: \"hsl(var(--chart-2))\",\n  },\n  expenses: {\n    label: \"Spent so far\",\n    color: \"hsl(var(--chart-3))\",\n  },\n  remaining: {\n    label: \"Remaining\",\n    color: \"hsl(var(--chart-4))\",\n  },\n} as const;\n\ntype FinancialBreakdownChartProps = {\n    data: {\n        budget: number;\n        expenses: number;\n        remaining: number;\n    }\n}\n\nexport function FinancialBreakdownChart({ data }: FinancialBreakdownChartProps) {\n  const chartData = useMemo(() => [\n      { name: \"Budget\", value: data.budget, fill: \"var(--color-budget)\" },\n      { name: \"Spent so far\", value: data.expenses, fill: \"var(--color-expenses)\" },\n      { name: \"Remaining\", value: data.remaining, fill: \"var(--color-remaining)\" },\n  ], [data]);\n\n  return (\n    <ChartContainer config={chartConfig} className=\"min-h-[300px] w-full\">\n      <ResponsiveContainer>\n        <BarChart data={chartData} accessibilityLayer>\n            <CartesianGrid vertical={false} />\n            <XAxis\n            dataKey=\"name\"\n            tickLine={false}\n            tickMargin={10}\n            axisLine={false}\n            />\n            <YAxis \n            tickFormatter={(value) => `$${Number(value) / 1000}k`}\n            />\n            <ChartTooltip\n            cursor={false}\n            content={<ChartTooltipContent indicator=\"dot\" />}\n            />\n            <Bar dataKey=\"value\" radius={4} />\n        </BarChart>\n      </ResponsiveContainer>\n    </ChartContainer>\n  )\n}\n",
  "src/app/(app)/projects/[id]/(tabs)/change-orders/page.tsx": "// app/(app)/projects/[id]/(tabs)/change-orders/page.tsx\n'use client';\n\nimport { useState, useContext } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { MoreHorizontal, PlusCircle, FileText } from 'lucide-react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { AddChangeOrderDialog } from '../../_components/add-change-order-dialog';\nimport { AppStateContext } from '@/context/app-state-context';\nimport type { ChangeOrder } from '@/lib/types';\nimport { notFound } from 'next/navigation';\n\nexport default function ProjectChangeOrdersPage({\n  params,\n}: {\n  params: { id: string };\n}) {\n  const [isAddChangeOrderOpen, setIsAddChangeOrderOpen] = useState(false);\n  const appState = useContext(AppStateContext);\n\n  if (!appState) return <div>Loading...</div>;\n\n  const { projects, changeOrders } = appState;\n  const project = projects.find((p) => p.id === params.id);\n  if (!project) notFound();\n\n  const projectChangeOrders = changeOrders.filter(\n    (co) => co.projectId === params.id\n  );\n\n  const statusVariant: Record<ChangeOrder['status'], 'default' | 'secondary' | 'outline' | 'destructive'> = {\n    Submitted: 'secondary',\n    Approved: 'default',\n    Executed: 'outline',\n    Rejected: 'destructive',\n  };\n\n  return (\n    <>\n      <AddChangeOrderDialog\n        open={isAddChangeOrderOpen}\n        onOpenChange={setIsAddChangeOrderOpen}\n      />\n      <Card>\n        <CardHeader>\n          <div className=\"flex justify-between items-center\">\n            <div>\n              <CardTitle className=\"text-2xl\">Change Orders</CardTitle>\n              <CardDescription>\n                Manage all change orders for this project.\n              </CardDescription>\n            </div>\n            <Button onClick={() => setIsAddChangeOrderOpen(true)}>\n              <PlusCircle className=\"mr-2 h-4 w-4\" /> Add Change Order\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead className=\"w-[120px]\">CO #</TableHead>\n                <TableHead>Description</TableHead>\n                <TableHead className=\"w-[120px]\">Status</TableHead>\n                <TableHead className=\"text-right w-[150px]\">Amount</TableHead>\n                <TableHead className=\"w-[50px]\"></TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {projectChangeOrders.map((co) => (\n                <TableRow key={co.id}>\n                  <TableCell className=\"font-medium\">{co.coNumber}</TableCell>\n                  <TableCell>{co.description}</TableCell>\n                  <TableCell>\n                    <Badge variant={statusVariant[co.status]}>{co.status}</Badge>\n                  </TableCell>\n                  <TableCell className=\"text-right\">\n                    {co.totalRequest.toLocaleString('en-US', {\n                      style: 'currency',\n                      currency: 'USD',\n                    })}\n                  </TableCell>\n                  <TableCell>\n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild>\n                        <Button aria-haspopup=\"true\" size=\"icon\" variant=\"ghost\">\n                          <MoreHorizontal className=\"h-4 w-4\" />\n                          <span className=\"sr-only\">Toggle menu</span>\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align=\"end\">\n                        <DropdownMenuLabel>Actions</DropdownMenuLabel>\n                        <DropdownMenuItem>\n                          <FileText className=\"mr-2\" /> View Details\n                        </DropdownMenuItem>\n                        <DropdownMenuItem>Edit</DropdownMenuItem>\n                        <DropdownMenuItem>Delete</DropdownMenuItem>\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  </TableCell>\n                </TableRow>\n              ))}\n              {projectChangeOrders.length === 0 && (\n                <TableRow>\n                  <TableCell colSpan={5} className=\"text-center h-24\">\n                    No change orders for this project yet.\n                  </TableCell>\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n    </>\n  );\n}\n",
  "src/app/(app)/projects/[id]/(tabs)/expenses/page.tsx": "\n'use client';\n\nimport { useState, use, useContext, useRef, useMemo } from 'react';\nimport { Button } from '@/components/ui/button';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { MoreHorizontal, PlusCircle, ArrowUpDown, Upload, Trash2 } from 'lucide-react';\nimport { AddEditExpenseDialog } from '../../_components/add-edit-expense-dialog';\nimport { format, isValid } from 'date-fns';\nimport { AppStateContext } from '@/context/app-state-context';\nimport { useToast } from '@/hooks/use-toast';\nimport type { Expense } from '@/lib/types';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from \"@/components/ui/alert-dialog\";\nimport * as XLSX from 'xlsx';\nimport { Checkbox } from '@/components/ui/checkbox';\n\n\nexport default function ProjectExpensesPage({\n  params,\n}: {\n  params: { id: string };\n}) {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [selectedExpense, setSelectedExpense] = useState<Expense | null>(null);\n  const [selectedRowKeys, setSelectedRowKeys] = useState<string[]>([]);\n  const [sortConfig, setSortConfig] = useState<{ key: keyof Expense; direction: 'asc' | 'desc' } | null>({ key: 'date', direction: 'desc'});\n  const [categoryFilter, setCategoryFilter] = useState('all');\n  const [vendorFilter, setVendorFilter] = useState('all');\n  const appState = useContext(AppStateContext);\n  const { toast } = useToast();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  if (!appState) {\n    return <div>Loading...</div>;\n  }\n  const { expenses, budgetCategories, setExpenses } = appState;\n  const projectExpenses = expenses ? expenses.filter(\n    (exp) => exp.projectId === params.id\n  ) : [];\n\n  const uniqueVendors = useMemo(() => {\n    const vendorSet = new Set<string>();\n    projectExpenses.forEach(exp => {\n      if (exp.vendorName) {\n        vendorSet.add(exp.vendorName);\n      }\n    });\n    return Array.from(vendorSet).sort();\n  }, [projectExpenses]);\n\n  const sortedExpenses = useMemo(() => {\n    let sortableItems = [...projectExpenses];\n    \n    if (categoryFilter !== 'all') {\n      sortableItems = sortableItems.filter(exp => exp.category === categoryFilter);\n    }\n    if (vendorFilter !== 'all') {\n      sortableItems = sortableItems.filter(exp => exp.vendorName === vendorFilter);\n    }\n    \n    if (sortConfig !== null) {\n      sortableItems.sort((a, b) => {\n        const aValue = a[sortConfig.key];\n        const bValue = b[sortConfig.key];\n        if (aValue === undefined || bValue === undefined) return 0;\n        \n        if (aValue < bValue) {\n          return sortConfig.direction === 'asc' ? -1 : 1;\n        }\n        if (aValue > bValue) {\n          return sortConfig.direction === 'asc' ? 1 : -1;\n        }\n        return 0;\n      });\n    }\n    return sortableItems;\n  }, [projectExpenses, sortConfig, categoryFilter, vendorFilter]);\n\n  const requestSort = (key: keyof Expense) => {\n    let direction: 'asc' | 'desc' = 'asc';\n    if (sortConfig && sortConfig.key === key && sortConfig.direction === 'asc') {\n      direction = 'desc';\n    }\n    setSortConfig({ key, direction });\n  };\n\n\n  const handleNewExpense = () => {\n    setSelectedExpense(null);\n    setDialogOpen(true);\n  };\n\n  const handleEditExpense = (expense: Expense) => {\n    setSelectedExpense(expense);\n    setDialogOpen(true);\n  };\n\n  const handleDeleteExpense = (expenseId: string) => {\n    setExpenses(current => current.filter(exp => exp.id !== expenseId));\n    toast({\n        title: \"Expense Deleted\",\n        description: \"The expense has been successfully deleted.\",\n        variant: \"destructive\"\n    });\n  };\n\n  const handleDeleteSelected = () => {\n    setExpenses(current => current.filter(exp => !selectedRowKeys.includes(exp.id)));\n    toast({\n        title: `${selectedRowKeys.length} Expenses Deleted`,\n        description: \"The selected expenses have been successfully deleted.\",\n        variant: \"destructive\"\n    });\n    setSelectedRowKeys([]);\n  }\n\n  const handleSaveExpense = (expense: Expense) => {\n    if (selectedExpense && expense.id) {\n        // Edit\n        setExpenses(current => current.map(e => e.id === expense.id ? expense : e));\n    } else {\n        // Add\n        setExpenses(current => [{...expense, id: crypto.randomUUID()}, ...current]);\n    }\n  };\n\n  const handleImportClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file || !appState) return;\n\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      try {\n        const data = e.target?.result;\n        const workbook = XLSX.read(data, { type: 'array' });\n        const sheetName = workbook.SheetNames[0];\n        const worksheet = workbook.Sheets[sheetName];\n        // Convert to array of arrays, ignoring headers\n        const rows = XLSX.utils.sheet_to_json(worksheet, { header: 1 }) as any[][];\n\n        if (rows.length < 2) {\n            toast({\n                title: 'Import Warning',\n                description: 'The file is empty or only contains a header row.',\n                variant: 'destructive',\n            });\n            return;\n        }\n\n        const dataRows = rows.slice(1);\n        \n        const parseAmount = (value: any): number => {\n            if (typeof value === 'number') return value;\n            if (typeof value === 'string') {\n              const cleaned = value.replace(/[^0-9.-]+/g, '');\n              const num = parseFloat(cleaned);\n              return isNaN(num) ? 0 : num;\n            }\n            return 0;\n        };\n\n        const parseDate = (value: any): Date | null => {\n            if (!value) return null;\n            const date = new Date(value);\n            return isValid(date) ? date : null;\n        }\n\n        const newExpenses = dataRows.map((row): Expense | null => {\n            const date = parseDate(row[0]);\n            const amount = parseAmount(row[7]);\n            \n            if (!date || !amount) {\n                return null; // Skip invalid rows\n            }\n\n            return {\n                id: crypto.randomUUID(),\n                projectId: params.id,\n                date: format(date, 'yyyy-MM-dd'),\n                category: row[1] || 'Uncategorized',\n                vendorName: row[2] || '',\n                description: row[3] || 'N/A',\n                paymentMethod: row[4] || 'N/A',\n                paymentReference: row[5] || '',\n                invoiceNumber: row[6] || '',\n                amount: amount,\n            };\n        }).filter((item): item is Expense => item !== null);\n        \n        if (newExpenses.length > 0) {\n            setExpenses((current) => [...current, ...newExpenses]);\n            toast({\n                title: 'Import Successful',\n                description: `${newExpenses.length} expenses have been imported.`,\n            });\n        } else {\n            toast({\n                title: 'Import Warning',\n                description: `Could not import any valid expenses. Please check your file's format and column content.`,\n                variant: 'destructive',\n            });\n        }\n\n      } catch (error) {\n        console.error(\"Error importing expenses:\", error);\n        toast({\n            title: \"Import Failed\",\n            description: \"There was an error processing the file.\",\n            variant: \"destructive\",\n        });\n      }\n    };\n    reader.readAsArrayBuffer(file);\n\n    if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n    }\n  };\n\n\n  return (\n    <>\n      <input\n        type=\"file\"\n        ref={fileInputRef}\n        className=\"hidden\"\n        onChange={handleFileChange}\n        accept=\".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\"\n      />\n      <AddEditExpenseDialog\n        open={dialogOpen}\n        onOpenChange={setDialogOpen}\n        projectId={params.id}\n        expense={selectedExpense}\n        onSave={handleSaveExpense}\n      />\n      <Card>\n        <CardHeader>\n          <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n            <div>\n              <CardTitle className=\"text-2xl\">Daily Expenses</CardTitle>\n              <CardDescription>\n                Log and track daily expenses for this project.\n              </CardDescription>\n            </div>\n            <div className=\"flex items-center gap-2 w-full sm:w-auto flex-wrap\">\n              {selectedRowKeys.length > 0 ? (\n                 <AlertDialog>\n                    <AlertDialogTrigger asChild>\n                      <Button variant=\"destructive\">\n                        <Trash2 className=\"mr-2 h-4 w-4\" />\n                        Delete ({selectedRowKeys.length})\n                      </Button>\n                    </AlertDialogTrigger>\n                    <AlertDialogContent>\n                        <AlertDialogHeader>\n                            <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                            <AlertDialogDescription>\n                                This action cannot be undone. This will permanently delete {selectedRowKeys.length} expense(s).\n                            </AlertDialogDescription>\n                        </AlertDialogHeader>\n                        <AlertDialogFooter>\n                            <AlertDialogCancel>Cancel</AlertDialogCancel>\n                            <AlertDialogAction onClick={handleDeleteSelected} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\n                                Delete\n                            </AlertDialogAction>\n                        </AlertDialogFooter>\n                    </AlertDialogContent>\n                </AlertDialog>\n              ) : (\n                <>\n                   <Select value={categoryFilter} onValueChange={setCategoryFilter}>\n                    <SelectTrigger className=\"w-full sm:w-[180px]\">\n                      <SelectValue placeholder=\"All Categories\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">All Categories</SelectItem>\n                      {budgetCategories.map((category) => (\n                        <SelectItem key={category.id} value={category.name}>\n                          {category.name}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                   <Select value={vendorFilter} onValueChange={setVendorFilter}>\n                    <SelectTrigger className=\"w-full sm:w-[180px]\">\n                      <SelectValue placeholder=\"All Vendors\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">All Vendors</SelectItem>\n                      {uniqueVendors.map((vendor) => (\n                        <SelectItem key={vendor} value={vendor}>\n                          {vendor}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                  <Button variant=\"outline\" onClick={handleImportClick}>\n                      <Upload className=\"mr-2 h-4 w-4\" />\n                      Import\n                  </Button>\n                </>\n              )}\n              <Button\n                onClick={handleNewExpense}\n                className=\"w-full sm:w-auto\"\n              >\n                <PlusCircle className=\"mr-2 h-4 w-4\" /> Add Expense\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                 <TableHead className=\"w-[40px]\">\n                    <Checkbox\n                        checked={selectedRowKeys.length > 0 && sortedExpenses.length > 0 && selectedRowKeys.length === sortedExpenses.length}\n                        onCheckedChange={(checked) => {\n                            if (checked) {\n                                setSelectedRowKeys(sortedExpenses.map(exp => exp.id));\n                            } else {\n                                setSelectedRowKeys([]);\n                            }\n                        }}\n                        aria-label=\"Select all rows\"\n                    />\n                 </TableHead>\n                <TableHead>\n                  <Button variant=\"ghost\" onClick={() => requestSort('date')}>\n                    Date\n                    <ArrowUpDown className=\"ml-2 h-4 w-4\" />\n                  </Button>\n                </TableHead>\n                <TableHead>\n                  <Button variant=\"ghost\" onClick={() => requestSort('category')}>\n                    Category\n                    <ArrowUpDown className=\"ml-2 h-4 w-4\" />\n                  </Button>\n                </TableHead>\n                 <TableHead>\n                  <Button variant=\"ghost\" onClick={() => requestSort('vendorName')}>\n                    Vendor\n                    <ArrowUpDown className=\"ml-2 h-4 w-4\" />\n                  </Button>\n                </TableHead>\n                <TableHead>Description</TableHead>\n                <TableHead>Payment Method</TableHead>\n                <TableHead>Reference</TableHead>\n                <TableHead>Invoice #</TableHead>\n                <TableHead className=\"text-right\">\n                  <Button variant=\"ghost\" onClick={() => requestSort('amount')}>\n                    Amount\n                    <ArrowUpDown className=\"ml-2 h-4 w-4\" />\n                  </Button>\n                </TableHead>\n                <TableHead className=\"w-[50px]\"></TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {sortedExpenses.map((expense) => (\n                <TableRow key={expense.id} data-state={selectedRowKeys.includes(expense.id) && \"selected\"}>\n                  <TableCell>\n                      <Checkbox\n                          checked={selectedRowKeys.includes(expense.id)}\n                          onCheckedChange={(checked) => {\n                              if (checked) {\n                                  setSelectedRowKeys(prev => [...prev, expense.id]);\n                              } else {\n                                  setSelectedRowKeys(prev => prev.filter(id => id !== expense.id));\n                              }\n                          }}\n                          aria-label=\"Select row\"\n                      />\n                  </TableCell>\n                  <TableCell>\n                    {format(new Date(expense.date), 'PP')}\n                  </TableCell>\n                  <TableCell>{expense.category}</TableCell>\n                  <TableCell>{expense.vendorName}</TableCell>\n                  <TableCell>{expense.description}</TableCell>\n                  <TableCell>{expense.paymentMethod}</TableCell>\n                  <TableCell>{expense.paymentReference}</TableCell>\n                  <TableCell>{expense.invoiceNumber}</TableCell>\n                  <TableCell className=\"text-right\">\n                    {expense.amount.toLocaleString('en-US', {\n                      style: 'currency',\n                      currency: 'USD',\n                    })}\n                  </TableCell>\n                  <TableCell>\n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild>\n                        <Button aria-haspopup=\"true\" size=\"icon\" variant=\"ghost\">\n                          <MoreHorizontal className=\"h-4 w-4\" />\n                          <span className=\"sr-only\">Toggle menu</span>\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align=\"end\">\n                        <DropdownMenuLabel>Actions</DropdownMenuLabel>\n                        <DropdownMenuItem onClick={() => handleEditExpense(expense)}>Edit</DropdownMenuItem>\n                        <AlertDialog>\n                            <AlertDialogTrigger asChild>\n                                <DropdownMenuItem onSelect={(e) => e.preventDefault()} className=\"text-destructive\">Delete</DropdownMenuItem>\n                            </AlertDialogTrigger>\n                            <AlertDialogContent>\n                                <AlertDialogHeader>\n                                    <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                                    <AlertDialogDescription>\n                                        This action cannot be undone. This will permanently delete this expense.\n                                    </AlertDialogDescription>\n                                </AlertDialogHeader>\n                                <AlertDialogFooter>\n                                    <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                    <AlertDialogAction onClick={() => handleDeleteExpense(expense.id)} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\n                                        Delete\n                                    </AlertDialogAction>\n                                </AlertDialogFooter>\n                            </AlertDialogContent>\n                        </AlertDialog>\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n    </>\n  );\n}\n",
  "src/app/(app)/projects/[id]/(tabs)/milestones/page.tsx": "\n\n'use client';\n\nimport { useState, useContext } from 'react';\nimport { notFound } from 'next/navigation';\nimport { Button } from '@/components/ui/button';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { PlusCircle, MoreVertical, Flag } from 'lucide-react';\nimport { AppStateContext } from '@/context/app-state-context';\nimport type { Milestone } from '@/lib/types';\nimport { AddEditMilestoneDialog } from '../_components/add-edit-milestone-dialog';\nimport { Badge } from '@/components/ui/badge';\nimport { format, isPast } from 'date-fns';\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from '@/components/ui/dropdown-menu';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function ProjectMilestonesPage({\n  params,\n}: {\n  params: { id: string };\n}) {\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [selectedMilestone, setSelectedMilestone] = useState<Milestone | null>(null);\n  const { toast } = useToast();\n  const appState = useContext(AppStateContext);\n\n  if (!appState) {\n    return <div>Loading...</div>;\n  }\n  const { projects, milestones, setMilestones } = appState;\n  const project = projects.find((p) => p.id === params.id);\n  if (!project) {\n    notFound();\n  }\n\n  const projectMilestones = milestones.filter(\n    (m) => m.projectId === params.id\n  ).sort((a,b) => new Date(a.dueDate).getTime() - new Date(b.dueDate).getTime());\n\n  const handleNewMilestone = () => {\n    setSelectedMilestone(null);\n    setIsDialogOpen(true);\n  };\n\n  const handleEditMilestone = (milestone: Milestone) => {\n    setSelectedMilestone(milestone);\n    setIsDialogOpen(true);\n  };\n\n  const handleDeleteMilestone = (milestoneId: string) => {\n    setMilestones(prev => prev.filter(m => m.id !== milestoneId));\n    toast({\n      title: 'Milestone Deleted',\n      description: 'The milestone has been successfully removed.',\n      variant: 'destructive',\n    });\n  };\n\n  const handleSaveMilestone = (milestone: Milestone) => {\n    if (milestone.id) {\n        setMilestones(prev => prev.map(m => m.id === milestone.id ? milestone : m));\n    } else {\n        setMilestones(prev => [...prev, { ...milestone, id: crypto.randomUUID() }]);\n    }\n  };\n\n  const statusVariant: Record<Milestone['status'], 'default' | 'secondary' | 'outline'> = {\n    'Completed': 'default',\n    'In Progress': 'secondary',\n    'Upcoming': 'outline',\n  };\n\n  return (\n    <>\n      <AddEditMilestoneDialog\n        open={isDialogOpen}\n        onOpenChange={setIsDialogOpen}\n        milestone={selectedMilestone}\n        onSave={handleSaveMilestone}\n        projectId={params.id}\n      />\n      <Card>\n        <CardHeader>\n          <div className=\"flex justify-between items-center\">\n            <div>\n              <CardTitle className=\"text-2xl\">Project Milestones</CardTitle>\n              <CardDescription>\n                Track major project goals and deadlines.\n              </CardDescription>\n            </div>\n            <Button onClick={handleNewMilestone}>\n              <PlusCircle className=\"mr-2 h-4 w-4\" /> Add Milestone\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {projectMilestones.length === 0 ? (\n            <div className=\"text-center py-12 text-muted-foreground\">\n              <Flag className=\"mx-auto h-12 w-12\" />\n              <h3 className=\"mt-2 text-sm font-semibold\">No milestones yet</h3>\n              <p className=\"mt-1 text-sm\">\n                Get started by creating a new project milestone.\n              </p>\n              <Button className=\"mt-6\" onClick={handleNewMilestone}>\n                <PlusCircle className=\"mr-2 h-4 w-4\" /> Add Milestone\n              </Button>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {projectMilestones.map((milestone) => (\n                <Card key={milestone.id}>\n                  <CardContent className=\"p-4 flex items-start justify-between\">\n                    <div className=\"flex-1 space-y-2\">\n                      <div className=\"flex items-center gap-4\">\n                        <h3 className=\"font-semibold text-lg\">{milestone.name}</h3>\n                        <Badge variant={statusVariant[milestone.status]}>{milestone.status}</Badge>\n                      </div>\n                      <p className=\"text-sm text-muted-foreground\">{milestone.description}</p>\n                      <p className=\"text-sm\">\n                        <strong>Due:</strong> {format(new Date(milestone.dueDate), 'PPP')}\n                        {milestone.status !== 'Completed' && isPast(new Date(milestone.dueDate)) && (\n                            <span className=\"text-destructive font-medium ml-2\">(Overdue)</span>\n                        )}\n                      </p>\n                    </div>\n                    <DropdownMenu>\n                        <DropdownMenuTrigger asChild>\n                            <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\n                                <MoreVertical className=\"h-4 w-4\" />\n                            </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent>\n                            <DropdownMenuItem onClick={() => handleEditMilestone(milestone)}>Edit</DropdownMenuItem>\n                            <AlertDialog>\n                                <AlertDialogTrigger asChild>\n                                    <DropdownMenuItem onSelect={(e) => e.preventDefault()} className=\"text-destructive\">Delete</DropdownMenuItem>\n                                </AlertDialogTrigger>\n                                <AlertDialogContent>\n                                    <AlertDialogHeader>\n                                        <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                                        <AlertDialogDescription>\n                                            This will permanently delete the milestone \"{milestone.name}\".\n                                        </AlertDialogDescription>\n                                    </AlertDialogHeader>\n                                    <AlertDialogFooter>\n                                        <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                        <AlertDialogAction onClick={() => handleDeleteMilestone(milestone.id)} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">Delete</AlertDialogAction>\n                                    </AlertDialogFooter>\n                                </AlertDialogContent>\n                            </AlertDialog>\n                        </DropdownMenuContent>\n                    </DropdownMenu>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </>\n  );\n}\n",
  "src/app/(app)/projects/[id]/(tabs)/page.tsx": "\n'use client'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Label } from \"@/components/ui/label\";\nimport { Button } from \"@/components/ui/button\";\nimport React, { useState, useContext, useRef, useMemo } from \"react\";\nimport { Table, TableBody, TableCell, TableFooter, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuLabel, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { MoreHorizontal, PlusCircle, ArrowUpDown, Upload, Trash2 } from \"lucide-react\";\nimport { AddEditBudgetItemDialog } from \"../_components/add-edit-budget-item-dialog\";\nimport { AppStateContext } from \"@/context/app-state-context\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport * as XLSX from 'xlsx';\nimport type { BudgetItem } from \"@/lib/types\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from \"@/components/ui/alert-dialog\";\nimport { PasteBudgetDialog } from \"../_components/paste-budget-dialog\";\nimport { TransactionsDialog } from \"../_components/transactions-dialog\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useParams } from \"next/navigation\";\n\n\nexport default function ProjectBudgetPage() {\n    const params = useParams<{ id: string }>();\n    const appState = useContext(AppStateContext);\n    const { toast } = useToast();\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const [dialogOpen, setDialogOpen] = useState(false);\n    const [transactionsDialogOpen, setTransactionsDialogOpen] = useState(false);\n    const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n    const [pasteDialogOpen, setPasteDialogOpen] = useState(false);\n    const [selectedBudgetItem, setSelectedBudgetItem] = useState<BudgetItem | null>(null);\n    const [showGroupByCategory, setShowGroupByCategory] = useState(false);\n    const [selectedRowKeys, setSelectedRowKeys] = useState<string[]>([]);\n    const [categoryFilter, setCategoryFilter] = useState('all');\n    const [sortConfig, setSortConfig] = useState<{ key: string; direction: 'asc' | 'desc' } | null>({ key: 'notes', direction: 'asc'});\n\n    const project = appState?.projects.find(p => p.id === params.id);\n    \n    if (!appState || !project) {\n        return null;\n    }\n    \n    const { budgetItems, setBudgetItems, expenses, budgetCategories } = appState;\n    \n    const projectBudgetItems = useMemo(() => budgetItems.filter(item => item.projectId === project.id), [budgetItems, project.id]);\n    const projectExpenses = expenses.filter(expense => expense.projectId === project.id);\n\n    const groupedBudgetItems = useMemo(() => {\n        if (!showGroupByCategory) return null;\n        \n        const groups: { [key: string]: BudgetItem[] } = projectBudgetItems.reduce((acc, item) => {\n            (acc[item.category] = acc[item.category] || []).push(item);\n            return acc;\n        }, {} as { [key: string]: BudgetItem[] });\n\n        return Object.entries(groups).map(([category, items]) => {\n            const committedCost = projectExpenses\n                .filter(exp => exp.category === category)\n                .reduce((sum, exp) => sum + exp.amount, 0);\n\n            const originalBudget = items.reduce((sum, item) => sum + item.originalBudget, 0);\n            const approvedCOBudget = items.reduce((sum, item) => sum + item.approvedCOBudget, 0);\n            const projectedCost = items.reduce((sum, item) => sum + item.projectedCost, 0);\n\n            return {\n                category,\n                items,\n                subtotals: {\n                    originalBudget,\n                    approvedCOBudget,\n                    revisedBudget: originalBudget + approvedCOBudget,\n                    committedCost,\n                    projectedCost,\n                }\n            }\n        }).sort((a,b) => a.category.localeCompare(b.category));\n\n    }, [projectBudgetItems, showGroupByCategory, projectExpenses]);\n    \n    const handleImportClick = () => {\n        fileInputRef.current?.click();\n    };\n\n    const handleNewItem = () => {\n        setSelectedBudgetItem(null);\n        setDialogOpen(true);\n    };\n\n    const handleEditItem = (item: BudgetItem) => {\n        setSelectedBudgetItem(item);\n        setDialogOpen(true);\n    };\n\n    const handleDeleteItem = (itemId: string) => {\n        setBudgetItems(current => current.filter(item => item.id !== itemId));\n        toast({\n            title: \"Budget Item Deleted\",\n            description: \"The item has been removed from the budget.\",\n            variant: \"destructive\"\n        });\n    };\n\n    const handleDeleteSelected = () => {\n        setBudgetItems(current => current.filter(item => !selectedRowKeys.includes(item.id)));\n        toast({\n            title: `${selectedRowKeys.length} Budget Item(s) Deleted`,\n            description: \"The selected items have been removed from the budget.\",\n            variant: \"destructive\"\n        });\n        setSelectedRowKeys([]);\n    };\n\n    const handleSaveItem = (itemToSave: BudgetItem) => {\n        if (itemToSave.id) {\n            setBudgetItems(current => current.map(item => item.id === itemToSave.id ? itemToSave : item));\n        } else {\n            setBudgetItems(current => [{...itemToSave, id: crypto.randomUUID()}, ...current]);\n        }\n    };\n    \n    const handleTransactionsClick = (category: string) => {\n        setSelectedCategory(category);\n        setTransactionsDialogOpen(true);\n    };\n\n    const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const file = event.target.files?.[0];\n        if (file && appState) {\n            const reader = new FileReader();\n            reader.onload = (e) => {\n                try {\n                    const data = e.target?.result;\n                    const workbook = XLSX.read(data, { type: 'array' });\n                    const sheetName = workbook.SheetNames[0];\n                    const worksheet = workbook.Sheets[sheetName];\n                    const rows = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false }) as any[][];\n\n                    const importedItems = rows.map((row) => {\n                        if (!row || row.length < 4) return null;\n            \n                        const notes = row[0] ? String(row[0]).trim() : '';\n                        const category = row[1] ? String(row[1]).trim() : '';\n                        \n                        if (!notes || !category) {\n                            return null;\n                        }\n\n                        const parseAmount = (value: any): number => {\n                            if (value === null || value === undefined) return 0;\n                            if (typeof value === 'number') return value;\n                            if (typeof value === 'string') {\n                              const cleaned = value.replace(/[^0-9.]/g, '');\n                              const num = parseFloat(cleaned);\n                              return isNaN(num) ? 0 : num;\n                            }\n                            return 0;\n                        };\n            \n                        const originalBudget = parseAmount(row[3]);\n            \n                        let costType: 'labor' | 'material' | 'both' = 'both';\n                        const notesLower = notes.toLowerCase();\n                        if (notesLower.includes('labor')) {\n                            costType = 'labor';\n                        } else if (notesLower.includes('material')) {\n                            costType = 'material';\n                        }\n            \n                        return {\n                            id: crypto.randomUUID(),\n                            projectId: project.id,\n                            category: category,\n                            costType: costType,\n                            notes: notes,\n                            originalBudget: originalBudget,\n                            approvedCOBudget: 0,\n                            committedCost: 0,\n                            projectedCost: originalBudget,\n                        };\n                    }).filter((item): item is BudgetItem => item !== null);\n\n\n                    if (importedItems.length > 0) {\n                        appState.setBudgetItems(current => [...current, ...importedItems]);\n                        toast({\n                            title: \"Import Successful\",\n                            description: `${importedItems.length} budget items have been imported.`,\n                        });\n                    } else {\n                        toast({\n                            title: \"Import Warning\",\n                            description: \"No valid data found to import. Please ensure your file has data in the first column.\",\n                            variant: 'destructive'\n                        });\n                    }\n                } catch (error) {\n                    console.error(\"Error importing budget:\", error);\n                    toast({\n                        title: \"Import Failed\",\n                        description: \"There was an error processing the file. Please ensure it's a valid XLSX file.\",\n                        variant: \"destructive\",\n                    });\n                }\n            };\n            reader.readAsArrayBuffer(file);\n        }\n        if(fileInputRef.current) {\n            fileInputRef.current.value = \"\";\n        }\n    };\n    \n    const totals = useMemo(() => {\n        const committedCost = projectExpenses.reduce((sum, exp) => sum + exp.amount, 0);\n        const originalBudget = projectBudgetItems.reduce((sum, item) => sum + item.originalBudget, 0);\n        const approvedCOBudget = projectBudgetItems.reduce((sum, item) => sum + item.approvedCOBudget, 0);\n\n        return {\n            originalBudget,\n            approvedCOBudget,\n            revisedBudget: originalBudget + approvedCOBudget,\n            committedCost,\n            projectedCost: projectBudgetItems.reduce((sum, item) => sum + item.projectedCost, 0),\n        }\n    }, [projectBudgetItems, projectExpenses]);\n    \n\n    const filteredAndSortedItems = useMemo(() => {\n        let items = projectBudgetItems;\n        if (categoryFilter !== 'all') {\n            items = items.filter(item => item.category === categoryFilter);\n        }\n\n        if (sortConfig !== null) {\n            items.sort((a, b) => {\n                const aValue = a[sortConfig.key as keyof BudgetItem] as any;\n                const bValue = b[sortConfig.key as keyof BudgetItem] as any;\n                if (aValue < bValue) {\n                    return sortConfig.direction === 'asc' ? -1 : 1;\n                }\n                if (aValue > bValue) {\n                    return sortConfig.direction === 'asc' ? 1 : -1;\n                }\n                return 0;\n            });\n        }\n\n        return items;\n\n    }, [projectBudgetItems, categoryFilter, sortConfig]);\n\n    const requestSort = (key: keyof BudgetItem) => {\n        let direction: 'asc' | 'desc' = 'asc';\n        if (sortConfig && sortConfig.key === key && sortConfig.direction === 'asc') {\n            direction = 'desc';\n        }\n        setSortConfig({ key, direction });\n    };\n\n    return (\n        <>\n            <input\n                type=\"file\"\n                ref={fileInputRef}\n                className=\"hidden\"\n                onChange={handleFileChange}\n                accept=\".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\"\n            />\n            <AddEditBudgetItemDialog \n                open={dialogOpen} \n                onOpenChange={setDialogOpen}\n                projectId={project.id}\n                budgetItem={selectedBudgetItem}\n                onSave={handleSaveItem}\n            />\n             {selectedCategory && (\n                <TransactionsDialog\n                    open={transactionsDialogOpen}\n                    onOpenChange={setTransactionsDialogOpen}\n                    category={selectedCategory}\n                    expenses={projectExpenses.filter(exp => exp.category === selectedCategory)}\n                />\n            )}\n            <PasteBudgetDialog \n                open={pasteDialogOpen}\n                onOpenChange={setPasteDialogOpen}\n                projectId={project.id}\n            />\n            <Card>\n                <CardHeader>\n                    <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n                        <div>\n                            <CardTitle className=\"text-2xl\">Project Budget</CardTitle>\n                            <CardDescription>Detailed cost breakdown for {project.name}.</CardDescription>\n                        </div>\n                        <div className=\"flex items-center gap-2 w-full sm:w-auto\">\n                             {selectedRowKeys.length > 0 ? (\n                                <AlertDialog>\n                                    <AlertDialogTrigger asChild>\n                                    <Button variant=\"destructive\">\n                                        <Trash2 className=\"mr-2 h-4 w-4\" />\n                                        Delete ({selectedRowKeys.length})\n                                    </Button>\n                                    </AlertDialogTrigger>\n                                    <AlertDialogContent>\n                                        <AlertDialogHeader>\n                                            <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                                            <AlertDialogDescription>\n                                                This action cannot be undone. This will permanently delete {selectedRowKeys.length} budget item(s).\n                                            </AlertDialogDescription>\n                                        </AlertDialogHeader>\n                                        <AlertDialogFooter>\n                                            <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                            <AlertDialogAction onClick={handleDeleteSelected} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\n                                                Delete\n                                            </AlertDialogAction>\n                                        </AlertDialogFooter>\n                                    </AlertDialogContent>\n                                </AlertDialog>\n                            ) : (\n                                <>\n                                    <div className=\"flex items-center space-x-2\">\n                                        <Switch id=\"group-by-category\" checked={showGroupByCategory} onCheckedChange={setShowGroupByCategory}/>\n                                        <Label htmlFor=\"group-by-category\">Group by Category</Label>\n                                    </div>\n                                    <Select value={categoryFilter} onValueChange={setCategoryFilter}>\n                                        <SelectTrigger className=\"w-full sm:w-[180px]\">\n                                        <SelectValue placeholder=\"All Categories\" />\n                                        </SelectTrigger>\n                                        <SelectContent>\n                                        <SelectItem value=\"all\">All Categories</SelectItem>\n                                        {budgetCategories.sort((a,b) => a.name.localeCompare(b.name)).map((category) => (\n                                            <SelectItem key={category.id} value={category.name}>\n                                            {category.name}\n                                            </SelectItem>\n                                        ))}\n                                        </SelectContent>\n                                    </Select>\n                                    <Button variant=\"outline\" onClick={handleImportClick}>\n                                        <Upload className=\"mr-2 h-4 w-4\" />\n                                        Import\n                                    </Button>\n                                    <Button variant=\"outline\" onClick={() => setPasteDialogOpen(true)}>\n                                        Paste\n                                    </Button>\n                                </>\n                            )}\n                            <Button onClick={handleNewItem}>\n                                <PlusCircle className=\"mr-2 h-4 w-4\" />\n                                Add Item\n                            </Button>\n                        </div>\n                    </div>\n                </CardHeader>\n                <CardContent>\n                    {showGroupByCategory && groupedBudgetItems ? (\n                         <Table>\n                            <TableHeader>\n                                <TableRow>\n                                    <TableHead>Category</TableHead>\n                                    <TableHead className=\"text-right\">Original Budget</TableHead>\n                                    <TableHead className=\"text-right\">Approved COs</TableHead>\n                                    <TableHead className=\"text-right\">Revised Budget</TableHead>\n                                    <TableHead className=\"text-right\">Committed Cost</TableHead>\n                                    <TableHead className=\"text-right\">Projected Cost</TableHead>\n                                </TableRow>\n                            </TableHeader>\n                            <TableBody>\n                                {groupedBudgetItems.map(({ category, subtotals }) => (\n                                    <TableRow key={category} className=\"bg-secondary hover:bg-secondary/80 font-bold\">\n                                        <TableCell>{category}</TableCell>\n                                        <TableCell className=\"text-right\">${subtotals.originalBudget.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                        <TableCell className=\"text-right\">${subtotals.approvedCOBudget.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                        <TableCell className=\"text-right\">${subtotals.revisedBudget.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                        <TableCell className=\"text-right\">\n                                            <Button variant=\"link\" className=\"p-0 h-auto text-secondary-foreground\" onClick={() => handleTransactionsClick(category)}>\n                                                ${subtotals.committedCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\n                                            </Button>\n                                        </TableCell>\n                                        <TableCell className=\"text-right\">${subtotals.projectedCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                    </TableRow>\n                                ))}\n                            </TableBody>\n                            <TableFooter>\n                                <TableRow>\n                                    <TableCell className=\"font-bold\">Totals</TableCell>\n                                    <TableCell className=\"text-right font-bold\">${totals.originalBudget.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                    <TableCell className=\"text-right font-bold\">${totals.approvedCOBudget.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                    <TableCell className=\"text-right font-bold\">${totals.revisedBudget.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                    <TableCell className=\"text-right font-bold\">${totals.committedCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                    <TableCell className=\"text-right font-bold\">${totals.projectedCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                </TableRow>\n                            </TableFooter>\n                        </Table>\n                    ) : (\n                        <Table>\n                            <TableHeader>\n                                <TableRow>\n                                    <TableHead className=\"w-[40px]\">\n                                        <Checkbox\n                                            checked={selectedRowKeys.length > 0 && selectedRowKeys.length === filteredAndSortedItems.length}\n                                            onCheckedChange={(checked) => {\n                                                if (checked) {\n                                                    setSelectedRowKeys(filteredAndSortedItems.map(item => item.id));\n                                                } else {\n                                                    setSelectedRowKeys([]);\n                                                }\n                                            }}\n                                            aria-label=\"Select all rows\"\n                                        />\n                                    </TableHead>\n                                    <TableHead>\n                                        <Button variant=\"ghost\" onClick={() => requestSort('notes')}>\n                                            Notes\n                                            <ArrowUpDown className=\"ml-2 h-4 w-4\" />\n                                        </Button>\n                                    </TableHead>\n                                    <TableHead>Category</TableHead>\n                                    <TableHead>Cost Type</TableHead>\n                                    <TableHead className=\"text-right\">Original Budget</TableHead>\n                                    <TableHead className=\"text-right\">Approved COs</TableHead>\n                                    <TableHead className=\"text-right\">Revised Budget</TableHead>\n                                    <TableHead className=\"text-right\">Committed Cost</TableHead>\n                                    <TableHead className=\"text-right\">Projected Cost</TableHead>\n                                    <TableHead className=\"w-[50px]\"></TableHead>\n                                </TableRow>\n                            </TableHeader>\n                            <TableBody>\n                                {filteredAndSortedItems.map((item) => {\n                                    const revisedBudget = item.originalBudget + item.approvedCOBudget;\n                                    const committedCost = projectExpenses\n                                        .filter(exp => exp.category === item.category)\n                                        .reduce((sum, exp) => sum + exp.amount, 0);\n\n                                    return (\n                                        <TableRow key={item.id} data-state={selectedRowKeys.includes(item.id) && \"selected\"}>\n                                            <TableCell>\n                                                <Checkbox\n                                                    checked={selectedRowKeys.includes(item.id)}\n                                                    onCheckedChange={(checked) => {\n                                                        setSelectedRowKeys(prev => \n                                                            checked ? [...prev, item.id] : prev.filter(id => id !== item.id)\n                                                        );\n                                                    }}\n                                                    aria-label=\"Select row\"\n                                                />\n                                            </TableCell>\n                                            <TableCell className=\"font-medium\">{item.notes}</TableCell>\n                                            <TableCell>{item.category}</TableCell>\n                                            <TableCell className=\"capitalize\">{item.costType}</TableCell>\n                                            <TableCell className=\"text-right\">${item.originalBudget.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                            <TableCell className=\"text-right\">${item.approvedCOBudget.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                            <TableCell className=\"text-right font-semibold\">${revisedBudget.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                            <TableCell className=\"text-right\">\n                                                 <Button variant=\"link\" className=\"p-0 h-auto\" onClick={() => handleTransactionsClick(item.category)}>\n                                                    ${committedCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\n                                                </Button>\n                                            </TableCell>\n                                            <TableCell className=\"text-right\">${item.projectedCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                            <TableCell>\n                                                <DropdownMenu>\n                                                    <DropdownMenuTrigger asChild>\n                                                        <Button aria-haspopup=\"true\" size=\"icon\" variant=\"ghost\">\n                                                            <MoreHorizontal className=\"h-4 w-4\" />\n                                                            <span className=\"sr-only\">Toggle menu</span>\n                                                        </Button>\n                                                    </DropdownMenuTrigger>\n                                                    <DropdownMenuContent align=\"end\">\n                                                        <DropdownMenuLabel>Actions</DropdownMenuLabel>\n                                                        <DropdownMenuItem onClick={() => handleEditItem(item)}>Edit</DropdownMenuItem>\n                                                        <AlertDialog>\n                                                            <AlertDialogTrigger asChild>\n                                                                <DropdownMenuItem onSelect={(e) => e.preventDefault()} className=\"text-destructive\">Delete</DropdownMenuItem>\n                                                            </AlertDialogTrigger>\n                                                            <AlertDialogContent>\n                                                                <AlertDialogHeader>\n                                                                    <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                                                                    <AlertDialogDescription>\n                                                                        This action cannot be undone. This will permanently delete this budget item.\n                                                                    </AlertDialogDescription>\n                                                                </AlertDialogHeader>\n                                                                <AlertDialogFooter>\n                                                                    <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                                                    <AlertDialogAction onClick={() => handleDeleteItem(item.id)} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\n                                                                        Delete\n                                                                    </AlertDialogAction>\n                                                                </AlertDialogFooter>\n                                                            </AlertDialogContent>\n                                                        </AlertDialog>\n                                                    </DropdownMenuContent>\n                                                </DropdownMenu>\n                                            </TableCell>\n                                        </TableRow>\n                                    )\n                                })}\n                            </TableBody>\n                            <TableFooter>\n                                <TableRow>\n                                    <TableCell colSpan={4} className=\"font-bold\">Totals</TableCell>\n                                    <TableCell className=\"text-right font-bold\">${totals.originalBudget.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                    <TableCell className=\"text-right font-bold\">${totals.approvedCOBudget.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                    <TableCell className=\"text-right font-bold\">${totals.revisedBudget.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                    <TableCell className=\"text-right font-bold\">${totals.committedCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                    <TableCell className=\"text-right font-bold\">${totals.projectedCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</TableCell>\n                                    <TableCell></TableCell>\n                                </TableRow>\n                            </TableFooter>\n                        </Table>\n                    )}\n                </CardContent>\n            </Card>\n        </>\n    );\n    \n}\n",
  "src/app/(app)/projects/[id]/(tabs)/reports/page.tsx": "\n'use client';\n\nimport { useState, useContext, useMemo } from 'react';\nimport { notFound } from 'next/navigation';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { Progress } from '@/components/ui/progress';\nimport { Button } from '@/components/ui/button';\nimport { AppStateContext } from '@/context/app-state-context';\nimport { TransactionsDialog } from '../../_components/transactions-dialog';\nimport { cn } from '@/lib/utils';\n\nexport default function ProjectReportsPage({\n  params,\n}: {\n  params: { id: string };\n}) {\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  \n  const appState = useContext(AppStateContext);\n  \n  const project = appState?.projects.find((p) => p.id === params.id);\n\n  const projectBudgetItems = useMemo(() => \n    appState?.budgetItems.filter((item) => item.projectId === params.id) || [],\n    [appState?.budgetItems, params.id]\n  );\n  \n  const projectExpenses = useMemo(() =>\n    appState?.expenses.filter((expense) => expense.projectId === params.id) || [],\n    [appState?.expenses, params.id]\n  );\n\n  if (!project || !appState) {\n    notFound();\n  }\n\n  const getExpensesForCategory = (category: string) => {\n    return projectExpenses.filter((expense) => expense.category === category);\n  };\n\n  const handleTransactionsClick = (category: string) => {\n    setSelectedCategory(category);\n    setIsDialogOpen(true);\n  };\n  \n  const categoryColors = [\n    'bg-blue-500',\n    'bg-green-500',\n    'bg-orange-500',\n    'bg-purple-500',\n    'bg-red-500',\n    'bg-yellow-500',\n    'bg-indigo-500',\n    'bg-pink-500',\n  ];\n\n  const categorySpending = useMemo(() => {\n    const spendingMap: {[key: string]: {budget: number, spent: number}} = {};\n\n    projectBudgetItems.forEach(item => {\n        if (!spendingMap[item.category]) {\n            spendingMap[item.category] = { budget: 0, spent: 0 };\n        }\n        spendingMap[item.category].budget += item.originalBudget + item.approvedCOBudget;\n    });\n\n    projectExpenses.forEach(expense => {\n        if (!spendingMap[expense.category]) {\n            spendingMap[expense.category] = { budget: 0, spent: 0 };\n        }\n        spendingMap[expense.category].spent += expense.amount;\n    });\n\n    return Object.entries(spendingMap).map(([category, { budget, spent }]) => {\n        let progress = 0;\n        if (budget > 0) {\n            progress = (spent / budget) * 100;\n        } else if (spent > 0) {\n            progress = 100; // Over budget\n        }\n\n        return {\n            category,\n            budget,\n            spent,\n            balance: budget - spent,\n            progress,\n            isOverBudget: budget === 0 && spent > 0,\n            transactions: getExpensesForCategory(category)\n        }\n    }).sort((a, b) => b.spent - a.spent);\n\n  }, [projectBudgetItems, projectExpenses]);\n\n\n  return (\n    <>\n      <Card>\n        <CardHeader>\n          <div className=\"flex flex-col md:flex-row justify-between md:items-center gap-4\">\n            <div>\n              <CardTitle>Top Spending Categories</CardTitle>\n              <CardDescription>\n                A summary of spending by budget category for this project.\n              </CardDescription>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Category</TableHead>\n                <TableHead className=\"text-right\">Budget</TableHead>\n                <TableHead className=\"text-right\">Spent</TableHead>\n                <TableHead className=\"text-right\">Balance</TableHead>\n                <TableHead className=\"w-[150px]\">Progress Chart</TableHead>\n                <TableHead className=\"text-center w-[120px]\">Transactions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {categorySpending.map((item, index) => (\n                  <TableRow key={item.category}>\n                    <TableCell>\n                      <div className=\"flex items-center gap-3\">\n                         <span className={cn(\"h-2.5 w-2.5 rounded-full\", categoryColors[index % categoryColors.length])} />\n                        <span className=\"font-medium\">{item.category}</span>\n                      </div>\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      {item.budget.toLocaleString('en-US', {\n                        style: 'currency',\n                        currency: 'USD',\n                      })}\n                    </TableCell>\n                    <TableCell className=\"text-right text-red-600\">\n                      {item.spent.toLocaleString('en-US', {\n                        style: 'currency',\n                        currency: 'USD',\n                      })}\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      {item.balance.toLocaleString('en-US', {\n                        style: 'currency',\n                        currency: 'USD',\n                      })}\n                    </TableCell>\n                    <TableCell>\n                      <div className='flex items-center gap-2'>\n                        <Progress value={item.progress} className={cn(\"h-2\", item.isOverBudget && \"[&>div]:bg-red-600\")} />\n                        <span className='text-xs text-muted-foreground'>{item.progress > 0 ? item.progress.toFixed(1) : '0.0'}%</span>\n                      </div>\n                    </TableCell>\n                    <TableCell className=\"text-center\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleTransactionsClick(item.category)}\n                        disabled={item.transactions.length === 0}\n                      >\n                        {item.transactions.length} items\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                ))}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n      {selectedCategory && (\n        <TransactionsDialog\n          open={isDialogOpen}\n          onOpenChange={setIsDialogOpen}\n          category={selectedCategory}\n          expenses={getExpensesForCategory(selectedCategory)}\n        />\n      )}\n    </>\n  );\n}\n",
  "src/app/(app)/projects/[id]/(tabs)/rfis/page.tsx": "\n'use client';\n\nimport { useState, useContext } from 'react';\nimport { Button } from '@/components/ui/button';\nimport {\n  MoreHorizontal,\n  PlusCircle,\n  FileQuestion,\n  MessageSquare,\n} from 'lucide-react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { notFound } from 'next/navigation';\nimport { AddRfiDialog } from '../../_components/add-rfi-dialog';\nimport { format } from 'date-fns';\nimport type { RFI } from '@/lib/types';\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from '@/components/ui/accordion';\nimport { AppStateContext } from '@/context/app-state-context';\n\nexport default function ProjectRFIsPage({ params }: { params: { id: string } }) {\n  const [isAddRfiOpen, setIsAddRfiOpen] = useState(false);\n  const appState = useContext(AppStateContext);\n\n  if (!appState) {\n    return <div>Loading...</div>\n  }\n  const { projects, rfis } = appState;\n\n  const project = projects.find((p) => p.id === params.id);\n  if (!project) {\n    notFound();\n  }\n  const projectRFIs = rfis.filter((rfi) => rfi.projectId === params.id);\n\n  const statusVariant: Record<RFI['status'], 'default' | 'secondary'> = {\n    Open: 'default',\n    Closed: 'secondary',\n  };\n\n  return (\n    <>\n      <AddRfiDialog open={isAddRfiOpen} onOpenChange={setIsAddRfiOpen} />\n      <Card>\n        <CardHeader>\n          <div className=\"flex justify-between items-center\">\n            <div>\n              <CardTitle className=\"text-2xl\">Requests for Information</CardTitle>\n              <CardDescription>\n                Manage all RFIs for this project.\n              </CardDescription>\n            </div>\n            <Button onClick={() => setIsAddRfiOpen(true)}>\n              <PlusCircle className=\"mr-2 h-4 w-4\" /> Add RFI\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"hidden md:block\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead className=\"w-[120px]\">RFI #</TableHead>\n                  <TableHead>Subject</TableHead>\n                  <TableHead className=\"w-[120px]\">Date</TableHead>\n                  <TableHead className=\"w-[120px]\">Status</TableHead>\n                  <TableHead className=\"w-[100px]\">Actions</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {projectRFIs.map((rfi) => (\n                  <TableRow key={rfi.id}>\n                    <TableCell className=\"font-medium\">{rfi.rfiNumber}</TableCell>\n                    <TableCell>{rfi.subject}</TableCell>\n                    <TableCell>{format(new Date(rfi.dateSubmitted), 'PP')}</TableCell>\n                    <TableCell>\n                      <Badge variant={statusVariant[rfi.status]}>\n                        {rfi.status}\n                      </Badge>\n                    </TableCell>\n                    <TableCell>\n                      <DropdownMenu>\n                        <DropdownMenuTrigger asChild>\n                          <Button\n                            aria-haspopup=\"true\"\n                            size=\"icon\"\n                            variant=\"ghost\"\n                          >\n                            <MoreHorizontal className=\"h-4 w-4\" />\n                            <span className=\"sr-only\">Toggle menu</span>\n                          </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align=\"end\">\n                          <DropdownMenuLabel>Actions</DropdownMenuLabel>\n                          <DropdownMenuItem>View Details</DropdownMenuItem>\n                          <DropdownMenuItem>Respond</DropdownMenuItem>\n                          <DropdownMenuItem>Delete</DropdownMenuItem>\n                        </DropdownMenuContent>\n                      </DropdownMenu>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n\n          <div className=\"md:hidden\">\n            <Accordion type=\"single\" collapsible className=\"w-full\">\n              {projectRFIs.map((rfi) => (\n                <AccordionItem value={rfi.id} key={rfi.id}>\n                  <AccordionTrigger>\n                    <div className=\"flex flex-col items-start text-left\">\n                      <span className=\"font-semibold\">{rfi.rfiNumber}</span>\n                      <span className=\"text-sm text-muted-foreground\">{rfi.subject}</span>\n                    </div>\n                  </AccordionTrigger>\n                  <AccordionContent>\n                    <div className=\"space-y-3 px-1\">\n                      <div className='flex justify-between items-center'>\n                        <span className=\"text-sm font-medium\">Status</span>\n                         <Badge variant={statusVariant[rfi.status]}>\n                          {rfi.status}\n                        </Badge>\n                      </div>\n                       <div className='flex justify-between items-center'>\n                        <span className=\"text-sm font-medium\">Date Submitted</span>\n                        <span className=\"text-sm\">{format(new Date(rfi.dateSubmitted), 'PP')}</span>\n                      </div>\n                      <div className=\"border-t pt-3\">\n                        <p className='font-semibold'>Question:</p>\n                        <p className=\"text-sm text-muted-foreground\">{rfi.question}</p>\n                      </div>\n                      {rfi.answer && (\n                         <div className=\"border-t pt-3\">\n                          <p className='font-semibold'>Answer:</p>\n                          <p className=\"text-sm text-muted-foreground\">{rfi.answer}</p>\n                        </div>\n                      )}\n                      <Button className='w-full' variant='outline'>\n                        <MessageSquare className='mr-2' /> Respond\n                      </Button>\n                    </div>\n                  </AccordionContent>\n                </AccordionItem>\n              ))}\n            </Accordion>\n          </div>\n\n          {projectRFIs.length === 0 && (\n            <div className=\"text-center py-12 text-muted-foreground\">\n              <FileQuestion className=\"mx-auto h-12 w-12\" />\n              <h3 className=\"mt-2 text-sm font-semibold\">No RFIs yet</h3>\n              <p className=\"mt-1 text-sm\">\n                Get started by creating a new Request for Information.\n              </p>\n              <Button className=\"mt-6\" onClick={() => setIsAddRfiOpen(true)}>\n                <PlusCircle className=\"mr-2 h-4 w-4\" /> Add RFI\n              </Button>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </>\n  );\n}\n",
  "src/app/(app)/projects/[id]/(tabs)/schedule/page.tsx": "\n'use client';\n\nimport { useState, useContext } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { MoreHorizontal, PlusCircle, Calendar as CalendarIcon } from 'lucide-react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { notFound } from 'next/navigation';\nimport { AddScheduleItemDialog } from '../../_components/add-schedule-item-dialog';\nimport { format } from 'date-fns';\nimport type { Task } from '@/lib/types';\nimport { AppStateContext } from '@/context/app-state-context';\n\n\nexport default function ProjectSchedulePage({\n  params,\n}: {\n  params: { id: string };\n}) {\n  const [isAddItemOpen, setIsAddItemOpen] = useState(false);\n  const appState = useContext(AppStateContext);\n  \n  if (!appState) {\n    return <div>Loading...</div>;\n  }\n\n  const { projects, tasks, teamMembers } = appState;\n  \n  const project = projects.find((p) => p.id === params.id);\n  if (!project) {\n    notFound();\n  }\n\n  const projectTasks = tasks.filter((t) => t.projectId === params.id);\n  \n  const statusVariant: Record<Task['status'], 'default' | 'secondary' | 'outline'> = {\n    'In Progress': 'default',\n    'To Do': 'secondary',\n    'Done': 'outline',\n  };\n\n  return (\n    <>\n      <AddScheduleItemDialog\n        open={isAddItemOpen}\n        onOpenChange={setIsAddItemOpen}\n      />\n      <Card>\n        <CardHeader>\n          <div className=\"flex justify-between items-center\">\n            <div>\n              <CardTitle className=\"text-2xl\">Project Schedule</CardTitle>\n              <CardDescription>\n                View and manage the project timeline and tasks.\n              </CardDescription>\n            </div>\n            <Button onClick={() => setIsAddItemOpen(true)}>\n              <PlusCircle className=\"mr-2 h-4 w-4\" /> Add Schedule Item\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Task</TableHead>\n                <TableHead>Assignee</TableHead>\n                <TableHead>Status</TableHead>\n                <TableHead>Priority</TableHead>\n                <TableHead className=\"text-right\">Due Date</TableHead>\n                <TableHead className=\"w-[50px]\"></TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {projectTasks.map((task) => (\n                <TableRow key={task.id}>\n                  <TableCell className=\"font-medium\">{task.title}</TableCell>\n                  <TableCell>{teamMembers.find(m => m.id === task.assigneeId)?.name || 'Unassigned'}</TableCell>\n                  <TableCell>\n                     <Badge variant={statusVariant[task.status]}>{task.status}</Badge>\n                  </TableCell>\n                  <TableCell>{task.priority}</TableCell>\n                  <TableCell className=\"text-right\">{format(new Date(task.dueDate), 'PP')}</TableCell>\n                  <TableCell>\n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild>\n                        <Button aria-haspopup=\"true\" size=\"icon\" variant=\"ghost\">\n                          <MoreHorizontal className=\"h-4 w-4\" />\n                          <span className=\"sr-only\">Toggle menu</span>\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align=\"end\">\n                        <DropdownMenuLabel>Actions</DropdownMenuLabel>\n                        <DropdownMenuItem>Edit</DropdownMenuItem>\n                        <DropdownMenuItem>Delete</DropdownMenuItem>\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n           {projectTasks.length === 0 && (\n              <div className=\"text-center py-12 text-muted-foreground\">\n                <CalendarIcon className=\"mx-auto h-12 w-12\" />\n                <h3 className=\"mt-2 text-sm font-semibold\">No schedule items yet</h3>\n                <p className=\"mt-1 text-sm\">Get started by adding a new schedule item.</p>\n                 <Button className=\"mt-6\" onClick={() => setIsAddItemOpen(true)}>\n                  <PlusCircle className=\"mr-2 h-4 w-4\" /> Add Schedule Item\n                </Button>\n              </div>\n            )}\n        </CardContent>\n      </Card>\n    </>\n  );\n}\n",
  "src/app/(app)/projects/[id]/_components/add-change-order-dialog.tsx": "'use client';\n\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { useToast } from '@/hooks/use-toast';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { cn } from '@/lib/utils';\nimport { CalendarIcon } from 'lucide-react';\nimport { Calendar } from '@/components/ui/calendar';\nimport { format } from 'date-fns';\nimport { vendors } from '@/lib/data';\n\nconst formSchema = z.object({\n  coNumber: z.string().min(1, 'Change Order number is required.'),\n  dateInitiated: z.date({ required_error: 'Please select a date.' }),\n  description: z.string().min(10, 'Description must be at least 10 characters.'),\n  status: z.enum(['Submitted', 'Approved', 'Executed', 'Rejected']),\n  amount: z.coerce.number(),\n  reason: z.string().optional(),\n  vendorId: z.string().optional(),\n  scheduleImpact: z.string().optional(),\n});\n\ntype AddChangeOrderFormValues = z.infer<typeof formSchema>;\n\nexport function AddChangeOrderDialog({\n  open,\n  onOpenChange,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}) {\n  const { toast } = useToast();\n  const form = useForm<AddChangeOrderFormValues>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      status: 'Submitted',\n    },\n  });\n\n  const onSubmit = (data: AddChangeOrderFormValues) => {\n    console.log('New change order:', data);\n    toast({\n      title: 'Change Order Added',\n      description: `Successfully added Change Order ${data.coNumber}.`,\n    });\n    onOpenChange(false);\n    form.reset();\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle>Add Change Order</DialogTitle>\n          <DialogDescription>\n            Create a new change order for this project.\n          </DialogDescription>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4 max-h-[70vh] overflow-y-auto pr-6 pl-1\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"coNumber\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Change Order #</FormLabel>\n                    <FormControl>\n                      <Input placeholder=\"e.g., CO-003\" {...field} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n               <FormField\n                control={form.control}\n                name=\"dateInitiated\"\n                render={({ field }) => (\n                  <FormItem className=\"flex flex-col\">\n                    <FormLabel>Date Initiated</FormLabel>\n                    <Popover>\n                      <PopoverTrigger asChild>\n                        <FormControl>\n                          <Button\n                            variant={'outline'}\n                            className={cn(\n                              'w-full pl-3 text-left font-normal',\n                              !field.value && 'text-muted-foreground'\n                            )}\n                          >\n                            {field.value ? (\n                              format(field.value, 'PPP')\n                            ) : (\n                              <span>Pick a date</span>\n                            )}\n                            <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\n                          </Button>\n                        </FormControl>\n                      </PopoverTrigger>\n                      <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                        <Calendar\n                          mode=\"single\"\n                          selected={field.value}\n                          onSelect={field.onChange}\n                          initialFocus\n                        />\n                      </PopoverContent>\n                    </Popover>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"description\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Description</FormLabel>\n                  <FormControl>\n                    <Textarea placeholder=\"Provide a detailed description of the change.\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"status\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Status</FormLabel>\n                      <Select onValueChange={field.onChange} defaultValue={field.value}>\n                        <FormControl>\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Select a status\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"Submitted\">Submitted</SelectItem>\n                          <SelectItem value=\"Approved\">Approved</SelectItem>\n                          <SelectItem value=\"Executed\">Executed</SelectItem>\n                          <SelectItem value=\"Rejected\">Rejected</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                 <FormField\n                  control={form.control}\n                  name=\"amount\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Amount</FormLabel>\n                      <FormControl>\n                        <Input type=\"number\" placeholder=\"0.00\" {...field} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n            </div>\n            \n            <FormField\n                control={form.control}\n                name=\"vendorId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Vendor (Optional)</FormLabel>\n                    <Select onValueChange={field.onChange} defaultValue={field.value}>\n                      <FormControl>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select a vendor associated with this change\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                         {vendors.sort((a,b) => a.name.localeCompare(b.name)).map(vendor => (\n                            <SelectItem key={vendor.id} value={vendor.id}>\n                                {vendor.name} ({vendor.trade})\n                            </SelectItem>\n                         ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n            <FormField\n              control={form.control}\n              name=\"reason\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Reason for Change (Optional)</FormLabel>\n                  <FormControl>\n                    <Textarea placeholder=\"Explain why this change is necessary (e.g., owner request, unforeseen condition).\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            \n             <FormField\n                control={form.control}\n                name=\"scheduleImpact\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Schedule Impact (Optional)</FormLabel>\n                    <FormControl>\n                      <Input placeholder=\"e.g., Adds 5 days to schedule\" {...field} />\n                    </FormControl>\n                    <FormDescription>Describe the impact this change will have on the project schedule.</FormDescription>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n            <DialogFooter className=\"pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                onClick={() => onOpenChange(false)}\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\">Create Change Order</Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
  "src/app/(app)/projects/[id]/_components/add-drawing-dialog.tsx": "'use client';\n\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { useToast } from '@/hooks/use-toast';\nimport { Upload } from 'lucide-react';\n\nconst formSchema = z.object({\n  drawingFile: z.any().refine((files) => files?.length == 1, 'Drawing file is required.'),\n  sheetNumber: z.string().min(1, 'Sheet number is required.'),\n  drawingTitle: z.string().min(1, 'Drawing title is required.'),\n  versionDescription: z.string().optional(),\n});\n\ntype AddDrawingFormValues = z.infer<typeof formSchema>;\n\nexport function AddDrawingDialog({\n  open,\n  onOpenChange,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}) {\n  const { toast } = useToast();\n  const form = useForm<AddDrawingFormValues>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      versionDescription: '',\n    },\n  });\n\n  const onSubmit = (data: AddDrawingFormValues) => {\n    console.log('New drawing:', data);\n    toast({\n      title: 'Drawing Uploaded',\n      description: `Successfully uploaded sheet ${data.sheetNumber}.`,\n    });\n    onOpenChange(false);\n    form.reset();\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Upload New Drawing</DialogTitle>\n          <DialogDescription>\n            Fill out the form below to upload a new drawing to the project.\n          </DialogDescription>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"drawingFile\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Drawing File</FormLabel>\n                  <FormControl>\n                    <div className=\"flex items-center gap-4\">\n                        <div className=\"flex h-24 w-24 items-center justify-center rounded-md border border-dashed bg-secondary\">\n                            <Upload className=\"h-8 w-8 text-muted-foreground\" />\n                        </div>\n                        <div className='flex-1'>\n                             <Input \n                                type=\"file\" \n                                accept=\"application/pdf,image/*\" \n                                onChange={(e) => field.onChange(e.target.files)}\n                                className='w-full'\n                             />\n                             <p className='text-xs text-muted-foreground mt-1'>Select a PDF or image file. The system will attempt to name it.</p>\n                        </div>\n                    </div>\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <FormField\n              control={form.control}\n              name=\"sheetNumber\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Sheet Number</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., A-101\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <FormField\n              control={form.control}\n              name=\"drawingTitle\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Drawing Title</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., First Floor Plan\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <FormField\n              control={form.control}\n              name=\"versionDescription\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Version Description (Optional)</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      placeholder=\"e.g., Issued for Construction\"\n                      {...field}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <DialogFooter className=\"pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                onClick={() => onOpenChange(false)}\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\">Upload Drawing</Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
  "src/app/(app)/projects/[id]/_components/add-edit-budget-item-dialog.tsx": "\n'use client';\n\nimport { useEffect, useContext } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { useToast } from '@/hooks/use-toast';\nimport { AppStateContext } from '@/context/app-state-context';\nimport type { BudgetItem } from '@/lib/types';\n\nconst formSchema = z.object({\n  category: z.string({ required_error: 'Please select a category.' }),\n  costType: z.enum(['labor', 'material', 'both']),\n  notes: z.string().optional(),\n  originalBudget: z.coerce.number().min(0, 'Budget must be a positive number.'),\n  approvedCOBudget: z.coerce.number().min(0, 'CO Budget must be a positive number.'),\n  committedCost: z.coerce.number().min(0, 'Committed Cost must be a positive number.'),\n});\n\ntype FormValues = z.infer<typeof formSchema>;\n\nexport function AddEditBudgetItemDialog({\n  open,\n  onOpenChange,\n  projectId,\n  budgetItem,\n  onSave,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  projectId: string;\n  budgetItem: BudgetItem | null;\n  onSave: (item: BudgetItem) => void;\n}) {\n  const { toast } = useToast();\n  const appState = useContext(AppStateContext);\n  const form = useForm<FormValues>({\n    resolver: zodResolver(formSchema),\n  });\n\n  useEffect(() => {\n    if (open) {\n        if (budgetItem) {\n            form.reset({\n                category: budgetItem.category,\n                costType: budgetItem.costType,\n                notes: budgetItem.notes || '',\n                originalBudget: budgetItem.originalBudget,\n                approvedCOBudget: budgetItem.approvedCOBudget,\n                committedCost: budgetItem.committedCost,\n            });\n        } else {\n            form.reset({\n                notes: '',\n                costType: 'material',\n                originalBudget: 0,\n                approvedCOBudget: 0,\n                committedCost: 0,\n                category: undefined,\n            });\n        }\n    }\n  }, [budgetItem, open, form]);\n\n  const onSubmit = (data: FormValues) => {\n    if (!appState) return;\n\n    const itemToSave: BudgetItem = {\n        id: budgetItem?.id || '',\n        projectId,\n        category: data.category,\n        costType: data.costType,\n        notes: data.notes,\n        originalBudget: data.originalBudget,\n        approvedCOBudget: data.approvedCOBudget,\n        committedCost: data.committedCost,\n        projectedCost: data.originalBudget + data.approvedCOBudget,\n    };\n    \n    onSave(itemToSave);\n\n    toast({\n      title: `Budget Item ${budgetItem ? 'Updated' : 'Added'}`,\n      description: `Successfully ${budgetItem ? 'updated' : 'added'} ${data.category} to the budget.`,\n    });\n    onOpenChange(false);\n  };\n\n  if (!appState) return null;\n  const isEditing = !!budgetItem;\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>{isEditing ? 'Edit' : 'Add'} Budget Item</DialogTitle>\n          <DialogDescription>\n            {isEditing ? 'Update the details for this budget item.' : 'Add a new line item to your project budget.'}\n          </DialogDescription>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4 max-h-[70vh] overflow-y-auto pr-4\">\n            <FormField\n              control={form.control}\n              name=\"category\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Category</FormLabel>\n                  <Select\n                    onValueChange={field.onChange}\n                    value={field.value}\n                  >\n                    <FormControl>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select a budget category\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      {appState.budgetCategories\n                        .sort((a, b) => a.name.localeCompare(b.name))\n                        .map((category) => (\n                          <SelectItem key={category.id} value={category.name}>\n                            {category.name}\n                          </SelectItem>\n                        ))}\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <FormField\n              control={form.control}\n              name=\"costType\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Cost Type</FormLabel>\n                  <Select\n                    onValueChange={field.onChange}\n                    value={field.value}\n                  >\n                    <FormControl>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select a cost type\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"labor\">Labor</SelectItem>\n                      <SelectItem value=\"material\">Material</SelectItem>\n                      <SelectItem value=\"both\">Both</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <FormField\n              control={form.control}\n              name=\"notes\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Notes</FormLabel>\n                  <FormControl>\n                    <Textarea placeholder=\"Add any relevant notes\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <FormField\n              control={form.control}\n              name=\"originalBudget\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Original Budget</FormLabel>\n                  <FormControl>\n                    <Input type=\"number\" placeholder=\"0.00\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n             <FormField\n              control={form.control}\n              name=\"approvedCOBudget\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Approved CO Budget</FormLabel>\n                  <FormControl>\n                    <Input type=\"number\" placeholder=\"0.00\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n             <FormField\n              control={form.control}\n              name=\"committedCost\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Committed Cost</FormLabel>\n                  <FormControl>\n                    <Input type=\"number\" placeholder=\"0.00\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <DialogFooter>\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                onClick={() => onOpenChange(false)}\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\">Save</Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
  "src/app/(app)/projects/[id]/_components/add-edit-expense-dialog.tsx": "\n'use client';\n\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { useToast } from '@/hooks/use-toast';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { cn } from '@/lib/utils';\nimport { CalendarIcon, Check, ChevronsUpDown } from 'lucide-react';\nimport { Calendar } from '@/components/ui/calendar';\nimport { format, isValid, parse } from 'date-fns';\nimport { useContext, useEffect, useMemo, useState } from 'react';\nimport { AppStateContext } from '@/context/app-state-context';\nimport type { Expense, Vendor } from '@/lib/types';\nimport { Command, CommandEmpty, CommandGroup, CommandInput, CommandItem, CommandList } from '@/components/ui/command';\n\nconst formSchema = z.object({\n  date: z.date({ required_error: 'Please select a date.' }),\n  category: z.string().min(1, 'Category is required.'),\n  vendor: z.string().optional(),\n  description: z.string().min(1, 'Description is required.'),\n  amount: z.coerce.number().min(0, 'Amount must be a positive number.'),\n  paymentMethod: z.string({ required_error: 'Please select a payment method.' }),\n  paymentReference: z.any().optional(),\n  invoiceNumber: z.string().optional(),\n});\n\ntype AddExpenseFormValues = z.infer<typeof formSchema>;\n\nconst tryParseDate = (dateString: string): Date | null => {\n    const formats = ['PPP', 'MM/dd/yyyy', 'MM-dd-yyyy', 'yyyy-MM-dd'];\n    for (const fmt of formats) {\n        const parsedDate = parse(dateString, fmt, new Date());\n        if (isValid(parsedDate)) {\n            return parsedDate;\n        }\n    }\n    return null;\n}\n\n\nexport function AddEditExpenseDialog({\n  open,\n  onOpenChange,\n  projectId,\n  expense,\n  onSave,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  projectId: string;\n  expense: Expense | null;\n  onSave: (expense: Expense) => void;\n}) {\n  const { toast } = useToast();\n  const appState = useContext(AppStateContext);\n  const [datePickerOpen, setDatePickerOpen] = useState(false);\n  const form = useForm<AddExpenseFormValues>({\n    resolver: zodResolver(formSchema),\n  });\n\n  const paymentMethod = form.watch('paymentMethod');\n  const isEditing = !!expense;\n\n  const [manualDate, setManualDate] = useState('');\n\n  useEffect(() => {\n    if (open) {\n      if (isEditing && expense) {\n        const expenseDate = new Date(expense.date);\n        form.reset({\n          date: expenseDate,\n          category: expense.category,\n          vendor: expense.vendorName,\n          description: expense.description,\n          amount: expense.amount,\n          paymentMethod: expense.paymentMethod,\n          paymentReference: expense.paymentReference,\n          invoiceNumber: expense.invoiceNumber,\n        });\n        setManualDate(format(expenseDate, \"PPP\"));\n      } else {\n        const newDate = new Date();\n        form.reset({\n            date: newDate,\n            description: '',\n            paymentReference: '',\n            invoiceNumber: '',\n            category: undefined,\n            vendor: undefined,\n            paymentMethod: undefined,\n            amount: 0,\n        });\n        setManualDate(format(newDate, \"PPP\"));\n      }\n    }\n  }, [expense, isEditing, open, form]);\n\n  useEffect(() => {\n    const subscription = form.watch((value, { name }) => {\n      if (name === 'date' && value.date && isValid(new Date(value.date))) {\n        setManualDate(format(new Date(value.date), 'PPP'));\n      }\n    });\n    return () => subscription.unsubscribe();\n  }, [form]);\n\n\n  const onSubmit = (data: AddExpenseFormValues) => {\n    if (!appState) return;\n    \n    const expenseToSave: Expense = {\n      id: expense?.id || '',\n      projectId,\n      date: format(data.date, 'yyyy-MM-dd'),\n      category: data.category || 'Uncategorized',\n      vendorName: data.vendor,\n      description: data.description,\n      amount: data.amount,\n      paymentMethod: data.paymentMethod,\n      paymentReference: data.paymentReference,\n      invoiceNumber: data.invoiceNumber,\n    };\n\n    onSave(expenseToSave);\n\n    toast({\n      title: `Expense ${isEditing ? 'Updated' : 'Added'}`,\n      description: `Successfully ${isEditing ? 'updated' : 'added'} expense for ${data.description}.`,\n    });\n    onOpenChange(false);\n  };\n\n  if (!appState) return null;\n  const { budgetCategories, vendors, setBudgetCategories, setVendors } = appState;\n\n  const uniqueBudgetCategories = useMemo(() => {\n    const categoryNames = new Set(budgetCategories.map(c => c.name));\n    return Array.from(categoryNames).sort();\n  }, [budgetCategories]);\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[480px]\">\n        <DialogHeader>\n          <DialogTitle>{isEditing ? 'Edit' : 'Add'} Expense</DialogTitle>\n          <DialogDescription>\n            {isEditing ? 'Update the details of this expense.' : 'Log a new expense for this project.'}\n          </DialogDescription>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4 max-h-[70vh] overflow-y-auto pr-6 pl-1\">\n            <FormField\n              control={form.control}\n              name=\"date\"\n              render={({ field }) => (\n                <FormItem className=\"flex flex-col\">\n                  <FormLabel>Date</FormLabel>\n                   <Popover open={datePickerOpen} onOpenChange={setDatePickerOpen}>\n                    <PopoverTrigger asChild>\n                      <FormControl>\n                        <div className=\"relative\">\n                           <Input\n                             value={manualDate}\n                             onChange={(e) => setManualDate(e.target.value)}\n                             onBlur={() => {\n                                const parsedDate = tryParseDate(manualDate);\n                                if (parsedDate) {\n                                  field.onChange(parsedDate);\n                                } else {\n                                  setManualDate(field.value ? format(field.value, \"PPP\") : \"\");\n                                }\n                             }}\n                             className=\"w-full pl-3 text-left font-normal\"\n                           />\n                           <CalendarIcon className=\"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 opacity-50\" />\n                        </div>\n                      </FormControl>\n                    </PopoverTrigger>\n                    <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                      <Calendar\n                        mode=\"single\"\n                        selected={field.value}\n                        onSelect={(date) => {\n                            if (date) {\n                                field.onChange(date);\n                                setManualDate(format(date, \"PPP\"));\n                            }\n                            setDatePickerOpen(false);\n                        }}\n                        disabled={(date) =>\n                          date > new Date() || date < new Date('1900-01-01')\n                        }\n                        initialFocus\n                      />\n                    </PopoverContent>\n                  </Popover>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <FormField\n              control={form.control}\n              name=\"category\"\n              render={({ field }) => (\n                <FormItem className=\"flex flex-col\">\n                  <FormLabel>Category</FormLabel>\n                  <Popover>\n                    <PopoverTrigger asChild>\n                      <FormControl>\n                        <Button\n                          variant=\"outline\"\n                          role=\"combobox\"\n                          className={cn(\n                            \"w-full justify-between\",\n                            !field.value && \"text-muted-foreground\"\n                          )}\n                        >\n                          {field.value\n                            ? uniqueBudgetCategories.find(\n                                (cat) => cat === field.value\n                              )\n                            : \"Select a budget category\"}\n                          <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n                        </Button>\n                      </FormControl>\n                    </PopoverTrigger>\n                    <PopoverContent className=\"w-[--radix-popover-trigger-width] p-0\">\n                      <Command>\n                        <CommandInput placeholder=\"Search category...\" />\n                        <CommandList>\n                        <CommandEmpty>\n                             <Button\n                                variant=\"ghost\"\n                                className=\"w-full justify-start\"\n                                onClick={() => {\n                                    const newCategoryName = form.getValues('category');\n                                    if(newCategoryName && !uniqueBudgetCategories.includes(newCategoryName)) {\n                                        setBudgetCategories(prev => [...prev, {id: crypto.randomUUID(), name: newCategoryName}]);\n                                        field.onChange(newCategoryName);\n                                    }\n                                }}\n                                >\n                                Create \"{form.getValues('category')}\"\n                            </Button>\n                        </CommandEmpty>\n                        <CommandGroup>\n                          {uniqueBudgetCategories.map((category) => (\n                            <CommandItem\n                              value={category}\n                              key={category}\n                              onSelect={() => {\n                                form.setValue(\"category\", category)\n                              }}\n                            >\n                              <Check\n                                className={cn(\n                                  \"mr-2 h-4 w-4\",\n                                  category === field.value\n                                    ? \"opacity-100\"\n                                    : \"opacity-0\"\n                                )}\n                              />\n                              {category}\n                            </CommandItem>\n                          ))}\n                        </CommandGroup>\n                        </CommandList>\n                      </Command>\n                    </PopoverContent>\n                  </Popover>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <FormField\n              control={form.control}\n              name=\"vendor\"\n              render={({ field }) => (\n                <FormItem className=\"flex flex-col\">\n                  <FormLabel>Vendor (Optional)</FormLabel>\n                   <Popover>\n                    <PopoverTrigger asChild>\n                      <FormControl>\n                        <Button\n                          variant=\"outline\"\n                          role=\"combobox\"\n                          className={cn(\n                            \"w-full justify-between\",\n                            !field.value && \"text-muted-foreground\"\n                          )}\n                        >\n                          {field.value\n                            ? vendors.find(\n                                (vendor) => vendor.name === field.value\n                              )?.name\n                            : \"Select a vendor\"}\n                          <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n                        </Button>\n                      </FormControl>\n                    </PopoverTrigger>\n                    <PopoverContent className=\"w-[--radix-popover-trigger-width] p-0\">\n                      <Command>\n                        <CommandInput placeholder=\"Search vendor...\" />\n                        <CommandList>\n                        <CommandEmpty>\n                             <Button\n                                variant=\"ghost\"\n                                className=\"w-full justify-start\"\n                                onClick={() => {\n                                    const newVendorName = form.getValues('vendor');\n                                    if(newVendorName && !vendors.some(v => v.name === newVendorName)) {\n                                        const newVendor: Vendor = {\n                                            id: crypto.randomUUID(),\n                                            name: newVendorName,\n                                            trade: 'Uncategorized',\n                                            contactPerson: 'N/A',\n                                            phone: 'N/A',\n                                            email: 'N/A'\n                                        };\n                                        setVendors(prev => [...prev, newVendor]);\n                                        field.onChange(newVendorName);\n                                    }\n                                }}\n                                >\n                                Create \"{form.getValues('vendor')}\"\n                            </Button>\n                        </CommandEmpty>\n                        <CommandGroup>\n                          {vendors\n                            .sort((a, b) => a.name.localeCompare(b.name))\n                            .map((vendor) => (\n                            <CommandItem\n                              value={vendor.name}\n                              key={vendor.id}\n                              onSelect={() => {\n                                form.setValue(\"vendor\", vendor.name)\n                              }}\n                            >\n                              <Check\n                                className={cn(\n                                  \"mr-2 h-4 w-4\",\n                                  vendor.name === field.value\n                                    ? \"opacity-100\"\n                                    : \"opacity-0\"\n                                )}\n                              />\n                              {vendor.name}\n                            </CommandItem>\n                          ))}\n                        </CommandGroup>\n                         </CommandList>\n                      </Command>\n                    </PopoverContent>\n                  </Popover>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <FormField\n              control={form.control}\n              name=\"description\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Description</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., Concrete Mix\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <FormField\n              control={form.control}\n              name=\"amount\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Amount</FormLabel>\n                  <FormControl>\n                    <Input type=\"number\" placeholder=\"0.00\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n             <FormField\n              control={form.control}\n              name=\"paymentMethod\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Payment Method</FormLabel>\n                  <Select\n                    onValueChange={field.onChange}\n                    value={field.value}\n                  >\n                    <FormControl>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select a payment method\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"Company Credit Card\">Company Credit Card</SelectItem>\n                      <SelectItem value=\"Check\">Check</SelectItem>\n                       <SelectItem value=\"ACH\">ACH</SelectItem>\n                      <SelectItem value=\"Wire Transfer\">Wire Transfer</SelectItem>\n                      <SelectItem value=\"Cash\">Cash</SelectItem>\n                      <SelectItem value=\"Groundbreaking\">Groundbreaking</SelectItem>\n                      <SelectItem value=\"to be paid\">To be paid</SelectItem>\n                      <SelectItem value=\"Bank ACH\">Bank ACH</SelectItem>\n                      <SelectItem value=\"Karim's Card\">Karim&apos;s Card</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            {(paymentMethod === 'Check' || paymentMethod === 'Company Credit Card') && (\n                 <FormField\n                    control={form.control}\n                    name=\"paymentReference\"\n                    render={({ field }) => (\n                        <FormItem>\n                        <FormLabel>{paymentMethod === 'Check' ? 'Check Number' : 'Last 4 Digits'}</FormLabel>\n                        <FormControl>\n                            <Input placeholder={paymentMethod === 'Check' ? 'e.g., 12345' : 'e.g., 1234'} {...field} />\n                        </FormControl>\n                        <FormMessage />\n                        </FormItem>\n                    )}\n                />\n            )}\n\n             <FormField\n              control={form.control}\n              name=\"invoiceNumber\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Invoice # (Optional)</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., INV-124\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <DialogFooter className=\"pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                onClick={() => onOpenChange(false)}\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\">Save Expense</Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
  "src/app/(app)/projects/[id]/_components/add-edit-milestone-dialog.tsx": "\n\n'use client';\n\nimport { useEffect } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { useToast } from '@/hooks/use-toast';\nimport type { Milestone } from '@/lib/types';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { cn } from '@/lib/utils';\nimport { CalendarIcon } from 'lucide-react';\nimport { Calendar } from '@/components/ui/calendar';\nimport { format } from 'date-fns';\n\nconst formSchema = z.object({\n  name: z.string().min(1, 'Milestone name is required.'),\n  description: z.string().min(1, 'Description is required.'),\n  dueDate: z.date({ required_error: 'Please select a due date.' }),\n  status: z.enum(['Upcoming', 'In Progress', 'Completed']),\n});\n\ntype FormValues = z.infer<typeof formSchema>;\n\nexport function AddEditMilestoneDialog({\n  open,\n  onOpenChange,\n  milestone,\n  onSave,\n  projectId\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  milestone: Milestone | null;\n  onSave: (milestone: Milestone) => void;\n  projectId: string;\n}) {\n  const { toast } = useToast();\n  const isEditing = !!milestone;\n  const form = useForm<FormValues>({\n    resolver: zodResolver(formSchema),\n  });\n\n  useEffect(() => {\n    if (open) {\n      if (isEditing && milestone) {\n        form.reset({\n          name: milestone.name,\n          description: milestone.description,\n          dueDate: new Date(milestone.dueDate),\n          status: milestone.status,\n        });\n      } else {\n        form.reset({\n          name: '',\n          description: '',\n          dueDate: undefined,\n          status: 'Upcoming',\n        });\n      }\n    }\n  }, [milestone, isEditing, open, form]);\n\n  const onSubmit = (data: FormValues) => {\n    const milestoneToSave = {\n      id: milestone?.id || '',\n      projectId: milestone?.projectId || projectId,\n      name: data.name,\n      description: data.description,\n      dueDate: format(data.dueDate, 'yyyy-MM-dd'),\n      status: data.status,\n    };\n    onSave(milestoneToSave);\n    toast({\n      title: `Milestone ${isEditing ? 'Updated' : 'Created'}`,\n      description: `Successfully ${isEditing ? 'updated' : 'created'} milestone: ${data.name}.`,\n    });\n    onOpenChange(false);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>{isEditing ? 'Edit' : 'Add'} Milestone</DialogTitle>\n          <DialogDescription>\n            {isEditing\n              ? 'Update the details for this project milestone.'\n              : 'Create a new milestone to track a major goal.'}\n          </DialogDescription>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"name\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Milestone Name</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., Foundation Complete\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <FormField\n              control={form.control}\n              name=\"description\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Description</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      placeholder=\"Describe what this milestone entails.\"\n                      {...field}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n             <FormField\n                control={form.control}\n                name=\"dueDate\"\n                render={({ field }) => (\n                  <FormItem className=\"flex flex-col\">\n                    <FormLabel>Due Date</FormLabel>\n                    <Popover>\n                      <PopoverTrigger asChild>\n                        <FormControl>\n                          <Button\n                            variant={'outline'}\n                            className={cn(\n                              'w-full pl-3 text-left font-normal',\n                              !field.value && 'text-muted-foreground'\n                            )}\n                          >\n                            {field.value ? (\n                              format(field.value, 'PPP')\n                            ) : (\n                              <span>Pick a date</span>\n                            )}\n                            <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\n                          </Button>\n                        </FormControl>\n                      </PopoverTrigger>\n                      <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                        <Calendar\n                          mode=\"single\"\n                          selected={field.value}\n                          onSelect={field.onChange}\n                          initialFocus\n                        />\n                      </PopoverContent>\n                    </Popover>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            <FormField\n              control={form.control}\n              name=\"status\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Status</FormLabel>\n                  <Select onValueChange={field.onChange} value={field.value}>\n                    <FormControl>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select a status\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"Upcoming\">Upcoming</SelectItem>\n                      <SelectItem value=\"In Progress\">In Progress</SelectItem>\n                      <SelectItem value=\"Completed\">Completed</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <DialogFooter className=\"pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                onClick={() => onOpenChange(false)}\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\">Save</Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
  "src/app/(app)/projects/[id]/_components/add-rfi-dialog.tsx": "'use client';\n\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { useToast } from '@/hooks/use-toast';\n\nconst formSchema = z.object({\n  subject: z.string().min(5, 'Subject must be at least 5 characters long.'),\n  question: z.string().min(10, 'Question must be at least 10 characters long.'),\n});\n\ntype AddRfiFormValues = z.infer<typeof formSchema>;\n\nexport function AddRfiDialog({\n  open,\n  onOpenChange,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}) {\n  const { toast } = useToast();\n  const form = useForm<AddRfiFormValues>({\n    resolver: zodResolver(formSchema),\n  });\n\n  const onSubmit = (data: AddRfiFormValues) => {\n    console.log('New RFI submitted:', data);\n    toast({\n      title: 'RFI Submitted',\n      description: 'Your Request for Information has been successfully submitted.',\n    });\n    onOpenChange(false);\n    form.reset();\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-lg\">\n        <DialogHeader>\n          <DialogTitle>Submit New RFI</DialogTitle>\n          <DialogDescription>\n            Fill out the form below to submit a new Request for Information.\n          </DialogDescription>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"subject\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Subject</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., Clarification on drawing A-101\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <FormField\n              control={form.control}\n              name=\"question\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Question</FormLabel>\n                  <FormControl>\n                    <Textarea\n                        rows={5}\n                        placeholder=\"Please provide details about...\"\n                        {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            <DialogFooter>\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                onClick={() => onOpenChange(false)}\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\">Submit RFI</Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
  "src/app/(app)/projects/[id]/_components/add-schedule-item-dialog.tsx": "'use client';\n\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { useToast } from '@/hooks/use-toast';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { cn } from '@/lib/utils';\nimport { CalendarIcon } from 'lucide-react';\nimport { Calendar } from '@/components/ui/calendar';\nimport { format } from 'date-fns';\nimport { teamMembers } from '@/lib/data';\n\nconst formSchema = z.object({\n    taskName: z.string().min(1, 'Task name is required.'),\n    startDate: z.date({ required_error: 'Please select a start date.' }),\n    endDate: z.date({ required_error: 'Please select an end date.' }),\n    status: z.enum(['Not Started', 'In Progress', 'Completed']),\n    assigneeId: z.string().optional(),\n    priority: z.enum(['Low', 'Medium', 'High']).optional(),\n    notes: z.string().optional(),\n}).refine(data => data.endDate >= data.startDate, {\n    message: \"End date cannot be before start date.\",\n    path: [\"endDate\"],\n});\n\ntype AddScheduleItemFormValues = z.infer<typeof formSchema>;\n\nexport function AddScheduleItemDialog({\n  open,\n  onOpenChange,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}) {\n  const { toast } = useToast();\n  const form = useForm<AddScheduleItemFormValues>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      status: 'Not Started',\n      priority: 'Medium',\n    },\n  });\n\n  const onSubmit = (data: AddScheduleItemFormValues) => {\n    console.log('New schedule item:', data);\n    toast({\n      title: 'Schedule Item Added',\n      description: `Successfully added task: ${data.taskName}.`,\n    });\n    onOpenChange(false);\n    form.reset();\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-lg\">\n        <DialogHeader>\n          <DialogTitle>Add New Schedule Item</DialogTitle>\n          <DialogDescription>\n            Fill out the form below to add a new item to the project schedule.\n          </DialogDescription>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4 max-h-[70vh] overflow-y-auto pr-6 pl-1\">\n            <FormField\n              control={form.control}\n              name=\"taskName\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Task Name</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., Site Preparation\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n               <FormField\n                control={form.control}\n                name=\"startDate\"\n                render={({ field }) => (\n                  <FormItem className=\"flex flex-col\">\n                    <FormLabel>Start Date</FormLabel>\n                    <Popover>\n                      <PopoverTrigger asChild>\n                        <FormControl>\n                          <Button\n                            variant={'outline'}\n                            className={cn(\n                              'w-full pl-3 text-left font-normal',\n                              !field.value && 'text-muted-foreground'\n                            )}\n                          >\n                            {field.value ? (\n                              format(field.value, 'PPP')\n                            ) : (\n                              <span>Pick a date</span>\n                            )}\n                            <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\n                          </Button>\n                        </FormControl>\n                      </PopoverTrigger>\n                      <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                        <Calendar\n                          mode=\"single\"\n                          selected={field.value}\n                          onSelect={field.onChange}\n                          initialFocus\n                        />\n                      </PopoverContent>\n                    </Popover>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n               <FormField\n                control={form.control}\n                name=\"endDate\"\n                render={({ field }) => (\n                  <FormItem className=\"flex flex-col\">\n                    <FormLabel>End Date</FormLabel>\n                    <Popover>\n                      <PopoverTrigger asChild>\n                        <FormControl>\n                          <Button\n                            variant={'outline'}\n                            className={cn(\n                              'w-full pl-3 text-left font-normal',\n                              !field.value && 'text-muted-foreground'\n                            )}\n                          >\n                            {field.value ? (\n                              format(field.value, 'PPP')\n                            ) : (\n                              <span>Pick a date</span>\n                            )}\n                            <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\n                          </Button>\n                        </FormControl>\n                      </PopoverTrigger>\n                      <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                        <Calendar\n                          mode=\"single\"\n                          selected={field.value}\n                          onSelect={field.onChange}\n                          initialFocus\n                        />\n                      </PopoverContent>\n                    </Popover>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"status\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Status</FormLabel>\n                  <Select onValueChange={field.onChange} defaultValue={field.value}>\n                    <FormControl>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select a status\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"Not Started\">Not Started</SelectItem>\n                      <SelectItem value=\"In Progress\">In Progress</SelectItem>\n                      <SelectItem value=\"Completed\">Completed</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            \n            <FormField\n                control={form.control}\n                name=\"assigneeId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Assignee (Optional)</FormLabel>\n                    <Select onValueChange={field.onChange} defaultValue={field.value}>\n                      <FormControl>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select a team member\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                         {teamMembers.map(member => (\n                            <SelectItem key={member.id} value={member.id}>\n                                {member.name} ({member.role})\n                            </SelectItem>\n                         ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"priority\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Priority (Optional)</FormLabel>\n                  <Select onValueChange={field.onChange} defaultValue={field.value}>\n                    <FormControl>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select a priority level\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"Low\">Low</SelectItem>\n                      <SelectItem value=\"Medium\">Medium</SelectItem>\n                      <SelectItem value=\"High\">High</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"notes\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Notes (Optional)</FormLabel>\n                  <FormControl>\n                    <Textarea placeholder=\"Add any relevant notes for this task\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            \n            <DialogFooter className=\"pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                onClick={() => onOpenChange(false)}\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\">Add to Schedule</Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
  "src/app/(app)/projects/[id]/_components/milestone-progress.tsx": "\n'use client';\n\nimport { Flag } from 'lucide-react';\nimport {\n  ChartContainer,\n} from '@/components/ui/chart';\nimport { Pie, PieChart, Cell } from 'recharts';\n\ntype MilestoneProgressProps = {\n  value: number;\n  total: number;\n};\n\nexport function MilestoneProgress({ value, total }: MilestoneProgressProps) {\n  const progress = total > 0 ? (value / total) * 100 : 0;\n  \n  const chartData = [\n    { name: 'Completed', value: value, fill: 'hsl(var(--primary))' },\n    { name: 'Remaining', value: Math.max(0, total - value), fill: 'hsl(var(--muted))' }\n  ];\n\n  return (\n    <div className=\"flex flex-col items-center text-sm relative\">\n       <div className=\"h-20 w-20\">\n        <ChartContainer\n          config={{}}\n          className=\"min-h-0 w-full h-full p-0 [&>div]:h-full\"\n        >\n          <PieChart>\n            <Pie\n              data={chartData}\n              dataKey=\"value\"\n              nameKey=\"name\"\n              cx=\"50%\"\n              cy=\"50%\"\n              innerRadius={24}\n              outerRadius={32}\n              strokeWidth={2}\n              startAngle={90}\n              endAngle={450}\n            >\n                {chartData.map((entry) => (\n                    <Cell key={entry.name} fill={entry.fill} />\n                ))}\n            </Pie>\n          </PieChart>\n        </ChartContainer>\n         <div className=\"absolute inset-0 flex flex-col items-center justify-center\">\n            <Flag className=\"h-5 w-5 text-muted-foreground\" />\n         </div>\n      </div>\n      <p className=\"font-bold text-lg\">{value}/{total}</p>\n      <p className=\"text-xs text-muted-foreground\">Milestones</p>\n    </div>\n  );\n}\n",
  "src/app/(app)/projects/[id]/_components/paste-budget-dialog.tsx": "\n\n'use client';\n\nimport { useState, useContext } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useToast } from '@/hooks/use-toast';\nimport { AppStateContext } from '@/context/app-state-context';\nimport type { BudgetItem } from '@/lib/types';\nimport { Label } from '@/components/ui/label';\n\nconst parseAmount = (value: any): number => {\n  if (typeof value === 'number') {\n    return value;\n  }\n  if (typeof value === 'string') {\n    const cleaned = value.replace(/[^0-9.-]+/g, '');\n    const num = parseFloat(cleaned);\n    return isNaN(num) ? 0 : num;\n  }\n  return 0;\n};\n\n\nexport function PasteBudgetDialog({\n  open,\n  onOpenChange,\n  projectId,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  projectId: string;\n}) {\n  const { toast } = useToast();\n  const appState = useContext(AppStateContext);\n  const [pasteData, setPasteData] = useState('');\n\n  const handleImport = () => {\n    if (!appState) return;\n    \n    try {\n      const rows = pasteData.split('\\n').filter(row => row.trim() !== '');\n      \n      const newBudgetItems: BudgetItem[] = rows.map(row => {\n        const columns = row.split('\\t'); // Assuming tab-separated from spreadsheet\n        \n        if (columns.length < 2) {\n          return null;\n        }\n\n        const notes = columns[0].trim();\n        const category = columns[1].trim();\n        const originalBudget = parseAmount(columns[2]);\n        \n        if (!category || !notes) {\n            return null;\n        }\n\n        return {\n          id: crypto.randomUUID(),\n          projectId: projectId,\n          category,\n          costType: 'material', // Default value\n          notes,\n          originalBudget,\n          approvedCOBudget: 0,\n          committedCost: 0,\n          projectedCost: originalBudget,\n        };\n      }).filter((item): item is BudgetItem => item !== null);\n\n      if (newBudgetItems.length > 0) {\n        appState.setBudgetItems(current => [...current, ...newBudgetItems]);\n        toast({\n          title: 'Import Successful',\n          description: `${newBudgetItems.length} budget items have been imported from pasted data.`,\n        });\n      } else {\n        toast({\n            title: \"Import Warning\",\n            description: \"No valid budget items could be found in the pasted data. Please ensure the first column is the category and the second is the amount.\",\n            variant: \"destructive\"\n        });\n      }\n      \n      onOpenChange(false);\n      setPasteData('');\n\n    } catch (error) {\n      console.error('Error parsing pasted data:', error);\n      toast({\n        title: 'Import Failed',\n        description: 'There was an error processing the pasted data. Please ensure it is copied correctly from a spreadsheet.',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  if (!appState) return null;\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-lg\">\n        <DialogHeader>\n          <DialogTitle>Paste from Spreadsheet</DialogTitle>\n          <DialogDescription>\n            Copy data from your spreadsheet (e.g., Excel, Google Sheets) and paste it below. The first column should be the category and the second column should be the budget amount.\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"space-y-2\">\n            <Label htmlFor=\"paste-area\">Pasted Data</Label>\n            <Textarea \n                id=\"paste-area\"\n                rows={10}\n                placeholder=\"Framing\\t50000.00\\nElectrical\\t25000.00\"\n                value={pasteData}\n                onChange={(e) => setPasteData(e.target.value)}\n            />\n        </div>\n        <DialogFooter>\n          <Button\n            type=\"button\"\n            variant=\"ghost\"\n            onClick={() => onOpenChange(false)}\n          >\n            Cancel\n          </Button>\n          <Button type=\"button\" onClick={handleImport}>Import Data</Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
  "src/app/(app)/projects/[id]/_components/project-summary-chart.tsx": "\n'use client';\n\nimport {\n  ChartContainer,\n} from '@/components/ui/chart';\nimport { Pie, PieChart, Cell } from 'recharts';\n\ntype ChartData = {\n  name: string;\n  value: number;\n  fill: string;\n};\n\ntype ProjectSummaryChartProps = {\n  data: ChartData[];\n  label: string;\n  metric: string;\n  metricLabel: string;\n};\n\nexport function ProjectSummaryChart({ data, label, metric, metricLabel }: ProjectSummaryChartProps) {\n  return (\n    <div className=\"flex items-center gap-2 text-sm\">\n      <div className=\"h-16 w-16\">\n        <ChartContainer\n          config={{}}\n          className=\"min-h-0 w-full h-full p-0 [&>div]:h-full\"\n        >\n          <PieChart>\n            <Pie\n              data={data}\n              dataKey=\"value\"\n              nameKey=\"name\"\n              cx=\"50%\"\n              cy=\"50%\"\n              innerRadius={18}\n              outerRadius={24}\n              strokeWidth={2}\n            >\n                {data.map((entry) => (\n                    <Cell key={entry.name} fill={entry.fill} />\n                ))}\n            </Pie>\n          </PieChart>\n        </ChartContainer>\n      </div>\n      <div>\n        <p className=\"text-muted-foreground\">{label}</p>\n        <p className=\"font-bold text-lg\">{metric}</p>\n        <p className=\"text-xs text-muted-foreground\">{metricLabel}</p>\n      </div>\n    </div>\n  );\n}\n",
  "src/app/(app)/projects/[id]/_components/project-tabs.tsx": "\n\n\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { cn } from \"@/lib/utils\";\n\nconst tabs = [\n    { name: \"Reports\", href: \"reports\" },\n    { name: \"Budget\", href: \"\" },\n    { name: \"Expenses\", href: \"expenses\" },\n    { name: \"Change Orders\", href: \"change-orders\" },\n    { name: \"Get Reimbursed\", href: \"get-reimbursed\" },\n    { name: \"Milestones\", href: \"milestones\" },\n    { name: \"Drawings\", href: \"drawings\" },\n    { name: \"Schedule\", href: \"schedule\" },\n    { name: \"RFIs\", href: \"rfis\" },\n    { name: \"Client Uploads\", href: \"client-uploads\" },\n];\n\nexport function ProjectTabs({ projectId }: { projectId: string }) {\n    const pathname = usePathname();\n    const baseHref = `/projects/${projectId}`;\n    \n    return (\n        <div className=\"border-b\">\n            <nav className=\"-mb-px flex space-x-6 overflow-x-auto\" aria-label=\"Tabs\">\n                {tabs.map((tab) => {\n                    const href = tab.href ? `${baseHref}/${tab.href}` : baseHref;\n                    const isActive = pathname === href;\n\n                    return (\n                        <Link\n                            key={tab.name}\n                            href={href}\n                            className={cn(\n                                \"whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm\",\n                                isActive\n                                    ? \"border-primary text-primary\"\n                                    : \"border-transparent text-muted-foreground hover:text-foreground hover:border-border\"\n                            )}\n                            aria-current={isActive ? \"page\" : undefined}\n                        >\n                            {tab.name}\n                        </Link>\n                    );\n                })}\n            </nav>\n        </div>\n    );\n}\n",
  "src/app/(app)/projects/[id]/_components/transactions-dialog.tsx": "'use client';\n\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from '@/components/ui/dialog';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport type { Expense } from '@/lib/types';\nimport { format } from 'date-fns';\n\nexport function TransactionsDialog({\n  open,\n  onOpenChange,\n  category,\n  expenses,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  category: string;\n  expenses: Expense[];\n}) {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-3xl\">\n        <DialogHeader>\n          <DialogTitle>Transactions for {category}</DialogTitle>\n          <DialogDescription>\n            A list of all recorded expenses for this budget category.\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"max-h-[60vh] overflow-y-auto\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Date</TableHead>\n                <TableHead>Description</TableHead>\n                <TableHead>Vendor</TableHead>\n                <TableHead className=\"text-right\">Amount</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {expenses.map((expense) => (\n                <TableRow key={expense.id}>\n                  <TableCell>\n                    {format(new Date(expense.date), 'PP')}\n                  </TableCell>\n                  <TableCell>{expense.description}</TableCell>\n                  <TableCell>{expense.vendorName}</TableCell>\n                  <TableCell className=\"text-right\">\n                    {expense.amount.toLocaleString('en-US', {\n                      style: 'currency',\n                      currency: 'USD',\n                    })}\n                  </TableCell>\n                </TableRow>\n              ))}\n              {expenses.length === 0 && (\n                <TableRow>\n                    <TableCell colSpan={4} className='text-center text-muted-foreground py-8'>\n                        No expenses recorded for this category yet.\n                    </TableCell>\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n    ",
  "src/app/(app)/projects/[id]/client-uploads/page.tsx": "\n'use client';\n\nimport { Button } from '@/components/ui/button';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  Download,\n  Edit,\n  File as FileIcon,\n  Trash2,\n  Upload,\n} from 'lucide-react';\n\nconst mockUploads = [\n  {\n    id: '1',\n    fileName: 'Signed_CO-001.pdf',\n    fileSize: '117.19 KB',\n    uploadedAt: 'over 2 years ago',\n  },\n  {\n    id: '2',\n    fileName: 'Lobby_Finish_Selection.jpg',\n    fileSize: '83.01 KB',\n    uploadedAt: 'over 2 years ago',\n  },\n];\n\nexport default function ProjectClientUploadsPage() {\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Client Uploads</CardTitle>\n        <CardDescription>\n          Documents and files uploaded by the client.\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-4\">\n          {mockUploads.map((upload) => (\n            <div\n              key={upload.id}\n              className=\"flex items-center justify-between rounded-lg border p-4\"\n            >\n              <div className=\"flex items-center gap-4\">\n                <FileIcon className=\"h-8 w-8 text-muted-foreground\" />\n                <div>\n                  <p className=\"font-medium\">{upload.fileName}</p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {upload.fileSize} &bull; {upload.uploadedAt}\n                  </p>\n                </div>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Button variant=\"ghost\" size=\"icon\">\n                  <Download className=\"h-5 w-5\" />\n                  <span className=\"sr-only\">Download</span>\n                </Button>\n                <Button variant=\"ghost\" size=\"icon\">\n                  <Edit className=\"h-5 w-5\" />\n                  <span className=\"sr-only\">Edit</span>\n                </Button>\n                <Button variant=\"ghost\" size=\"icon\" className='text-destructive hover:text-destructive'>\n                  <Trash2 className=\"h-5 w-5\" />\n                  <span className=\"sr-only\">Delete</span>\n                </Button>\n              </div>\n            </div>\n          ))}\n          <Button className=\"w-full\" size=\"lg\">\n            <Upload className=\"mr-2\" />\n            Upload a File\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n",
  "src/app/(app)/projects/[id]/drawings/page.tsx": "\n'use client';\n\nimport { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { MoreHorizontal, PlusCircle, FileText } from 'lucide-react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { AddDrawingDialog } from '../_components/add-drawing-dialog';\n\n// Mock data, will be replaced with real data later\nconst mockDrawings = [\n  {\n    id: '1',\n    sheetNo: 'A-101',\n    title: 'First Floor Plan',\n    version: 3,\n    date: '2024-06-15',\n    description: 'Issued for Construction',\n  },\n  {\n    id: '2',\n    sheetNo: 'A-102',\n    title: 'Second Floor Plan',\n    version: 2,\n    date: '2024-05-20',\n    description: 'Issued for Bid',\n  },\n  {\n    id: '3',\n    sheetNo: 'S-201',\n    title: 'Foundation Details',\n    version: 1,\n    date: '2024-04-01',\n    description: 'Initial Release',\n  },\n];\n\nexport default function ProjectDrawingsPage() {\n  const [isAddDrawingOpen, setIsAddDrawingOpen] = useState(false);\n\n  return (\n    <>\n      <AddDrawingDialog\n        open={isAddDrawingOpen}\n        onOpenChange={setIsAddDrawingOpen}\n      />\n      <Card>\n        <CardHeader>\n          <div className=\"flex justify-between items-center\">\n            <div>\n              <CardTitle className=\"text-2xl\">Drawings</CardTitle>\n              <CardDescription>\n                Manage project drawings and versions.\n              </CardDescription>\n            </div>\n            <Button onClick={() => setIsAddDrawingOpen(true)}>\n              <PlusCircle className=\"mr-2 h-4 w-4\" /> Add Drawing\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead className=\"w-[120px]\">Sheet No.</TableHead>\n                <TableHead>Title</TableHead>\n                <TableHead className=\"w-[100px]\">Version</TableHead>\n                <TableHead>Date</TableHead>\n                <TableHead>Description</TableHead>\n                <TableHead className=\"w-[50px]\"></TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {mockDrawings.map((drawing) => (\n                <TableRow key={drawing.id}>\n                  <TableCell className=\"font-medium\">{drawing.sheetNo}</TableCell>\n                  <TableCell>{drawing.title}</TableCell>\n                  <TableCell>\n                    <Badge variant=\"secondary\">Ver. {drawing.version}</Badge>\n                  </TableCell>\n                  <TableCell>{drawing.date}</TableCell>\n                  <TableCell>{drawing.description}</TableCell>\n                  <TableCell>\n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild>\n                        <Button aria-haspopup=\"true\" size=\"icon\" variant=\"ghost\">\n                          <MoreHorizontal className=\"h-4 w-4\" />\n                          <span className=\"sr-only\">Toggle menu</span>\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align=\"end\">\n                        <DropdownMenuLabel>Actions</DropdownMenuLabel>\n                        <DropdownMenuItem>\n                          <FileText className=\"mr-2\" /> View/Markup\n                        </DropdownMenuItem>\n                        <DropdownMenuItem>Upload New Version</DropdownMenuItem>\n                        <DropdownMenuItem>Delete</DropdownMenuItem>\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n    </>\n  );\n}\n",
  "src/app/(app)/projects/[id]/get-reimbursed/page.tsx": "\n'use client';\n\nimport { useState, useContext, useRef, useMemo } from 'react';\nimport { Button } from '@/components/ui/button';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { MoreHorizontal, PlusCircle, ArrowUpDown, Trash2 } from 'lucide-react';\nimport { AddEditExpenseDialog } from '../_components/add-edit-expense-dialog';\nimport { format } from 'date-fns';\nimport { AppStateContext } from '@/context/app-state-context';\nimport { useToast } from '@/hooks/use-toast';\nimport type { Expense } from '@/lib/types';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from \"@/components/ui/alert-dialog\";\nimport { Checkbox } from '@/components/ui/checkbox';\n\nexport default function ProjectGetReimbursedPage({\n  params,\n}: {\n  params: { id: string };\n}) {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [selectedExpense, setSelectedExpense] = useState<Expense | null>(null);\n  const [selectedRowKeys, setSelectedRowKeys] = useState<string[]>([]);\n  const [sortConfig, setSortConfig] = useState<{ key: keyof Expense; direction: 'asc' | 'desc' } | null>({ key: 'date', direction: 'desc'});\n  const appState = useContext(AppStateContext);\n  const { toast } = useToast();\n\n  if (!appState) {\n    return <div>Loading...</div>;\n  }\n  const { expenses, setExpenses } = appState;\n  \n  const projectExpenses = useMemo(() => expenses.filter(\n    (exp) => exp.projectId === params.id && exp.category === 'Get Reimbursed'\n  ), [expenses, params.id]);\n\n\n  const sortedExpenses = useMemo(() => {\n    let sortableItems = [...projectExpenses];\n    \n    if (sortConfig !== null) {\n      sortableItems.sort((a, b) => {\n        const aValue = a[sortConfig.key];\n        const bValue = b[sortConfig.key];\n        if (aValue === undefined || bValue === undefined) return 0;\n        \n        if (aValue < bValue) {\n          return sortConfig.direction === 'asc' ? -1 : 1;\n        }\n        if (aValue > bValue) {\n          return sortConfig.direction === 'asc' ? 1 : -1;\n        }\n        return 0;\n      });\n    }\n    return sortableItems;\n  }, [projectExpenses, sortConfig]);\n\n  const requestSort = (key: keyof Expense) => {\n    let direction: 'asc' | 'desc' = 'asc';\n    if (sortConfig && sortConfig.key === key && sortConfig.direction === 'asc') {\n      direction = 'desc';\n    }\n    setSortConfig({ key, direction });\n  };\n\n\n  const handleNewExpense = () => {\n    setSelectedExpense(null);\n    setDialogOpen(true);\n  };\n\n  const handleEditExpense = (expense: Expense) => {\n    setSelectedExpense(expense);\n    setDialogOpen(true);\n  };\n\n  const handleDeleteExpense = (expenseId: string) => {\n    setExpenses(current => current.filter(exp => exp.id !== expenseId));\n    toast({\n        title: \"Expense Deleted\",\n        description: \"The expense has been successfully deleted.\",\n        variant: \"destructive\"\n    });\n  };\n\n  const handleDeleteSelected = () => {\n    setExpenses(current => current.filter(exp => !selectedRowKeys.includes(exp.id)));\n    toast({\n        title: `${selectedRowKeys.length} Expenses Deleted`,\n        description: \"The selected expenses have been successfully deleted.\",\n        variant: \"destructive\"\n    });\n    setSelectedRowKeys([]);\n  }\n\n  const handleSaveExpense = (expense: Expense) => {\n    const expenseToSave = { ...expense, category: 'Get Reimbursed' };\n    if (selectedExpense && expense.id) {\n        // Edit\n        setExpenses(current => current.map(e => e.id === expenseToSave.id ? expenseToSave : e));\n    } else {\n        // Add\n        setExpenses(current => [{...expenseToSave, id: crypto.randomUUID()}, ...current]);\n    }\n  };\n\n  return (\n    <>\n      <AddEditExpenseDialog\n        open={dialogOpen}\n        onOpenChange={setDialogOpen}\n        projectId={params.id}\n        expense={selectedExpense}\n        onSave={handleSaveExpense}\n      />\n      <Card>\n        <CardHeader>\n          <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n            <div>\n              <CardTitle className=\"text-2xl\">Get Reimbursed</CardTitle>\n              <CardDescription>\n                Track and manage reimbursable expenses for this project.\n              </CardDescription>\n            </div>\n            <div className=\"flex items-center gap-2 w-full sm:w-auto flex-wrap\">\n              {selectedRowKeys.length > 0 ? (\n                 <AlertDialog>\n                    <AlertDialogTrigger asChild>\n                      <Button variant=\"destructive\">\n                        <Trash2 className=\"mr-2 h-4 w-4\" />\n                        Delete ({selectedRowKeys.length})\n                      </Button>\n                    </AlertDialogTrigger>\n                    <AlertDialogContent>\n                        <AlertDialogHeader>\n                            <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                            <AlertDialogDescription>\n                                This action cannot be undone. This will permanently delete {selectedRowKeys.length} expense(s).\n                            </AlertDialogDescription>\n                        </AlertDialogHeader>\n                        <AlertDialogFooter>\n                            <AlertDialogCancel>Cancel</AlertDialogCancel>\n                            <AlertDialogAction onClick={handleDeleteSelected} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\n                                Delete\n                            </AlertDialogAction>\n                        </AlertDialogFooter>\n                    </AlertDialogContent>\n                </AlertDialog>\n              ) : null}\n              <Button\n                onClick={handleNewExpense}\n                className=\"w-full sm:w-auto\"\n              >\n                <PlusCircle className=\"mr-2 h-4 w-4\" /> Add Expense\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                 <TableHead className=\"w-[40px]\">\n                    <Checkbox\n                        checked={selectedRowKeys.length > 0 && sortedExpenses.length > 0 && selectedRowKeys.length === sortedExpenses.length}\n                        onCheckedChange={(checked) => {\n                            if (checked) {\n                                setSelectedRowKeys(sortedExpenses.map(exp => exp.id));\n                            } else {\n                                setSelectedRowKeys([]);\n                            }\n                        }}\n                        aria-label=\"Select all rows\"\n                    />\n                 </TableHead>\n                <TableHead>\n                  <Button variant=\"ghost\" onClick={() => requestSort('date')}>\n                    Date\n                    <ArrowUpDown className=\"ml-2 h-4 w-4\" />\n                  </Button>\n                </TableHead>\n                <TableHead>\n                  <Button variant=\"ghost\" onClick={() => requestSort('vendorName')}>\n                    Vendor\n                    <ArrowUpDown className=\"ml-2 h-4 w-4\" />\n                  </Button>\n                </TableHead>\n                <TableHead>Description</TableHead>\n                <TableHead>Payment Method</TableHead>\n                <TableHead>Reference</TableHead>\n                <TableHead>Invoice #</TableHead>\n                <TableHead className=\"text-right\">\n                  <Button variant=\"ghost\" onClick={() => requestSort('amount')}>\n                    Amount\n                    <ArrowUpDown className=\"ml-2 h-4 w-4\" />\n                  </Button>\n                </TableHead>\n                <TableHead className=\"w-[50px]\"></TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {sortedExpenses.map((expense) => (\n                <TableRow key={expense.id} data-state={selectedRowKeys.includes(expense.id) && \"selected\"}>\n                  <TableCell>\n                      <Checkbox\n                          checked={selectedRowKeys.includes(expense.id)}\n                          onCheckedChange={(checked) => {\n                              if (checked) {\n                                  setSelectedRowKeys(prev => [...prev, expense.id]);\n                              } else {\n                                  setSelectedRowKeys(prev => prev.filter(id => id !== expense.id));\n                              }\n                          }}\n                          aria-label=\"Select row\"\n                      />\n                  </TableCell>\n                  <TableCell>\n                    {format(new Date(expense.date), 'PP')}\n                  </TableCell>\n                  <TableCell>{expense.vendorName}</TableCell>\n                  <TableCell>{expense.description}</TableCell>\n                  <TableCell>{expense.paymentMethod}</TableCell>\n                  <TableCell>{expense.paymentReference}</TableCell>\n                  <TableCell>{expense.invoiceNumber}</TableCell>\n                  <TableCell className=\"text-right\">\n                    {expense.amount.toLocaleString('en-US', {\n                      style: 'currency',\n                      currency: 'USD',\n                    })}\n                  </TableCell>\n                  <TableCell>\n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild>\n                        <Button aria-haspopup=\"true\" size=\"icon\" variant=\"ghost\">\n                          <MoreHorizontal className=\"h-4 w-4\" />\n                          <span className=\"sr-only\">Toggle menu</span>\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align=\"end\">\n                        <DropdownMenuLabel>Actions</DropdownMenuLabel>\n                        <DropdownMenuItem onClick={() => handleEditExpense(expense)}>Edit</DropdownMenuItem>\n                        <AlertDialog>\n                            <AlertDialogTrigger asChild>\n                                <DropdownMenuItem onSelect={(e) => e.preventDefault()} className=\"text-destructive\">Delete</DropdownMenuItem>\n                            </AlertDialogTrigger>\n                            <AlertDialogContent>\n                                <AlertDialogHeader>\n                                    <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                                    <AlertDialogDescription>\n                                        This action cannot be undone. This will permanently delete this expense.\n                                    </AlertDialogDescription>\n                                </AlertDialogHeader>\n                                <AlertDialogFooter>\n                                    <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                    <AlertDialogAction onClick={() => handleDeleteExpense(expense.id)} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\n                                        Delete\n                                    </AlertDialogAction>\n                                </AlertDialogFooter>\n                            </AlertDialogContent>\n                        </AlertDialog>\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  </TableCell>\n                </TableRow>\n              ))}\n               {sortedExpenses.length === 0 && (\n                <TableRow>\n                  <TableCell colSpan={9} className=\"text-center h-24\">\n                    No reimbursable expenses recorded for this project yet.\n                  </TableCell>\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n    </>\n  );\n}\n",
  "src/app/(app)/projects/[id]/layout.tsx": "\n\n'use client'; \n\nimport { notFound, useRouter } from \"next/navigation\";\nimport { Button } from \"@/components/ui/button\";\nimport { ArrowLeft, MoreVertical, Edit, Trash } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { ProjectTabs } from \"./_components/project-tabs\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Progress } from \"@/components/ui/progress\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from \"@/components/ui/alert-dialog\";\nimport { AppStateContext } from \"@/context/app-state-context\";\nimport { differenceInDays, format, parseISO } from \"date-fns\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { ProjectSummaryChart } from \"./_components/project-summary-chart\";\n\nexport default function ProjectDetailLayout({\n    params,\n    children,\n}: {\n    params: { id: string };\n    children: React.ReactNode;\n}) {\n    const { toast } = useToast();\n    const router = useRouter();\n    const appState = useContext(AppStateContext);\n    const [hasMounted, setHasMounted] = useState(false);\n\n    useEffect(() => {\n        setHasMounted(true);\n    }, []);\n\n    if (!appState || !hasMounted) {\n        // This can be a loading spinner\n        return <div>Loading...</div>;\n    }\n\n    const { projects, setProjects, budgetItems, expenses } = appState;\n    const project = projects.find(p => p.id === params.id);\n\n    if (!project) {\n        notFound();\n    }\n\n    const projectBudgetItems = budgetItems.filter(item => item.projectId === project.id);\n    const projectExpenses = expenses.filter(expense => expense.projectId === project.id);\n\n    const totalBudget = projectBudgetItems.reduce((acc, item) => acc + item.originalBudget + item.approvedCOBudget, 0);\n    const spentToDate = projectExpenses.reduce((acc, item) => acc + item.amount, 0);\n    const profitAndLoss = (project.finalBidAmount || 0) - spentToDate;\n    const budgetProgress = totalBudget > 0 ? Math.min(Math.max((spentToDate / totalBudget) * 100, 0), 100) : 0;\n    \n    const startDate = parseISO(project.startDate);\n    const endDate = parseISO(project.endDate);\n    const today = new Date();\n\n    const totalDays = differenceInDays(endDate, startDate);\n    const daysPassed = differenceInDays(today, startDate);\n    const daysRemaining = differenceInDays(endDate, today);\n    const timeProgress = totalDays > 0 ? Math.min(Math.max((daysPassed / totalDays) * 100, 0), 100) : 0;\n    \n    const handleEdit = () => {\n        toast({\n            title: `Project Edit`,\n            description: `The \"${project.name}\" project would be edited.`,\n        });\n    };\n\n    const handleDelete = () => {\n        setProjects(currentProjects => currentProjects.filter(p => p.id !== project.id));\n        toast({\n            title: \"Project Deleted\",\n            description: `The \"${project.name}\" project has been deleted.`,\n            variant: \"destructive\"\n        });\n        router.push('/projects');\n    };\n    \n    const budgetChartData = [\n        { name: \"Spent\", value: spentToDate, fill: \"hsl(var(--primary))\" },\n        { name: \"Remaining\", value: Math.max(0, totalBudget - spentToDate), fill: \"hsl(var(--muted))\" },\n    ];\n    \n    const profitChartData = [\n        { name: \"Cost\", value: spentToDate, fill: \"hsl(var(--chart-3))\" },\n        { name: \"Profit\", value: Math.max(0, profitAndLoss), fill: \"hsl(var(--chart-2))\" },\n    ];\n\n\n    return (\n        <div className=\"flex flex-col gap-6\">\n            <div>\n                 <Button variant=\"ghost\" asChild className=\"mb-4\">\n                    <Link href=\"/projects\">\n                        <ArrowLeft className=\"mr-2 h-4 w-4\" />\n                        Back to Projects\n                    </Link>\n                </Button>\n\n                <div className=\"flex justify-between items-start\">\n                    <div>\n                        <h1 className=\"text-3xl font-bold tracking-tight sm:text-4xl\">\n                            {project.name}\n                        </h1>\n                        <p className=\"text-sm text-muted-foreground\">\n                            {project.projectNumber}\n                        </p>\n                    </div>\n                     <div className=\"flex gap-4 items-center\">\n                        <ProjectSummaryChart \n                            data={budgetChartData}\n                            label=\"Budget\"\n                            metric={`$${spentToDate.toLocaleString()}`}\n                            metricLabel={`${budgetProgress.toFixed(1)}% of $${totalBudget.toLocaleString()}`}\n                        />\n                         <ProjectSummaryChart \n                            data={profitChartData}\n                            label=\"Profit/Loss\"\n                            metric={`$${profitAndLoss.toLocaleString()}`}\n                            metricLabel=\"Bid - Expenses\"\n                        />\n                         <DropdownMenu>\n                            <DropdownMenuTrigger asChild>\n                                <Button variant=\"ghost\" size=\"icon\">\n                                    <MoreVertical />\n                                </Button>\n                            </DropdownMenuTrigger>\n                            <DropdownMenuContent align=\"end\">\n                                 <DropdownMenuItem onClick={handleEdit}>\n                                    <Edit className=\"mr-2 h-4 w-4\" />\n                                    Edit Project\n                                </DropdownMenuItem>\n                                <AlertDialog>\n                                    <AlertDialogTrigger asChild>\n                                        <DropdownMenuItem onSelect={e => e.preventDefault()} className=\"text-destructive\">\n                                            <Trash className=\"mr-2 h-4 w-4\" />\n                                            Delete Project\n                                        </DropdownMenuItem>\n                                    </AlertDialogTrigger>\n                                    <AlertDialogContent>\n                                        <AlertDialogHeader>\n                                        <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                                        <AlertDialogDescription>\n                                            This action cannot be undone. This will permanently delete the project\n                                            &quot;{project.name}&quot;.\n                                        </AlertDialogDescription>\n                                        </AlertDialogHeader>\n                                        <AlertDialogFooter>\n                                        <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                        <AlertDialogAction\n                                            onClick={handleDelete}\n                                            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n                                        >\n                                            Delete\n                                        </AlertDialogAction>\n                                        </AlertDialogFooter>\n                                    </AlertDialogContent>\n                                </AlertDialog>\n                            </DropdownMenuContent>\n                         </DropdownMenu>\n                    </div>\n                </div>\n            </div>\n\n            <Card>\n                <CardContent className=\"pt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6\">\n                    <div className=\"lg:col-span-1\">\n                        <p className=\"text-sm text-muted-foreground\">Final Bid to Customer</p>\n                        <p className=\"text-2xl font-bold\">${(project.finalBidAmount || 0).toLocaleString()}</p>\n                        <p className=\"text-xs text-muted-foreground\">The agreed-upon price</p>\n                    </div>\n                    <div className=\"lg:col-span-1\">\n                        <p className=\"text-sm text-muted-foreground\">Total Budget (cost)</p>\n                        <p className=\"text-2xl font-bold\">${totalBudget.toLocaleString()}</p>\n                        <p className=\"text-xs text-muted-foreground\">Internal cost estimate</p>\n                    </div>\n                     <div className=\"lg:col-span-1\">\n                        <p className=\"text-sm text-muted-foreground\">Spent to Date</p>\n                        <p className=\"text-2xl font-bold\">${spentToDate.toLocaleString()}</p>\n                        <p className=\"text-xs text-muted-foreground\">{budgetProgress.toFixed(1)}% of Budget</p>\n                    </div>\n                     <div className=\"lg:col-span-1\">\n                        <p className=\"text-sm text-muted-foreground\">Profit/Loss</p>\n                        <p className=\"text-2xl font-bold\">${profitAndLoss.toLocaleString()}</p>\n                        <p className=\"text-xs text-muted-foreground\">Bid - Spent</p>\n                    </div>\n\n                    <div className=\"space-y-4 lg:col-span-1\">\n                        <div>\n                            <p className=\"text-sm text-muted-foreground\">\n                                {totalDays} Total Days ({format(endDate, 'MMM d, yyyy')})\n                            </p>\n                            <Progress value={timeProgress} className=\"h-2 mt-1\" />\n                            <div className=\"flex justify-between text-xs text-muted-foreground mt-1\">\n                            <span>{daysPassed > 0 ? `${daysPassed} days passed` : 'Starting soon'}</span>\n                            <span>{daysRemaining > 0 ? `${daysRemaining} days left` : 'Completed'}</span>\n                            </div>\n                        </div>\n                         <div>\n                            <p className=\"text-sm text-muted-foreground\">\n                                Budget Status\n                            </p>\n                            <Progress value={budgetProgress} className=\"h-2 mt-1\" />\n                            <div className=\"flex justify-between text-xs text-muted-foreground mt-1\">\n                            <span>${spentToDate.toLocaleString()} spent</span>\n                            <span>${(totalBudget - spentToDate).toLocaleString()} left</span>\n                            </div>\n                        </div>\n                    </div>\n                </CardContent>\n            </Card>\n\n            <div>\n                <ProjectTabs projectId={project.id} />\n                <div className=\"mt-6\">{children}</div>\n            </div>\n        </div>\n    );\n}\n",
  "src/app/(app)/projects/[id]/page.tsx": "import { redirect } from 'next/navigation';\n\n// This remains a server component\nexport default function Page({ params }: { params: { id: string } }) {\n  redirect(`/projects/${params.id}/reports`);\n}\n",
  "src/app/(app)/projects/_components/add-project-dialog.tsx": "\n\n'use client';\n\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { useToast } from '@/hooks/use-toast';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { cn } from '@/lib/utils';\nimport { CalendarIcon, Upload } from 'lucide-react';\nimport { Calendar } from '@/components/ui/calendar';\nimport { format } from 'date-fns';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { useContext, useEffect, useState } from 'react';\nimport { AppStateContext } from '@/context/app-state-context';\nimport type { Project } from '@/lib/types';\nimport Image from 'next/image';\n\nconst formSchema = z.object({\n  name: z.string().min(1, 'Project name is required.'),\n  client: z.string().min(1, 'Client name is required.'),\n  projectImage: z.any().optional(),\n  addressStreet: z.string().optional(),\n  city: z.string().optional(),\n  zip: z.string().optional(),\n  description: z.string().min(10, 'Description must be at least 10 characters.'),\n  status: z.enum(['Planning', 'In Progress', 'Completed']),\n  progress: z.coerce.number().min(0).max(100),\n  startDate: z.date({ required_error: 'Please select a start date.' }),\n  endDate: z.date({ required_error: 'Please select an end date.' }),\n  revisedContract: z.coerce.number().min(0, \"Contract amount must be a positive number.\"),\n  finalBidAmount: z.coerce.number().min(0, \"Final bid amount must be a positive number.\"),\n}).refine(data => data.endDate >= data.startDate, {\n    message: \"End date cannot be before start date.\",\n    path: [\"endDate\"],\n});\n\ntype AddProjectFormValues = z.infer<typeof formSchema>;\n\nexport function AddEditProjectDialog({\n  open,\n  onOpenChange,\n  project,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  project: Project | null;\n}) {\n  const { toast } = useToast();\n  const appState = useContext(AppStateContext);\n  const isEditing = !!project;\n  const [imagePreview, setImagePreview] = useState<string | null>(null);\n\n\n  const form = useForm<AddProjectFormValues>({\n    resolver: zodResolver(formSchema),\n  });\n\n  useEffect(() => {\n    if (open) {\n        if (isEditing && project) {\n            form.reset({\n                name: project.name,\n                client: project.ownerName,\n                addressStreet: project.addressStreet,\n                city: project.city,\n                zip: project.zip,\n                description: project.description,\n                status: project.status,\n                progress: project.percentComplete,\n                startDate: new Date(project.startDate),\n                endDate: new Date(project.endDate),\n                revisedContract: project.revisedContract,\n                finalBidAmount: project.finalBidAmount,\n            });\n            setImagePreview(project.imageUrl);\n        } else {\n            form.reset({\n                name: '',\n                client: '',\n                projectImage: undefined,\n                addressStreet: '',\n                city: '',\n                zip: '',\n                description: '',\n                status: 'Planning',\n                progress: 0,\n                revisedContract: 0,\n                finalBidAmount: 0,\n            });\n            setImagePreview(null);\n        }\n    }\n  }, [project, isEditing, open, form]);\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setImagePreview(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n      form.setValue('projectImage', event.target.files);\n    }\n  };\n\n  const onSubmit = async (data: AddProjectFormValues) => {\n    if (!appState) return;\n\n    let imageUrl = project?.imageUrl || 'https://picsum.photos/seed/default/600/400';\n    if (data.projectImage && data.projectImage[0]) {\n      const file = data.projectImage[0] as File;\n      imageUrl = await new Promise((resolve) => {\n        const reader = new FileReader();\n        reader.onload = (e) => resolve(e.target?.result as string);\n        reader.readAsDataURL(file);\n      });\n    }\n\n    const projectData: Omit<Project, 'id'> = {\n      projectNumber: isEditing && project ? project.projectNumber : `2024-${String(appState.projects.length + 1).padStart(3, '0')}`,\n      name: data.name,\n      ownerName: data.client,\n      addressStreet: data.addressStreet || '',\n      city: data.city || '',\n      zip: data.zip || '',\n      description: data.description,\n      status: data.status,\n      percentComplete: data.progress,\n      startDate: format(data.startDate, 'yyyy-MM-dd'),\n      endDate: format(data.endDate, 'yyyy-MM-dd'),\n      revisedContract: data.revisedContract,\n      finalBidAmount: data.finalBidAmount,\n      imageUrl: imageUrl,\n      imageHint: 'custom project',\n    };\n    \n    if (isEditing && project) {\n        appState.setProjects(current => current.map(p => p.id === project.id ? { ...project, ...projectData } : p));\n    } else {\n        appState.setProjects(current => [...current, { id: crypto.randomUUID(), ...projectData }]);\n    }\n    \n    toast({\n      title: `Project ${isEditing ? 'Updated' : 'Created'}`,\n      description: `Successfully ${isEditing ? 'updated' : 'created'} project: ${data.name}.`,\n    });\n    onOpenChange(false);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle>{isEditing ? 'Edit Project' : 'Create New Project'}</DialogTitle>\n          <DialogDescription>\n            {isEditing ? 'Update the details for this project.' : 'Fill out the details below to create a new construction project.'}\n          </DialogDescription>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4 max-h-[70vh] overflow-y-auto pr-6 pl-1\">\n             <FormField\n                control={form.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Project Name</FormLabel>\n                    <FormControl>\n                      <Input placeholder=\"e.g., Riverfront Residences\" {...field} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n            <FormField\n              control={form.control}\n              name=\"projectImage\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Project Image</FormLabel>\n                  <FormControl>\n                     <div className=\"flex items-center gap-4\">\n                        <div className=\"flex h-24 w-24 items-center justify-center rounded-md border border-dashed bg-secondary\">\n                            {imagePreview ? (\n                                <Image src={imagePreview} alt=\"Project Preview\" width={96} height={96} className=\"h-full w-full rounded-md object-cover\" />\n                            ) : (\n                                <Upload className=\"h-8 w-8 text-muted-foreground\" />\n                            )}\n                        </div>\n                        <div className='flex-1'>\n                             <Input \n                                type=\"file\" \n                                accept=\"image/*\" \n                                onChange={handleFileChange}\n                                className='w-full'\n                             />\n                             <p className='text-xs text-muted-foreground mt-1'>Select an image file to upload.</p>\n                        </div>\n                    </div>\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n             <FormField\n                control={form.control}\n                name=\"client\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Client</FormLabel>\n                    <FormControl>\n                      <Input placeholder=\"e.g., ABC Development Corp\" {...field} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <FormField\n                    control={form.control}\n                    name=\"addressStreet\"\n                    render={({ field }) => (\n                    <FormItem className='col-span-3'>\n                        <FormLabel>Street Address</FormLabel>\n                        <FormControl>\n                        <Input placeholder=\"e.g., 123 Main St\" {...field} />\n                        </FormControl>\n                        <FormMessage />\n                    </FormItem>\n                    )}\n                />\n                <FormField\n                    control={form.control}\n                    name=\"city\"\n                    render={({ field }) => (\n                    <FormItem className='col-span-2'>\n                        <FormLabel>City</FormLabel>\n                        <FormControl>\n                        <Input placeholder=\"e.g., Metropolis\" {...field} />\n                        </FormControl>\n                        <FormMessage />\n                    </FormItem>\n                    )}\n                />\n                <FormField\n                    control={form.control}\n                    name=\"zip\"\n                    render={({ field }) => (\n                    <FormItem>\n                        <FormLabel>Zip Code</FormLabel>\n                        <FormControl>\n                        <Input placeholder=\"e.g., 12345\" {...field} />\n                        </FormControl>\n                        <FormMessage />\n                    </FormItem>\n                    )}\n                />\n            </div>\n            \n            <FormField\n              control={form.control}\n              name=\"description\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Description</FormLabel>\n                  <FormControl>\n                    <Textarea placeholder=\"Project details and scope...\" rows={4} {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n             <FormField\n              control={form.control}\n              name=\"revisedContract\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Internal Contract Amount</FormLabel>\n                  <FormControl>\n                    <Input type=\"number\" placeholder=\"0.00\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            \n            <FormField\n              control={form.control}\n              name=\"finalBidAmount\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Final Bid to Customer</FormLabel>\n                  <FormControl>\n                    <Input type=\"number\" placeholder=\"0.00\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"status\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Status</FormLabel>\n                      <Select onValueChange={field.onChange} value={field.value}>\n                        <FormControl>\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Select a status\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"Planning\">Planning</SelectItem>\n                          <SelectItem value=\"In Progress\">In Progress</SelectItem>\n                          <SelectItem value=\"Completed\">Completed</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                 <FormField\n                  control={form.control}\n                  name=\"progress\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Progress (%)</FormLabel>\n                      <FormControl>\n                        <Input type=\"number\" placeholder=\"0\" {...field} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n            </div>\n\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n               <FormField\n                control={form.control}\n                name=\"startDate\"\n                render={({ field }) => (\n                  <FormItem className=\"flex flex-col\">\n                    <FormLabel>Start Date</FormLabel>\n                    <Popover>\n                      <PopoverTrigger asChild>\n                        <FormControl>\n                          <Button\n                            variant={'outline'}\n                            className={cn(\n                              'w-full pl-3 text-left font-normal',\n                              !field.value && 'text-muted-foreground'\n                            )}\n                          >\n                            {field.value ? (\n                              format(field.value, 'PPP')\n                            ) : (\n                              <span>Pick a date</span>\n                            )}\n                            <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\n                          </Button>\n                        </FormControl>\n                      </PopoverTrigger>\n                      <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                        <Calendar\n                          mode=\"single\"\n                          selected={field.value}\n                          onSelect={field.onChange}\n                          initialFocus\n                        />\n                      </PopoverContent>\n                    </Popover>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n               <FormField\n                control={form.control}\n                name=\"endDate\"\n                render={({ field }) => (\n                  <FormItem className=\"flex flex-col\">\n                    <FormLabel>End Date</FormLabel>\n                    <Popover>\n                      <PopoverTrigger asChild>\n                        <FormControl>\n                          <Button\n                            variant={'outline'}\n                            className={cn(\n                              'w-full pl-3 text-left font-normal',\n                              !field.value && 'text-muted-foreground'\n                            )}\n                          >\n                            {field.value ? (\n                              format(field.value, 'PPP')\n                            ) : (\n                              <span>Pick a date</span>\n                            )}\n                            <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\n                          </Button>\n                        </FormControl>\n                      </PopoverTrigger>\n                      <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                        <Calendar\n                          mode=\"single\"\n                          selected={field.value}\n                          onSelect={field.onChange}\n                          initialFocus\n                        />\n                      </PopoverContent>\n                    </Popover>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n            \n            <DialogFooter className=\"pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                onClick={() => onOpenChange(false)}\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\">{isEditing ? 'Save Changes' : 'Create Project'}</Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
  "src/app/(app)/projects/page.tsx": "\n\n'use client';\n\nimport { useState, useContext, useEffect, useMemo } from 'react';\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Edit, MoreVertical, PlusCircle, Trash, Calendar, DollarSign, PiggyBank, Target, TrendingUp, Wallet } from \"lucide-react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { AddEditProjectDialog } from './_components/add-project-dialog';\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from '@/components/ui/dropdown-menu';\nimport { useToast } from '@/hooks/use-toast';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\nimport { AppStateContext } from '@/context/app-state-context';\nimport type { Project } from '@/lib/types';\nimport { differenceInDays, parseISO } from 'date-fns';\n\n\nexport default function ProjectsPage() {\n    const [dialogOpen, setDialogOpen] = useState(false);\n    const [selectedProject, setSelectedProject] = useState<Project | null>(null);\n    const appState = useContext(AppStateContext);\n    const { toast } = useToast();\n    const [hasMounted, setHasMounted] = useState(false);\n\n    useEffect(() => {\n        setHasMounted(true);\n    }, []);\n\n    const projectData = useMemo(() => {\n        if (!appState) return [];\n        const { projects, budgetItems, expenses } = appState;\n        \n        return projects.map(project => {\n            const projectBudgetItems = budgetItems.filter(item => item.projectId === project.id);\n            const projectExpenses = expenses.filter(expense => expense.projectId === project.id);\n            \n            const totalBudget = projectBudgetItems.reduce((acc, item) => acc + item.originalBudget + item.approvedCOBudget, 0);\n            const spentSoFar = projectExpenses.reduce((acc, item) => acc + item.amount, 0);\n            const remainingBudget = totalBudget - spentSoFar;\n            const profitLoss = (project.finalBidAmount || 0) - spentSoFar;\n            const budgetUsedPercent = totalBudget > 0 ? Math.min((spentSoFar / totalBudget) * 100, 100) : 0;\n            \n            const now = new Date();\n            const startDate = parseISO(project.startDate);\n            const endDate = parseISO(project.endDate);\n            const daysIn = differenceInDays(now, startDate);\n            const daysLeft = differenceInDays(endDate, now);\n            \n            return {\n                ...project,\n                totalBudget,\n                spentSoFar,\n                remainingBudget,\n                profitLoss,\n                budgetUsedPercent,\n                daysIn: daysIn > 0 ? daysIn : 0,\n                daysLeft: daysLeft > 0 ? daysLeft : 0,\n            };\n        });\n\n    }, [appState]);\n\n    if (!appState || !hasMounted) {\n        return <div>Loading...</div>; // Or some other loading state/skeleton\n    }\n    \n    const { setProjects } = appState;\n\n    const statusVariant = {\n        'In Progress': 'default',\n        'Planning': 'secondary',\n        'Completed': 'outline',\n    } as const;\n    \n    const handleNewProject = () => {\n        setSelectedProject(null);\n        setDialogOpen(true);\n    };\n\n    const handleEdit = (project: Project) => {\n        setSelectedProject(project);\n        setDialogOpen(true);\n    };\n    \n    const handleDelete = (projectId: string, projectName: string) => {\n        setProjects(current => current.filter(p => p.id !== projectId));\n        toast({\n            title: \"Project Deleted\",\n            description: `Project \"${projectName}\" has been removed.`,\n            variant: \"destructive\",\n        });\n    };\n\n    return (\n        <>\n            <AddEditProjectDialog \n                open={dialogOpen} \n                onOpenChange={setDialogOpen}\n                project={selectedProject}\n            />\n            <div className=\"flex flex-col gap-6\">\n                <div className=\"flex items-center justify-between\">\n                    <div>\n                        <h1 className=\"text-3xl font-bold tracking-tight\">Projects</h1>\n                        <p className=\"text-muted-foreground\">\n                            Manage all your construction projects from start to finish.\n                        </p>\n                    </div>\n                    <Button onClick={handleNewProject}>\n                        <PlusCircle className=\"mr-2\" />\n                        New Project\n                    </Button>\n                </div>\n                <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n                    {projectData.map(project => (\n                        <Card key={project.id} className=\"flex flex-col\">\n                            <CardHeader className=\"p-0\">\n                                <Link href={`/projects/${project.id}`}>\n                                    <div className=\"relative h-48 w-full\">\n                                        <Image\n                                            src={project.imageUrl}\n                                            alt={project.name}\n                                            fill\n                                            className=\"rounded-t-lg object-cover\"\n                                            data-ai-hint={project.imageHint}\n                                        />\n                                    </div>\n                                </Link>\n                            </CardHeader>\n                            <CardContent className=\"flex-grow p-6\">\n                                <div className=\"flex items-start justify-between\">\n                                    <Link href={`/projects/${project.id}`}>\n                                        <CardTitle className=\"mb-2 text-xl hover:underline\">{project.name}</CardTitle>\n                                    </Link>\n                                    <div className=\"flex items-center gap-1\">\n                                        <Badge variant={statusVariant[project.status]}>{project.status}</Badge>\n                                        <DropdownMenu>\n                                            <DropdownMenuTrigger asChild>\n                                                <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\n                                                    <MoreVertical className=\"h-4 w-4\" />\n                                                </Button>\n                                            </DropdownMenuTrigger>\n                                            <DropdownMenuContent align=\"end\">\n                                                <DropdownMenuItem onClick={() => handleEdit(project)}>\n                                                    <Edit className=\"mr-2 h-4 w-4\" />\n                                                    Edit\n                                                </DropdownMenuItem>\n                                                <AlertDialog>\n                                                    <AlertDialogTrigger asChild>\n                                                        <DropdownMenuItem onSelect={(e) => e.preventDefault()} className=\"text-destructive\">\n                                                            <Trash className=\"mr-2 h-4 w-4\" />\n                                                            Delete\n                                                        </DropdownMenuItem>\n                                                    </AlertDialogTrigger>\n                                                    <AlertDialogContent>\n                                                        <AlertDialogHeader>\n                                                            <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                                                            <AlertDialogDescription>\n                                                                This action cannot be undone. This will permanently delete the project\n                                                                &quot;{project.name}&quot;.\n                                                            </AlertDialogDescription>\n                                                        </AlertDialogHeader>\n                                                        <AlertDialogFooter>\n                                                            <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                                            <AlertDialogAction\n                                                                onClick={() => handleDelete(project.id, project.name)}\n                                                                className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n                                                            >\n                                                                Delete\n                                                            </AlertDialogAction>\n                                                        </AlertDialogFooter>\n                                                    </AlertDialogContent>\n                                                </AlertDialog>\n                                            </DropdownMenuContent>\n                                        </DropdownMenu>\n                                    </div>\n                                </div>\n                                <CardDescription className=\"line-clamp-2\">{project.description}</CardDescription>\n                            </CardContent>\n                            <CardFooter className=\"flex flex-col items-start gap-4\">\n                                <div className=\"w-full\">\n                                    <div className=\"flex justify-between text-sm text-muted-foreground mb-1\">\n                                        <span>Budget Status</span>\n                                        <span>{project.budgetUsedPercent.toFixed(1)}% Used</span>\n                                    </div>\n                                    <Progress value={project.budgetUsedPercent} aria-label={`${project.budgetUsedPercent}% of budget used`} />\n                                </div>\n                                <div className=\"w-full space-y-2 text-sm text-muted-foreground\">\n                                     <div className=\"flex items-center justify-between gap-2\">\n                                        <div className=\"flex items-center gap-1.5\">\n                                            <DollarSign className=\"size-4\" />\n                                            <span>Final Bid:</span>\n                                        </div>\n                                        <span className=\"font-medium text-foreground\">${(project.finalBidAmount || 0).toLocaleString()}</span>\n                                    </div>\n                                     <div className=\"flex items-center justify-between gap-2\">\n                                         <div className=\"flex items-center gap-1.5\">\n                                            <Target className=\"size-4\" />\n                                            <span>Total Budget (cost):</span>\n                                        </div>\n                                        <span className=\"font-medium text-foreground\">${project.totalBudget.toLocaleString()}</span>\n                                    </div>\n                                    <div className=\"flex items-center justify-between gap-2\">\n                                        <div className=\"flex items-center gap-1.5\">\n                                            <TrendingUp className=\"size-4\" />\n                                            <span>Spent to Date:</span>\n                                        </div>\n                                        <span className=\"font-medium text-foreground\">${project.spentSoFar.toLocaleString()}</span>\n                                    </div>\n                                    <div className=\"flex items-center justify-between gap-2\">\n                                         <div className=\"flex items-center gap-1.5\">\n                                            <Wallet className=\"size-4\" />\n                                            <span>Remaining Budget:</span>\n                                        </div>\n                                        <span className=\"font-medium text-foreground\">${project.remainingBudget.toLocaleString()}</span>\n                                    </div>\n                                     <div className=\"flex items-center justify-between gap-2\">\n                                         <div className=\"flex items-center gap-1.5\">\n                                            <PiggyBank className=\"size-4\" />\n                                            <span>Profit / Loss:</span>\n                                        </div>\n                                        <span className=\"font-medium text-foreground\">${project.profitLoss.toLocaleString()}</span>\n                                    </div>\n                                    <div className=\"flex items-center justify-between gap-2 pt-1 border-t mt-2\">\n                                         <div className=\"flex items-center gap-1.5\">\n                                            <Calendar className=\"size-4\" />\n                                            <span>Timeline:</span>\n                                        </div>\n                                        <span className=\"font-medium text-foreground\">{project.daysIn} days in, {project.daysLeft} days left</span>\n                                    </div>\n                                </div>\n                            </CardFooter>\n                        </Card>\n                    ))}\n                </div>\n            </div>\n        </>\n    );\n}\n",
  "src/app/(app)/settings/page.tsx": "\n\n'use client';\n\nimport { useState, useContext, useEffect } from \"react\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n  CardDescription\n} from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { LogOut, MoreHorizontal, User, Laptop, Smartphone, TriangleAlert, Download } from \"lucide-react\";\nimport { useTheme } from \"next-themes\";\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\"\nimport { useToast } from \"@/hooks/use-toast\";\nimport { AppStateContext } from \"@/context/app-state-context\";\n\n\nconst notificationItems = [\n    { id: 'task-assignments', label: 'Task assignments and updates' },\n    { id: 'project-milestones', label: 'Project milestones' },\n    { id: 'document-uploads', label: 'Document uploads and updates' },\n    { id: 'comments-mentions', label: 'Comments and mentions' },\n    { id: 'budget-approvals', label: 'Budget approvals and changes' },\n];\n\nexport default function SettingsPage() {\n  const { theme, setTheme } = useTheme();\n  const { toast } = useToast();\n  const appState = useContext(AppStateContext);\n\n  // Profile State\n  const [photoUrl, setPhotoUrl] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [phone, setPhone] = useState(\"(555) 123-4567\");\n  const [jobTitle, setJobTitle] = useState(\"Admin\");\n  const [department, setDepartment] = useState(\"Construction\");\n  const [bio, setBio] = useState(\"\");\n\n  // Company State - Initialize from context but allow local edits\n  const [companyName, setCompanyName] = useState(\"\");\n  const [companyLogoUrl, setCompanyLogoUrl] = useState(\"\");\n  const [industry, setIndustry] = useState(\"Construction\");\n  const [companySize, setCompanySize] = useState(\"51-200\");\n  const [address, setAddress] = useState(\"123 Construction Avenue\");\n  const [city, setCity] = useState(\"New York\");\n  const [state, setState] = useState(\"NY\");\n  const [zipCode, setZipCode] = useState(\"10001\");\n  const [companyPhone, setCompanyPhone] = useState(\"(555) 987-6543\");\n  const [companyWebsite, setCompanyWebsite] = useState(\"https://www.fancybuilders.com\");\n\n  useEffect(() => {\n    if (appState) {\n        setName(appState.userName);\n        setPhotoUrl(appState.userAvatarUrl);\n        setEmail(appState.userEmail);\n        setCompanyName(appState.companyName);\n        setCompanyLogoUrl(appState.companyLogoUrl);\n    }\n  }, [appState]);\n\n  if (!appState) {\n    return <div>Loading...</div>\n  }\n\n  const {\n      userName,\n      setUserName,\n      setUserAvatarUrl,\n      userEmail,\n      setUserEmail,\n      setCompanyName: setGlobalCompanyName,\n      setCompanyLogoUrl: setGlobalCompanyLogoUrl,\n  } = appState;\n\n  const handlePhotoChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setPhotoUrl(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleLogoChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const result = e.target?.result as string;\n        setCompanyLogoUrl(result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSaveChanges = () => {\n    setUserName(name);\n    setUserAvatarUrl(photoUrl);\n    setUserEmail(email);\n    toast({\n      title: \"Changes Saved\",\n      description: \"Your profile information has been updated.\",\n    });\n  };\n  \n  const handleCompanySaveChanges = () => {\n    setGlobalCompanyName(companyName);\n    setGlobalCompanyLogoUrl(companyLogoUrl);\n    toast({\n      title: \"Changes Saved\",\n      description: \"Your company information has been updated.\",\n    });\n  };\n\n  const nameParts = name.split(' ');\n  const firstName = nameParts[0] || \"\";\n  const lastName = nameParts.slice(1).join(' ') || \"\";\n\n  const handleNameChange = (part: 'first' | 'last', value: string) => {\n    if (part === 'first') {\n        setName(`${value} ${lastName}`);\n    } else {\n        setName(`${firstName} ${value}`);\n    }\n  };\n\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">Settings</h1>\n        <p className=\"text-muted-foreground\">Welcome back, {userName.split(' ')[0]}</p>\n      </div>\n\n      <Tabs defaultValue=\"profile\">\n        <TabsList>\n          <TabsTrigger value=\"profile\">Profile</TabsTrigger>\n          <TabsTrigger value=\"account\">Account</TabsTrigger>\n          <TabsTrigger value=\"notifications\">Notifications</TabsTrigger>\n          <TabsTrigger value=\"company\">Company</TabsTrigger>\n          <TabsTrigger value=\"security\">Security</TabsTrigger>\n          <TabsTrigger value=\"advanced\">Advanced</TabsTrigger>\n        </TabsList>\n        <TabsContent value=\"profile\" className=\"mt-6\">\n          <Card>\n            <CardHeader></CardHeader>\n            <CardContent>\n              <div className=\"flex flex-col md:flex-row gap-8\">\n                <div className=\"flex flex-col items-center gap-4 md:w-1/4\">\n                  <Avatar className=\"h-32 w-32\">\n                    <AvatarImage src={photoUrl} />\n                    <AvatarFallback>\n                        <User className=\"h-16 w-16\" />\n                    </AvatarFallback>\n                  </Avatar>\n                  <Input id=\"photo-upload\" type=\"file\" className=\"hidden\" onChange={handlePhotoChange} accept=\"image/*\" />\n                  <Button variant=\"outline\" asChild>\n                    <Label htmlFor=\"photo-upload\" className=\"cursor-pointer\">Change Photo</Label>\n                  </Button>\n                </div>\n                <div className=\"flex-1 space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"firstName\">First Name</Label>\n                      <Input id=\"firstName\" value={firstName} onChange={(e) => handleNameChange('first', e.target.value)} />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"lastName\">Last Name</Label>\n                      <Input id=\"lastName\" value={lastName} onChange={(e) => handleNameChange('last', e.target.value)} />\n                    </div>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"email\">Email</Label>\n                    <Input id=\"email\" type=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"phone\">Phone Number</Label>\n                    <Input id=\"phone\" value={phone} onChange={(e) => setPhone(e.target.value)} />\n                  </div>\n                   <div className=\"space-y-2\">\n                    <Label htmlFor=\"jobTitle\">Job Title</Label>\n                    <Input id=\"jobTitle\" value={jobTitle} onChange={(e) => setJobTitle(e.target.value)} />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"department\">Department</Label>\n                    <Input id=\"department\" value={department} onChange={(e) => setDepartment(e.target.value)} />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"bio\">Bio</Label>\n                    <Textarea\n                      id=\"bio\"\n                      placeholder=\"A brief description about yourself\"\n                      rows={3}\n                      value={bio}\n                      onChange={(e) => setBio(e.target.value)}\n                    />\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n            <CardFooter className=\"border-t px-6 py-4 justify-end\">\n                <Button onClick={handleSaveChanges}>Save Changes</Button>\n            </CardFooter>\n          </Card>\n        </TabsContent>\n        <TabsContent value=\"account\" className=\"mt-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Account Preferences</CardTitle>\n                <CardDescription>Manage your account settings</CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <Label>Language</Label>\n                    <p className=\"text-sm text-muted-foreground\">Select your preferred language</p>\n                  </div>\n                  <Select defaultValue=\"en\">\n                    <SelectTrigger className=\"w-[180px]\">\n                      <SelectValue placeholder=\"Select language\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"en\">English</SelectItem>\n                      <SelectItem value=\"es\">EspaÃ±ol</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <Label>Time Zone</Label>\n                    <p className=\"text-sm text-muted-foreground\">Set your local time zone</p>\n                  </div>\n                  <Select defaultValue=\"est\">\n                    <SelectTrigger className=\"w-[180px]\">\n                      <SelectValue placeholder=\"Select time zone\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"est\">America/New_York (EST)</SelectItem>\n                      <SelectItem value=\"cst\">America/Chicago (CST)</SelectItem>\n                      <SelectItem value=\"mst\">America/Denver (MST)</SelectItem>\n                      <SelectItem value=\"pst\">America/Los_Angeles (PST)</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <Label>Date Format</Label>\n                    <p className=\"text-sm text-muted-foreground\">Choose how dates are displayed</p>\n                  </div>\n                   <Select defaultValue=\"mmddyyyy\">\n                    <SelectTrigger className=\"w-[180px]\">\n                      <SelectValue placeholder=\"Select date format\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"mmddyyyy\">MM/DD/YYYY</SelectItem>\n                      <SelectItem value=\"ddmmyyyy\">DD/MM/YYYY</SelectItem>\n                      <SelectItem value=\"yyyymmdd\">YYYY-MM-DD</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                 <div className=\"flex items-center justify-between\">\n                  <div>\n                    <Label>Theme</Label>\n                    <p className=\"text-sm text-muted-foreground\">Choose your interface theme</p>\n                  </div>\n                   <Select value={theme} onValueChange={setTheme}>\n                    <SelectTrigger className=\"w-[180px]\">\n                      <SelectValue placeholder=\"Select theme\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"light\">Light</SelectItem>\n                      <SelectItem value=\"dark\">Dark</SelectItem>\n                      <SelectItem value=\"system\">System</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </CardContent>\n              <CardFooter className=\"border-t px-6 py-4 justify-end\">\n                <Button>Save Preferences</Button>\n              </CardFooter>\n            </Card>\n        </TabsContent>\n         <TabsContent value=\"notifications\" className=\"mt-6\">\n             <Card>\n                <CardHeader>\n                    <CardTitle>Notification Preferences</CardTitle>\n                    <CardDescription>Manage how you receive notifications</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-8\">\n                    <div>\n                        <h3 className=\"mb-4 text-lg font-medium\">Email Notifications</h3>\n                        <div className=\"space-y-4\">\n                            {notificationItems.map((item) => (\n                                <div key={`email-${item.id}`} className=\"flex items-center justify-between rounded-lg border p-4\">\n                                    <Label htmlFor={`email-${item.id}`}>{item.label}</Label>\n                                    <Switch id={`email-${item.id}`} defaultChecked />\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n\n                    <Separator />\n\n                    <div>\n                        <h3 className=\"mb-4 text-lg font-medium\">In-App Notifications</h3>\n                        <div className=\"space-y-4\">\n                             {notificationItems.map((item) => (\n                                <div key={`in-app-${item.id}`} className=\"flex items-center justify-between rounded-lg border p-4\">\n                                    <Label htmlFor={`in-app-${item.id}`}>{item.label}</Label>\n                                    <Switch id={`in-app-${item.id}`} defaultChecked />\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                    \n                    <Separator />\n\n                    <div>\n                         <h3 className=\"mb-4 text-lg font-medium\">Frequency</h3>\n                         <div className=\"flex items-center justify-between rounded-lg border p-4\">\n                            <Label>Email digest frequency</Label>\n                             <Select defaultValue=\"daily\">\n                                <SelectTrigger className=\"w-[180px]\">\n                                    <SelectValue placeholder=\"Select frequency\" />\n                                </SelectTrigger>\n                                <SelectContent>\n                                    <SelectItem value=\"daily\">Daily</SelectItem>\n                                    <SelectItem value=\"weekly\">Weekly</SelectItem>\n                                    <SelectItem value=\"never\">Never</SelectItem>\n                                </SelectContent>\n                            </Select>\n                         </div>\n                    </div>\n\n                </CardContent>\n                 <CardFooter className=\"border-t px-6 py-4 justify-end\">\n                    <Button>Save Notification Settings</Button>\n                </CardFooter>\n             </Card>\n        </TabsContent>\n         <TabsContent value=\"company\" className=\"mt-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Company Information</CardTitle>\n                <CardDescription>Manage your company details and preferences</CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"space-y-2\">\n                  <Label>Company Logo</Label>\n                  <div className=\"flex items-center gap-4\">\n                    <Avatar className=\"h-20 w-20 rounded-md\">\n                        <AvatarImage src={companyLogoUrl} />\n                        <AvatarFallback>\n                            <User className=\"h-10 w-10\" />\n                        </AvatarFallback>\n                    </Avatar>\n                    <Input id=\"logo-upload\" type=\"file\" className=\"hidden\" accept=\"image/*\" onChange={handleLogoChange} />\n                    <Button variant=\"outline\" asChild>\n                        <Label htmlFor=\"logo-upload\" className=\"cursor-pointer\">Change Logo</Label>\n                    </Button>\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"companyName\">Company Name</Label>\n                  <Input id=\"companyName\" value={companyName} onChange={(e) => setCompanyName(e.target.value)} />\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div className=\"space-y-2\">\n                        <Label htmlFor=\"industry\">Industry</Label>\n                        <Input id=\"industry\" value={industry} onChange={(e) => setIndustry(e.target.value)} />\n                    </div>\n                    <div className=\"space-y-2\">\n                        <Label htmlFor=\"companySize\">Company Size</Label>\n                        <Select value={companySize} onValueChange={setCompanySize}>\n                            <SelectTrigger id=\"companySize\">\n                                <SelectValue placeholder=\"Select company size\" />\n                            </SelectTrigger>\n                            <SelectContent>\n                                <SelectItem value=\"1-10\">1-10 employees</SelectItem>\n                                <SelectItem value=\"11-50\">11-50 employees</SelectItem>\n                                <SelectItem value=\"51-200\">51-200 employees</SelectItem>\n                                <SelectItem value=\"201-500\">201-500 employees</SelectItem>\n                                <SelectItem value=\"500+\">500+ employees</SelectItem>\n                            </SelectContent>\n                        </Select>\n                    </div>\n                </div>\n                <div className=\"space-y-2\">\n                    <Label htmlFor=\"address\">Address</Label>\n                    <Input id=\"address\" value={address} onChange={(e) => setAddress(e.target.value)} />\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                    <div className=\"space-y-2 col-span-2\">\n                        <Label htmlFor=\"city\">City</Label>\n                        <Input id=\"city\" value={city} onChange={(e) => setCity(e.target.value)} />\n                    </div>\n                    <div className=\"space-y-2\">\n                        <Label htmlFor=\"state\">State</Label>\n                        <Input id=\"state\" value={state} onChange={(e) => setState(e.target.value)} />\n                    </div>\n                    <div className=\"space-y-2\">\n                        <Label htmlFor=\"zipCode\">Zip Code</Label>\n                        <Input id=\"zipCode\" value={zipCode} onChange={(e) => setZipCode(e.target.value)} />\n                    </div>\n                </div>\n                <div className=\"space-y-2\">\n                    <Label htmlFor=\"companyPhone\">Phone</Label>\n                    <Input id=\"companyPhone\" value={companyPhone} onChange={(e) => setCompanyPhone(e.target.value)} />\n                </div>\n                <div className=\"space-y-2\">\n                    <Label htmlFor=\"companyWebsite\">Website</Label>\n                    <Input id=\"companyWebsite\" value={companyWebsite} onChange={(e) => setCompanyWebsite(e.target.value)} />\n                </div>\n              </CardContent>\n              <CardFooter className=\"border-t px-6 py-4 justify-end\">\n                <Button onClick={handleCompanySaveChanges}>Save Company Information</Button>\n              </CardFooter>\n            </Card>\n        </TabsContent>\n        <TabsContent value=\"security\" className=\"mt-6\">\n            <Card>\n                <CardHeader>\n                    <CardTitle>Security Settings</CardTitle>\n                    <CardDescription>Manage your password and account security</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-8\">\n                    <div>\n                        <h3 className=\"font-medium text-lg mb-4\">Change Password</h3>\n                        <div className=\"space-y-4\">\n                            <div className=\"space-y-2\">\n                                <Label htmlFor=\"currentPassword\">Current Password</Label>\n                                <Input id=\"currentPassword\" type=\"password\" />\n                            </div>\n                            <div className=\"space-y-2\">\n                                <Label htmlFor=\"newPassword\">New Password</Label>\n                                <Input id=\"newPassword\" type=\"password\" />\n                            </div>\n                            <div className=\"space-y-2\">\n                                <Label htmlFor=\"confirmPassword\">Confirm New Password</Label>\n                                <Input id=\"confirmPassword\" type=\"password\" />\n                            </div>\n                        </div>\n                    </div>\n                     <CardFooter className=\"px-0 pb-0 justify-start\">\n                        <Button>Update Password</Button>\n                    </CardFooter>\n                </CardContent>\n\n                <Separator />\n\n                <CardContent className=\"space-y-8 pt-6\">\n                   <div className=\"flex items-center justify-between rounded-lg border p-4\">\n                        <div>\n                            <h3 className=\"font-medium\">Two-Factor Authentication</h3>\n                            <p className=\"text-sm text-muted-foreground\">\n                                Add an extra layer of security to your account.\n                            </p>\n                        </div>\n                        <Switch id=\"two-factor\" />\n                    </div>\n                </CardContent>\n                \n                 <Separator />\n\n                <CardContent className=\"space-y-4 pt-6\">\n                    <h3 className=\"font-medium text-lg\">Session Management</h3>\n                    <p className=\"text-sm text-muted-foreground\">You're currently signed in on these devices:</p>\n                    <div className=\"space-y-4\">\n                        <div className=\"flex items-center justify-between rounded-lg border p-4\">\n                            <div className=\"flex items-center gap-4\">\n                                <Laptop className=\"h-6 w-6 text-muted-foreground\" />\n                                <div>\n                                    <p className=\"font-medium\">Windows PC - Chrome</p>\n                                    <p className=\"text-sm text-muted-foreground\">New York, USA â¢ Current session</p>\n                                </div>\n                            </div>\n                            <Button variant=\"ghost\" size=\"icon\">\n                                <MoreHorizontal className=\"h-5 w-5\" />\n                                <span className=\"sr-only\">Session options</span>\n                            </Button>\n                        </div>\n                         <div className=\"flex items-center justify-between rounded-lg border p-4\">\n                            <div className=\"flex items-center gap-4\">\n                                <Smartphone className=\"h-6 w-6 text-muted-foreground\" />\n                                <div>\n                                    <p className=\"font-medium\">iPhone 13 - Safari</p>\n                                    <p className=\"text-sm text-muted-foreground\">New York, USA â¢ Last active: 2 hours ago</p>\n                                </div>\n                            </div>\n                            <Button variant=\"ghost\" size=\"icon\">\n                                <MoreHorizontal className=\"h-5 w-5\" />\n                                <span className=\"sr-only\">Session options</span>\n                            </Button>\n                        </div>\n                    </div>\n                </CardContent>\n                 <CardFooter className=\"border-t px-6 py-4\">\n                    <Button variant=\"outline\">\n                        <LogOut className=\"mr-2\" />\n                        Sign out of all devices\n                    </Button>\n                </CardFooter>\n            </Card>\n        </TabsContent>\n        <TabsContent value=\"advanced\" className=\"mt-6\">\n            <Card>\n                <CardHeader>\n                    <CardTitle>Advanced Settings</CardTitle>\n                    <CardDescription>\n                        System administration and data management options\n                    </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-8\">\n                    <div>\n                        <h3 className=\"font-medium text-lg mb-4\">Data Management</h3>\n                        <Alert variant=\"destructive\">\n                            <TriangleAlert className=\"h-4 w-4\" />\n                            <AlertTitle>Reset Project Data</AlertTitle>\n                            <AlertDescription>\n                                <div className=\"flex justify-between items-center\">\n                                    <p>\n                                        This action will permanently delete all project data including budgets, tasks, documents, and photos. User accounts will be preserved.\n                                    </p>\n                                    <AlertDialog>\n                                        <AlertDialogTrigger asChild>\n                                            <Button variant=\"destructive\">Reset All Project Data</Button>\n                                        </AlertDialogTrigger>\n                                        <AlertDialogContent>\n                                            <AlertDialogHeader>\n                                            <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                                            <AlertDialogDescription>\n                                                This action cannot be undone. This will permanently delete all project data from our servers.\n                                            </AlertDialogDescription>\n                                            </AlertDialogHeader>\n                                            <AlertDialogFooter>\n                                            <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                            <AlertDialogAction>Continue</AlertDialogAction>\n                                            </AlertDialogFooter>\n                                        </AlertDialogContent>\n                                    </AlertDialog>\n                                </div>\n                            </AlertDescription>\n                        </Alert>\n                    </div>\n\n                    <div>\n                        <h3 className=\"font-medium text-lg mb-2\">Data Export</h3>\n                        <Card>\n                            <CardContent className=\"flex flex-col items-center justify-center p-6 space-y-4\">\n                               <p className=\"text-sm text-muted-foreground\">Export all your project data for backup or transfer purposes.</p>\n                               <Button variant=\"outline\">\n                                    <Download className=\"mr-2 h-4 w-4\" />\n                                    Export All Data\n                                 </Button>\n                            </CardContent>\n                        </Card>\n                    </div>\n\n                </CardContent>\n            </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n",
  "src/app/(app)/tasks/_components/add-task-dialog.tsx": "\n'use client';\n\nimport { useEffect } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { useToast } from '@/hooks/use-toast';\nimport type { Task, Project, TeamMember } from '@/lib/types';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { cn } from '@/lib/utils';\nimport { CalendarIcon } from 'lucide-react';\nimport { Calendar } from '@/components/ui/calendar';\nimport { format } from 'date-fns';\n\nconst formSchema = z.object({\n  title: z.string().min(1, 'Task title is required.'),\n  projectId: z.string({ required_error: 'Please select a project.' }),\n  status: z.enum(['To Do', 'In Progress', 'Done']),\n  priority: z.enum(['Low', 'Medium', 'High']),\n  assigneeId: z.string().optional(),\n  dueDate: z.date().optional(),\n});\n\ntype FormValues = z.infer<typeof formSchema>;\n\nexport function AddTaskDialog({\n  open,\n  onOpenChange,\n  onSave,\n  task,\n  projects,\n  teamMembers,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSave: (task: Task) => void;\n  task: Task | null;\n  projects: Project[];\n  teamMembers: TeamMember[];\n}) {\n  const { toast } = useToast();\n  const isEditing = !!task;\n  const form = useForm<FormValues>({\n    resolver: zodResolver(formSchema),\n  });\n\n  useEffect(() => {\n    if (open) {\n      if (isEditing && task) {\n        form.reset({\n          title: task.title,\n          projectId: task.projectId,\n          status: task.status,\n          priority: task.priority,\n          assigneeId: task.assigneeId || undefined,\n          dueDate: task.dueDate ? new Date(task.dueDate) : undefined,\n        });\n      } else {\n        form.reset({\n            status: 'To Do',\n            priority: 'Medium',\n            title: '',\n            projectId: undefined,\n            assigneeId: undefined,\n            dueDate: undefined,\n        });\n      }\n    }\n  }, [open, form, isEditing, task]);\n\n  const onSubmit = (data: FormValues) => {\n    const taskToSave: Task = {\n      id: task?.id || '', // will be set in parent if new\n      title: data.title,\n      projectId: data.projectId,\n      status: data.status,\n      priority: data.priority,\n      assigneeId: data.assigneeId || '',\n      dueDate: data.dueDate ? format(data.dueDate, 'yyyy-MM-dd') : new Date().toISOString().split('T')[0],\n    };\n    onSave(taskToSave);\n    toast({\n      title: `Task ${isEditing ? 'Updated' : 'Created'}`,\n      description: `Successfully ${isEditing ? 'updated' : 'created'} task: ${data.title}.`,\n    });\n    onOpenChange(false);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>{isEditing ? 'Edit' : 'Add New'} Task</DialogTitle>\n          <DialogDescription>\n            {isEditing ? 'Update the details of this task.' : 'Fill out the form to create a new task.'}\n          </DialogDescription>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"title\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Task Title</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., Finalize material order\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"projectId\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Project</FormLabel>\n                  <Select onValueChange={field.onChange} value={field.value}>\n                    <FormControl>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select a project\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      {projects.map(project => (\n                        <SelectItem key={project.id} value={project.id}>\n                          {project.name}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                control={form.control}\n                name=\"status\"\n                render={({ field }) => (\n                    <FormItem>\n                    <FormLabel>Status</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                        <FormControl>\n                        <SelectTrigger>\n                            <SelectValue placeholder=\"Select a status\" />\n                        </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                        <SelectItem value=\"To Do\">To Do</SelectItem>\n                        <SelectItem value=\"In Progress\">In Progress</SelectItem>\n                        <SelectItem value=\"Done\">Done</SelectItem>\n                        </SelectContent>\n                    </Select>\n                    <FormMessage />\n                    </FormItem>\n                )}\n                />\n                 <FormField\n                control={form.control}\n                name=\"priority\"\n                render={({ field }) => (\n                    <FormItem>\n                    <FormLabel>Priority</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                        <FormControl>\n                        <SelectTrigger>\n                            <SelectValue placeholder=\"Select a priority\" />\n                        </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                            <SelectItem value=\"Low\">Low</SelectItem>\n                            <SelectItem value=\"Medium\">Medium</SelectItem>\n                            <SelectItem value=\"High\">High</SelectItem>\n                        </SelectContent>\n                    </Select>\n                    <FormMessage />\n                    </FormItem>\n                )}\n                />\n            </div>\n            \n            <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                control={form.control}\n                name=\"assigneeId\"\n                render={({ field }) => (\n                    <FormItem>\n                    <FormLabel>Assign To (Optional)</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                        <FormControl>\n                        <SelectTrigger>\n                            <SelectValue placeholder=\"Select a team member\" />\n                        </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                        {teamMembers.map(member => (\n                            <SelectItem key={member.id} value={member.id}>\n                            {member.name}\n                            </SelectItem>\n                        ))}\n                        </SelectContent>\n                    </Select>\n                    <FormMessage />\n                    </FormItem>\n                )}\n                />\n                <FormField\n                control={form.control}\n                name=\"dueDate\"\n                render={({ field }) => (\n                    <FormItem className='flex flex-col'>\n                    <FormLabel>Due Date (Optional)</FormLabel>\n                     <Popover>\n                      <PopoverTrigger asChild>\n                        <FormControl>\n                          <Button\n                            variant={'outline'}\n                            className={cn(\n                              'w-full pl-3 text-left font-normal',\n                              !field.value && 'text-muted-foreground'\n                            )}\n                          >\n                            {field.value ? (\n                              format(field.value, 'PPP')\n                            ) : (\n                              <span>Pick a date</span>\n                            )}\n                            <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\n                          </Button>\n                        </FormControl>\n                      </PopoverTrigger>\n                      <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                        <Calendar\n                          mode=\"single\"\n                          selected={field.value}\n                          onSelect={field.onChange}\n                          initialFocus\n                        />\n                      </PopoverContent>\n                    </Popover>\n                    <FormMessage />\n                    </FormItem>\n                )}\n                />\n            </div>\n\n            <DialogFooter className=\"pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                onClick={() => onOpenChange(false)}\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\">{isEditing ? 'Save Changes' : 'Create Task'}</Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
  "src/app/(app)/tasks/page.tsx": "\n'use client';\n\nimport { useContext, useMemo, useState } from 'react';\nimport { AppStateContext } from '@/context/app-state-context';\nimport { Button } from '@/components/ui/button';\nimport { PlusCircle, MoreHorizontal } from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from '@/components/ui/dropdown-menu';\nimport type { Task } from '@/lib/types';\nimport { format } from 'date-fns';\nimport { AddTaskDialog } from './_components/add-task-dialog';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\nimport { useToast } from '@/hooks/use-toast';\n\ntype TaskStatus = 'To Do' | 'In Progress' | 'Done';\nconst STATUSES: TaskStatus[] = ['To Do', 'In Progress', 'Done'];\n\nconst priorityVariant: Record<Task['priority'], 'destructive' | 'secondary' | 'outline'> = {\n    High: 'destructive',\n    Medium: 'secondary',\n    Low: 'outline',\n};\n\nexport default function TasksPage() {\n    const [isAddTaskOpen, setIsAddTaskOpen] = useState(false);\n    const [selectedTask, setSelectedTask] = useState<Task | null>(null);\n    const appState = useContext(AppStateContext);\n    const { toast } = useToast();\n\n    if (!appState) {\n        return <div>Loading...</div>;\n    }\n\n    const { tasks, teamMembers, projects, setTasks } = appState;\n\n    const tasksByStatus = useMemo(() => {\n        const grouped: Record<TaskStatus, Task[]> = {\n            'To Do': [],\n            'In Progress': [],\n            'Done': [],\n        };\n        tasks.forEach(task => {\n            if (grouped[task.status]) {\n                grouped[task.status].push(task);\n            }\n        });\n        return grouped;\n    }, [tasks]);\n\n    const getInitials = (name: string) => {\n        if (!name) return '';\n        return name.split(' ').map(n => n[0]).join('');\n    };\n\n    const handleNewTask = () => {\n        setSelectedTask(null);\n        setIsAddTaskOpen(true);\n    };\n\n    const handleEditTask = (task: Task) => {\n        setSelectedTask(task);\n        setIsAddTaskOpen(true);\n    };\n\n    const handleDeleteTask = (taskId: string) => {\n        setTasks(current => current.filter(t => t.id !== taskId));\n        toast({\n            title: \"Task Deleted\",\n            description: \"The task has been successfully deleted.\",\n            variant: \"destructive\",\n        });\n    };\n    \n    const handleSaveTask = (task: Task) => {\n        if (task.id) { // Editing existing task\n            setTasks(current => current.map(t => t.id === task.id ? task : t));\n        } else { // Adding new task\n            setTasks(current => [{...task, id: crypto.randomUUID()}, ...current]);\n        }\n    };\n\n    return (\n        <>\n            <AddTaskDialog\n                open={isAddTaskOpen}\n                onOpenChange={setIsAddTaskOpen}\n                onSave={handleSaveTask}\n                task={selectedTask}\n                projects={projects}\n                teamMembers={teamMembers}\n            />\n            <div className=\"space-y-6\">\n                 <div className=\"flex items-center justify-between\">\n                    <div>\n                        <h1 className=\"text-3xl font-bold tracking-tight\">Task Board</h1>\n                        <p className=\"text-muted-foreground\">\n                            Manage project tasks with a Kanban board.\n                        </p>\n                    </div>\n                    <Button onClick={handleNewTask}>\n                        <PlusCircle className=\"mr-2\" />\n                        Add Task\n                    </Button>\n                </div>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 items-start\">\n                    {STATUSES.map(status => (\n                        <Card key={status} className=\"bg-secondary/50\">\n                            <CardHeader>\n                                <CardTitle className=\"text-lg\">{status} ({tasksByStatus[status].length})</CardTitle>\n                            </CardHeader>\n                            <CardContent className=\"space-y-4\">\n                                {tasksByStatus[status].map(task => {\n                                    const assignee = teamMembers.find(m => m.id === task.assigneeId);\n                                    return (\n                                        <Card key={task.id}>\n                                            <CardContent className=\"p-4 space-y-3\">\n                                                <div className=\"flex justify-between items-start\">\n                                                    <h4 className=\"font-semibold leading-tight\">{task.title}</h4>\n                                                    <DropdownMenu>\n                                                        <DropdownMenuTrigger asChild>\n                                                            <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6\">\n                                                                <MoreHorizontal className=\"h-4 w-4\" />\n                                                            </Button>\n                                                        </DropdownMenuTrigger>\n                                                        <DropdownMenuContent>\n                                                            <DropdownMenuItem onClick={() => handleEditTask(task)}>Edit</DropdownMenuItem>\n                                                            <AlertDialog>\n                                                                <AlertDialogTrigger asChild>\n                                                                    <DropdownMenuItem onSelect={(e) => e.preventDefault()} className=\"text-destructive\">Delete</DropdownMenuItem>\n                                                                </AlertDialogTrigger>\n                                                                <AlertDialogContent>\n                                                                    <AlertDialogHeader>\n                                                                        <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                                                                        <AlertDialogDescription>\n                                                                            This action cannot be undone. This will permanently delete the task \"{task.title}\".\n                                                                        </AlertDialogDescription>\n                                                                    </AlertDialogHeader>\n                                                                    <AlertDialogFooter>\n                                                                        <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                                                        <AlertDialogAction onClick={() => handleDeleteTask(task.id)} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\n                                                                            Delete\n                                                                        </AlertDialogAction>\n                                                                    </AlertDialogFooter>\n                                                                </AlertDialogContent>\n                                                            </AlertDialog>\n                                                        </DropdownMenuContent>\n                                                    </DropdownMenu>\n                                                </div>\n                                                <div className=\"flex justify-between items-center\">\n                                                    <div className=\"flex items-center gap-2\">\n                                                        {assignee && (\n                                                            <Avatar className=\"h-6 w-6\">\n                                                                <AvatarImage src={assignee.avatarUrl} />\n                                                                <AvatarFallback>{getInitials(assignee.name)}</AvatarFallback>\n                                                            </Avatar>\n                                                        )}\n                                                        <Badge variant={priorityVariant[task.priority]}>{task.priority}</Badge>\n                                                    </div>\n                                                    <span className=\"text-xs text-muted-foreground\">\n                                                        {task.dueDate ? format(new Date(task.dueDate), 'M/dd/yyyy') : ''}\n                                                    </span>\n                                                </div>\n                                            </CardContent>\n                                        </Card>\n                                    );\n                                })}\n                                 {tasksByStatus[status].length === 0 && (\n                                    <div className=\"text-center text-sm text-muted-foreground py-8\">\n                                        No tasks in this column.\n                                    </div>\n                                 )}\n                            </CardContent>\n                        </Card>\n                    ))}\n                </div>\n            </div>\n        </>\n    );\n}\n",
  "src/app/globals.css": "@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer base {\n  :root {\n    --background: 207 29% 95%;\n    --foreground: 222.2 84% 4.9%;\n    --card: 0 0% 100%;\n    --card-foreground: 222.2 84% 4.9%;\n    --popover: 0 0% 100%;\n    --popover-foreground: 222.2 84% 4.9%;\n    --primary: 197 78% 52%;\n    --primary-foreground: 210 40% 98%;\n    --secondary: 210 40% 96.1%;\n    --secondary-foreground: 222.2 47.4% 11.2%;\n    --muted: 210 40% 96.1%;\n    --muted-foreground: 215.4 16.3% 46.9%;\n    --accent: 181 39% 45%;\n    --accent-foreground: 210 40% 98%;\n    --destructive: 0 84.2% 60.2%;\n    --destructive-foreground: 210 40% 98%;\n    --border: 214.3 31.8% 91.4%;\n    --input: 214.3 31.8% 91.4%;\n    --ring: 197 78% 52%;\n    --radius: 0.5rem;\n    --chart-1: 197 78% 52%;\n    --chart-2: 181 39% 45%;\n    --chart-3: 210 40% 96.1%;\n    --chart-4: 43 74% 66%;\n    --chart-5: 27 87% 67%;\n    --sidebar-background: 0 0% 100%;\n    --sidebar-foreground: 222.2 84% 4.9%;\n    --sidebar-primary: 197 78% 52%;\n    --sidebar-primary-foreground: 210 40% 98%;\n    --sidebar-accent: 210 40% 96.1%;\n    --sidebar-accent-foreground: 222.2 47.4% 11.2%;\n    --sidebar-border: 214.3 31.8% 91.4%;\n    --sidebar-ring: 197 78% 52%;\n  }\n\n  .dark {\n    --background: 222.2 84% 4.9%;\n    --foreground: 210 40% 98%;\n    --card: 222.2 84% 4.9%;\n    --card-foreground: 210 40% 98%;\n    --popover: 222.2 84% 4.9%;\n    --popover-foreground: 210 40% 98%;\n    --primary: 197 78% 52%;\n    --primary-foreground: 210 40% 98%;\n    --secondary: 217.2 32.6% 17.5%;\n    --secondary-foreground: 210 40% 98%;\n    --muted: 217.2 32.6% 17.5%;\n    --muted-foreground: 215 20.2% 65.1%;\n    --accent: 181 39% 45%;\n    --accent-foreground: 210 40% 98%;\n    --destructive: 0 62.8% 30.6%;\n    --destructive-foreground: 210 40% 98%;\n    --border: 217.2 32.6% 17.5%;\n    --input: 217.2 32.6% 17.5%;\n    --ring: 197 78% 52%;\n    --chart-1: 197 78% 52%;\n    --chart-2: 181 39% 45%;\n    --chart-3: 217.2 32.6% 17.5%;\n    --chart-4: 43 74% 66%;\n    --chart-5: 27 87% 67%;\n    --sidebar-background: 222.2 84% 4.9%;\n    --sidebar-foreground: 210 40% 98%;\n    --sidebar-primary: 197 78% 52%;\n    --sidebar-primary-foreground: 210 40% 98%;\n    --sidebar-accent: 217.2 32.6% 17.5%;\n    --sidebar-accent-foreground: 210 40% 98%;\n    --sidebar-border: 217.2 32.6% 17.5%;\n    --sidebar-ring: 197 78% 52%;\n  }\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n  body {\n    @apply bg-background text-foreground;\n    font-feature-settings: \"cv02\", \"cv03\", \"cv04\", \"cv11\";\n  }\n}\n",
  "src/app/layout.tsx": "import type { Metadata } from 'next';\nimport './globals.css';\nimport { Toaster } from '@/components/ui/toaster';\nimport { ThemeProvider } from '@/components/theme-provider';\n\nexport const metadata: Metadata = {\n  title: 'ConstructAI',\n  description: 'Construction Project Management Application',\n  manifest: '/manifest.json',\n};\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <html lang=\"en\" suppressHydrationWarning>\n      <head>\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" />\n        <link\n          rel=\"preconnect\"\n          href=\"https://fonts.gstatic.com\"\n          crossOrigin=\"anonymous\"\n        />\n        <link\n          href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\"\n          rel=\"stylesheet\"\n        />\n      </head>\n      <body className=\"font-body antialiased\">\n        <ThemeProvider\n          attribute=\"class\"\n          defaultTheme=\"system\"\n          enableSystem\n          disableTransitionOnChange\n        >\n          {children}\n          <Toaster />\n        </ThemeProvider>\n      </body>\n    </html>\n  );\n}\n",
  "src/app/page.tsx": "import { redirect } from 'next/navigation';\n\nexport default function RootPage() {\n  redirect('/dashboard');\n}\n",
  "src/components/icons.tsx": "import type { SVGProps } from 'react';\n\nexport function Logo(props: SVGProps<SVGSVGElement>) {\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 256 256\"\n            width={props.width || \"32\"}\n            height={props.height || \"32\"}\n            {...props}\n        >\n            <path\n                fill=\"hsl(var(--primary))\"\n                d=\"M128 24a104 104 0 1 0 104 104A104.11 104.11 0 0 0 128 24Zm0 192a88 88 0 1 1 88-88a88.1 88.1 0 0 1-88 88Z\"\n            />\n            <path\n                fill=\"hsl(var(--primary))\"\n                d=\"M173.34 94.66a8 8 0 0 1-11.32 0L139.3 72H116.7l-22.72 22.66a8 8 0 0 1-11.32-11.32l28.38-28.38a8 8 0 0 1 5.66-2.34H144a8 8 0 0 1 5.66 2.34l23.68 23.68a8 8 0 0 1 0 11.32ZM152 144h-48a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h48a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8Z\"\n            />\n        </svg>\n    );\n}\n",
  "src/components/main-nav.tsx": "\n\"use client\";\n\nimport * as React from \"react\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport {\n  Calculator,\n  CheckCircle2,\n  ClipboardCheck,\n  FolderKanban,\n  LayoutDashboard,\n  MessageCircle,\n  Settings,\n  AlertCircle,\n  Tag,\n  Truck,\n  Users,\n  ChevronDown,\n  TrendingUp,\n  Database,\n  FileText,\n} from \"lucide-react\";\nimport {\n  SidebarMenu,\n  SidebarMenuItem,\n  SidebarMenuButton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n} from \"@/components/ui/sidebar\";\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\n\nconst mainNavLinks = [\n  { href: \"/dashboard\", label: \"Dashboard\", icon: LayoutDashboard },\n  { href: \"/projects\", label: \"Projects\", icon: FolderKanban },\n  { href: \"/profit-loss\", label: \"Profit & Loss\", icon: TrendingUp },\n  { href: \"/tasks\", label: \"Tasks\", icon: CheckCircle2 },\n  { href: \"/daily-reports\", label: \"Daily Reports\", icon: ClipboardCheck },\n  { href: \"/issues\", label: \"Issues\", icon: AlertCircle },\n  { href: \"/chat\", label: \"Chat\", icon: MessageCircle },\n  { href: \"/aia\", label: \"AIA\", icon: FileText },\n];\n\nconst estimatingLinks = [\n  { href: \"/estimating/job-estimator\", label: \"AI Job Estimator\", icon: Calculator },\n  { href: \"/estimating/budget-categories\", label: \"Budget Categories\", icon: Tag },\n  { href: \"/estimating/vendors\", label: \"Vendors\", icon: Truck },\n  { href: \"/estimating/team\", label: \"Team\", icon: Users },\n];\n\nexport function MainNav() {\n  const pathname = usePathname();\n\n  const isEstimatingActive = pathname.startsWith(\"/estimating\");\n\n  return (\n    <SidebarMenu>\n      {mainNavLinks.map((link) => (\n        <SidebarMenuItem key={link.href}>\n          <SidebarMenuButton\n            asChild\n            isActive={pathname === link.href}\n            tooltip={link.label}\n          >\n            <Link href={link.href}>\n              <link.icon />\n              <span>{link.label}</span>\n            </Link>\n          </SidebarMenuButton>\n        </SidebarMenuItem>\n      ))}\n\n      <Collapsible defaultOpen={isEstimatingActive}>\n        <SidebarMenuItem>\n          <CollapsibleTrigger asChild>\n            <SidebarMenuButton\n              className=\"justify-between\"\n              isActive={isEstimatingActive}\n            >\n              <div className=\"flex items-center gap-2\">\n                <Calculator />\n                <span>Estimating</span>\n              </div>\n              <ChevronDown className=\"size-4 shrink-0 transition-transform duration-200 group-data-[state=open]:rotate-180\" />\n            </SidebarMenuButton>\n          </CollapsibleTrigger>\n        </SidebarMenuItem>\n        <CollapsibleContent>\n          <SidebarMenuSub>\n            {estimatingLinks.map((link) => (\n              <SidebarMenuItem key={link.href}>\n                <SidebarMenuSubButton\n                  asChild\n                  isActive={pathname.startsWith(link.href)}\n                >\n                  <Link href={link.href}>\n                    <link.icon />\n                    <span>{link.label}</span>\n                  </Link>\n                </SidebarMenuSubButton>\n              </SidebarMenuItem>\n            ))}\n          </SidebarMenuSub>\n        </CollapsibleContent>\n      </Collapsible>\n\n      <SidebarMenuItem>\n        <SidebarMenuButton\n            asChild\n            isActive={pathname === \"/import-export\"}\n            tooltip=\"Import/Export\"\n        >\n            <Link href=\"/import-export\">\n                <Database />\n                <span>Import / Export</span>\n            </Link>\n        </SidebarMenuButton>\n      </SidebarMenuItem>\n      \n      <SidebarMenuItem className=\"mt-auto\">\n        <SidebarMenuButton\n          asChild\n          isActive={pathname === \"/settings\"}\n          tooltip=\"Settings\"\n        >\n          <Link href=\"/settings\">\n            <Settings />\n            <span>Settings</span>\n          </Link>\n        </SidebarMenuButton>\n      </SidebarMenuItem>\n    </SidebarMenu>\n  );\n}\n",
  "src/components/theme-provider.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport { ThemeProvider as NextThemesProvider } from \"next-themes\"\nimport type { ThemeProviderProps } from \"next-themes/dist/types\"\n\nexport function ThemeProvider({ children, ...props }: ThemeProviderProps) {\n  return <NextThemesProvider {...props}>{children}</NextThemesProvider>\n}\n",
  "src/components/theme-toggle.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport { Moon, Sun } from \"lucide-react\"\nimport { useTheme } from \"next-themes\"\n\nimport { Button } from \"@/components/ui/button\"\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\"\n\nexport function ThemeToggle() {\n  const { setTheme } = useTheme()\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"ghost\" size=\"icon\">\n          <Sun className=\"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0\" />\n          <Moon className=\"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100\" />\n          <span className=\"sr-only\">Toggle theme</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\">\n        <DropdownMenuItem onClick={() => setTheme(\"light\")}>\n          Light\n        </DropdownMenuItem>\n        <DropdownMenuItem onClick={() => setTheme(\"dark\")}>\n          Dark\n        </DropdownMenuItem>\n        <DropdownMenuItem onClick={() => setTheme(\"system\")}>\n          System\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  )\n}\n",
  "src/components/ui/accordion.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n",
  "src/components/ui/alert-dialog.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n",
  "src/components/ui/alert.tsx": "import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n",
  "src/components/ui/avatar.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n",
  "src/components/ui/badge.tsx": "import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n",
  "src/components/ui/button.tsx": "import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n",
  "src/components/ui/calendar.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n",
  "src/components/ui/card.tsx": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n",
  "src/components/ui/carousel.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n",
  "src/components/ui/chart.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item.dataKey || item.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n",
  "src/components/ui/checkbox.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n",
  "src/components/ui/collapsible.tsx": "\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n",
  "src/components/ui/command.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\ninterface CommandDialogProps extends DialogProps {}\n\nconst CommandDialog = ({ children, ...props }: CommandDialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n",
  "src/components/ui/dialog.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n",
  "src/components/ui/dropdown-menu.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n",
  "src/components/ui/form.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({ ...props }: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n",
  "src/components/ui/input.tsx": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n",
  "src/components/ui/label.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n",
  "src/components/ui/menubar.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n",
  "src/components/ui/popover.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n",
  "src/components/ui/progress.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n",
  "src/components/ui/radio-group.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n",
  "src/components/ui/scroll-area.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n",
  "src/components/ui/select.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n",
  "src/components/ui/separator.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n",
  "src/components/ui/sheet.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n",
  "src/components/ui/sidebar.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport { Sheet, SheetContent } from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContext = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContext | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContext>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden md:block text-sidebar-foreground\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex min-h-svh flex-1 flex-col bg-background\",\n        \"peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"rounded-md h-8 flex gap-2 px-2 items-center\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 flex-1 max-w-[--skeleton-width]\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n",
  "src/components/ui/skeleton.tsx": "import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n",
  "src/components/ui/slider.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n",
  "src/components/ui/switch.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n",
  "src/components/ui/table.tsx": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n\n    ",
  "src/components/ui/tabs.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n",
  "src/components/ui/textarea.tsx": "import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n",
  "src/components/ui/toast.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n",
  "src/components/ui/toaster.tsx": "\"use client\"\n\nimport { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n",
  "src/components/ui/tooltip.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n",
  "src/components/user-nav.tsx": "\n\n\"use client\"\n\nimport { useContext, useEffect, useState } from \"react\";\nimport {\n  Avatar,\n  AvatarFallback,\n  AvatarImage,\n} from \"@/components/ui/avatar\"\nimport { Button } from \"@/components/ui/button\"\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\"\nimport { ThemeToggle } from \"./theme-toggle\"\nimport Link from \"next/link\"\nimport { AppStateContext } from \"@/context/app-state-context\";\n\nexport function UserNav() {\n  const appState = useContext(AppStateContext);\n  const [hasMounted, setHasMounted] = useState(false);\n\n  useEffect(() => {\n    setHasMounted(true);\n  }, []);\n\n  if (!appState || !hasMounted) {\n    return (\n        <div className=\"flex items-center gap-2\">\n            <ThemeToggle />\n            <div className=\"h-8 w-8 rounded-full bg-muted animate-pulse\" />\n        </div>\n    );\n  }\n\n  const { userName, userAvatarUrl, userEmail } = appState;\n  const initials = userName ? userName.split(' ').map(n => n[0]).join('') : '';\n\n\n  return (\n    <div className=\"flex items-center gap-2\">\n      <ThemeToggle />\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <Button variant=\"ghost\" className=\"relative h-8 w-8 rounded-full\">\n            <Avatar className=\"h-9 w-9\">\n              <AvatarImage src={userAvatarUrl} alt={userName} />\n              <AvatarFallback>{initials}</AvatarFallback>\n            </Avatar>\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent className=\"w-56\" align=\"end\" forceMount>\n          <DropdownMenuLabel className=\"font-normal\">\n            <div className=\"flex flex-col space-y-1\">\n              <p className=\"text-sm font-medium leading-none\">{userName}</p>\n              <p className=\"text-xs leading-none text-muted-foreground\">\n                {userEmail}\n              </p>\n            </div>\n          </DropdownMenuLabel>\n          <DropdownMenuSeparator />\n          <DropdownMenuGroup>\n            <DropdownMenuItem asChild>\n              <Link href=\"/settings\">Profile</Link>\n            </DropdownMenuItem>\n            <DropdownMenuItem>\n              Billing\n            </DropdownMenuItem>\n            <DropdownMenuItem asChild>\n               <Link href=\"/settings\">Settings</Link>\n            </DropdownMenuItem>\n          </DropdownMenuGroup>\n          <DropdownMenuSeparator />\n          <DropdownMenuItem>\n            Log out\n          </DropdownMenuItem>\n        </DropdownMenuContent>\n      </DropdownMenu>\n    </div>\n  )\n}\n",
  "src/context/app-state-context.tsx": "\n\n'use client';\n\nimport React, { createContext, ReactNode, useContext } from 'react';\nimport type { Project, BudgetCategory, Vendor, BudgetItem, TeamMember, Task, Expense, ChangeOrder, RFI, Issue, Milestone } from '@/lib/types';\nimport * as data from '@/lib/data';\nimport { useLocalStorage } from '@/hooks/use-local-storage';\n\ntype AppStateContextType = {\n  companyName: string;\n  setCompanyName: React.Dispatch<React.SetStateAction<string>>;\n  companyLogoUrl: string;\n  setCompanyLogoUrl: React.Dispatch<React.SetStateAction<string>>;\n  userName: string;\n  setUserName: React.Dispatch<React.SetStateAction<string>>;\n  userAvatarUrl: string;\n  setUserAvatarUrl: React.Dispatch<React.SetStateAction<string>>;\n  userEmail: string;\n  setUserEmail: React.Dispatch<React.SetStateAction<string>>;\n  projects: Project[];\n  setProjects: React.Dispatch<React.SetStateAction<Project[]>>;\n  budgetCategories: BudgetCategory[];\n  setBudgetCategories: React.Dispatch<React.SetStateAction<BudgetCategory[]>>;\n  vendors: Vendor[];\n  setVendors: React.Dispatch<React.SetStateAction<Vendor[]>>;\n  budgetItems: BudgetItem[];\n  setBudgetItems: React.Dispatch<React.SetStateAction<BudgetItem[]>>;\n  teamMembers: TeamMember[];\n  setTeamMembers: React.Dispatch<React.SetStateAction<TeamMember[]>>;\n  tasks: Task[];\n  setTasks: React.Dispatch<React.SetStateAction<Task[]>>;\n  expenses: Expense[];\n  setExpenses: React.Dispatch<React.SetStateAction<Expense[]>>;\n  changeOrders: ChangeOrder[];\n  setChangeOrders: React.Dispatch<React.SetStateAction<ChangeOrder[]>>;\n  rfis: RFI[];\n  setRfis: React.Dispatch<React.SetStateAction<RFI[]>>;\n  issues: Issue[];\n  setIssues: React.Dispatch<React.SetStateAction<Issue[]>>;\n  milestones: Milestone[];\n  setMilestones: React.Dispatch<React.SetStateAction<Milestone[]>>;\n};\n\nexport const AppStateContext = createContext<AppStateContextType | undefined>(undefined);\n\nexport function useAppState() {\n    const context = useContext(AppStateContext);\n    if (!context) {\n        throw new Error('useAppState must be used within an AppStateProvider');\n    }\n    return context;\n}\n\n\nexport function AppStateProvider({ children }: { children: ReactNode }) {\n    const [companyName, setCompanyName] = useLocalStorage<string>('companyName', data.companyProfile.name);\n    const [companyLogoUrl, setCompanyLogoUrl] = useLocalStorage<string>('companyLogoUrl', data.companyProfile.logoUrl);\n    const [userName, setUserName] = useLocalStorage<string>('userName', data.appUser.name);\n    const [userAvatarUrl, setUserAvatarUrl] = useLocalStorage<string>('userAvatarUrl', data.appUser.avatarUrl);\n    const [userEmail, setUserEmail] = useLocalStorage<string>('userEmail', data.appUser.email);\n\n    const [projects, setProjects] = useLocalStorage<Project[]>('projects', data.projects);\n    const [budgetCategories, setBudgetCategories] = useLocalStorage<BudgetCategory[]>('budgetCategories', data.budgetCategories);\n    const [vendors, setVendors] = useLocalStorage<Vendor[]>('vendors', data.vendors);\n    const [budgetItems, setBudgetItems] = useLocalStorage<BudgetItem[]>('budgetItems', data.budgetItems);\n    const [teamMembers, setTeamMembers] = useLocalStorage<TeamMember[]>('teamMembers', data.teamMembers);\n    const [tasks, setTasks] = useLocalStorage<Task[]>('tasks', data.tasks);\n    const [expenses, setExpenses] = useLocalStorage<Expense[]>('expenses', data.expenses);\n    const [changeOrders, setChangeOrders] = useLocalStorage<ChangeOrder[]>('changeOrders', data.changeOrders);\n    const [rfis, setRfis] = useLocalStorage<RFI[]>('rfis', data.rfis);\n    const [issues, setIssues] = useLocalStorage<Issue[]>('issues', data.issues);\n    const [milestones, setMilestones] = useLocalStorage<Milestone[]>('milestones', data.milestones);\n\n  const value = {\n    companyName,\n    setCompanyName,\n    companyLogoUrl,\n    setCompanyLogoUrl,\n    userName,\n    setUserName,\n    userAvatarUrl,\n    setUserAvatarUrl,\n    userEmail,\n    setUserEmail,\n    projects,\n    setProjects,\n    budgetCategories,\n    setBudgetCategories,\n    vendors,\n    setVendors,\n    budgetItems,\n    setBudgetItems,\n    teamMembers,\n    setTeamMembers,\n    tasks,\n    setTasks,\n    expenses,\n    setExpenses,\n    changeOrders,\n    setChangeOrders,\n    rfis,\n    setRfis,\n    issues,\n    setIssues,\n    milestones,\n    setMilestones\n  };\n\n  return (\n    <AppStateContext.Provider value={value}>\n      {children}\n    </AppStateContext.Provider>\n  );\n}\n",
  "src/firebase/config.ts": "// Follow this pattern to import other Firebase services\n// import { } from 'firebase/<service>';\n\n// The Firebase Admin SDK is available here:\n// import * as admin from 'firebase-admin';\n\nconst firebaseConfig = {\n  projectId: 'studio-8302502127-557bf',\n  appId: '1:259840996333:web:7de21ed4a3798cea26ade4',\n  apiKey: 'AIzaSyA3VW-0Eb5eD1zl5iTV7JA-Lbf6NaDdNjY',\n  authDomain: 'studio-8302502127-557bf.firebaseapp.com',\n  measurementId: '',\n  messagingSenderId: '259840996333',\n};\n\nexport function getFirebaseConfig() {\n  if (!firebaseConfig || !firebaseConfig.apiKey) {\n    throw new Error(\n      'No Firebase configuration object provided.' +\n        '\\n' +\n        \"Add your web app's configuration object to firebase-config.ts\"\n    );\n  } else {\n    return firebaseConfig;\n  }\n}\n",
  "src/hooks/use-local-storage.ts": "\n'use client';\n\nimport { useState, useEffect } from 'react';\n\nfunction getValue<T>(key: string, defaultValue: T): T {\n    if (typeof window === 'undefined') {\n        return defaultValue;\n    }\n    try {\n        const storedValue = window.localStorage.getItem(key);\n        return storedValue ? JSON.parse(storedValue) : defaultValue;\n    } catch (error) {\n        console.error(`Error parsing localStorage key â${key}â:`, error);\n        return defaultValue;\n    }\n}\n\nexport function useLocalStorage<T>(key: string, defaultValue: T): [T, React.Dispatch<React.SetStateAction<T>>] {\n    const [value, setValue] = useState(() => getValue(key, defaultValue));\n\n    useEffect(() => {\n        if (typeof window !== 'undefined') {\n            window.localStorage.setItem(key, JSON.stringify(value));\n        }\n    }, [key, value]);\n\n    return [value, setValue];\n}\n",
  "src/hooks/use-mobile.tsx": "import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n",
  "src/hooks/use-toast.ts": "\"use client\"\n\n// Inspired by react-hot-toast library\nimport * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n",
  "src/lib/data.ts": "\nimport type { Project, TeamMember, Vendor, BudgetCategory, Task, RFI, Issue, BudgetItem, Expense, ChangeOrder, Milestone, AppUser, CompanyProfile } from './types';\nimport { PlaceHolderImages } from './placeholder-images';\n\nexport const companyProfile: CompanyProfile = {\n  id: 'comp-1',\n  name: 'FancyBuilders',\n  logoUrl: '/your-logo.png',\n};\n\nexport const appUser: AppUser = {\n  id: 'user-4',\n  name: 'John Doe',\n  email: 'john.doe@constructai.com',\n  avatarUrl: 'https://i.pravatar.cc/150?u=john',\n};\n\nexport const teamMembers: TeamMember[] = [\n  { id: 'user-1', name: 'Alice Johnson', role: 'Project Manager', email: 'alice@constructai.com', phone: '111-222-3333', avatarUrl: 'https://i.pravatar.cc/150?u=alice' },\n  { id: 'user-2', name: 'Bob Williams', role: 'Site Superintendent', email: 'bob@constructai.com', phone: '444-555-6666', avatarUrl: 'https://i.pravatar.cc/150?u=bob' },\n  { id: 'user-3', name: 'Charlie Brown', role: 'Estimator', email: 'charlie@constructai.com', phone: '777-888-9999', avatarUrl: 'https://i.pravatar.cc/150?u=charlie' },\n];\n\nexport const vendors: Vendor[] = [\n  { id: 'vendor-1', name: 'A & G Electric', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Electrical' },\n  { id: 'vendor-2', name: 'A Morfin Trucking LLC', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Trucking' },\n  { id: 'vendor-3', name: 'ACT PIPE AND SUPPLY, INC.', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Piping' },\n  { id: 'vendor-4', name: 'Action Gypsum', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Drywall' },\n  { id: 'vendor-5', name: 'Advanced LED Solution', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Electrical' },\n  { id: 'vendor-6', name: 'Alexanders Construction', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Construction' },\n  { id: 'vendor-7', name: 'Alif Security LLC', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Security' },\n  { id: 'vendor-8', name: 'Allied Hydromulch TX, LLC', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Landscaping' },\n  { id: 'vendor-9', name: 'Amazon', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Supplier' },\n  { id: 'vendor-10', name: 'Andrade Construction (Sandra Cruz)', contactPerson: 'Sandra Cruz', phone: 'N/A', email: 'N/A', trade: 'General Construction' },\n  { id: 'vendor-11', name: 'Arise Furniture LLC', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Furniture' },\n  { id: 'vendor-12', name: 'Backflow Technicians', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Plumbing' },\n  { id: 'vendor-13', name: 'Barreras Glass', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Glazing' },\n  { id: 'vendor-14', name: 'Brent Lowrey', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Contractor' },\n  { id: 'vendor-15', name: 'Camarillo Trucks', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Trucking' },\n  { id: 'vendor-16', name: 'Cano', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-17', name: 'Carlos Osorto', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Steel' },\n  { id: 'vendor-18', name: 'CNA SURETY', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Insurance' },\n  { id: 'vendor-19', name: 'Compania Vision', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-20', name: 'Concrete Cleaning Inc. (Polished Concrete)', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Concrete' },\n  { id: 'vendor-21', name: 'Crow Castle LLC', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Construction' },\n  { id: 'vendor-22', name: 'CUSTOM BUILDS & RENTALS, LLC', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Rental' },\n  { id: 'vendor-23', name: 'Dumpster Dogs TX', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Waste Management' },\n  { id: 'vendor-24', name: 'Dynamic Fastener', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Supplier' },\n  { id: 'vendor-25', name: 'ECUA Homes (Sand+Stabulizer)', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Sitework' },\n  { id: 'vendor-26', name: 'Eloy Torres', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-27', name: 'Enrique Arteaga', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-28', name: 'Equadors Trucking Services', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Trucking' },\n  { id: 'vendor-29', name: 'Fabco', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Supplier' },\n  { id: 'vendor-30', name: 'Final Inspection 11/4/2024', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Inspection' },\n  { id: 'vendor-31', name: 'Fire Sprinkler System', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Fire Protection' },\n  { id: 'vendor-32', name: 'Fire Sprinkler Texas', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Fire Protection' },\n  { id: 'vendor-33', name: 'Floor & Decor', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Flooring' },\n  { id: 'vendor-34', name: 'Frank Gonzalez', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-35', name: 'Gabriel Pena', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-36', name: 'GC Rebar', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Concrete' },\n  { id: 'vendor-37', name: 'Glavatec Inc.', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Technology' },\n  { id: 'vendor-38', name: 'GM Commercial Services', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Commercial Services' },\n  { id: 'vendor-39', name: 'Gomez MGS (Moises Gomez)', contactPerson: 'Moises Gomez', phone: 'N/A', email: 'N/A', trade: 'General Construction' },\n  { id: 'vendor-40', name: 'Grainger', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Supplier' },\n  { id: 'vendor-41', name: 'H2ECO Bulk LLC', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Supplier' },\n  { id: 'vendor-42', name: 'HC Empire Drywall', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Drywall' },\n  { id: 'vendor-43', name: 'Henry Osorto', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-44', name: 'Home Depot', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Supplier' },\n  { id: 'vendor-45', name: 'Hunton AC Units Trane', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'HVAC' },\n  { id: 'vendor-46', name: 'Israel Figueroa', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-47', name: 'Jacore Fire Protection Co.', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Fire Protection' },\n  { id: 'vendor-48', name: 'Jorge De Los Santos', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-49', name: 'Jose Ramirez', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-50', name: 'Juan F. Harnandez', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-51', name: 'Juan Molina', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-52', name: 'Juan Valadez', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-53', name: 'KES Landscaping LLC', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Landscaping' },\n  { id: 'vendor-54', name: 'L & G Equipment Rentals Inc.', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Rental' },\n  { id: 'vendor-55', name: 'Leon Plumbing', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Plumbing' },\n  { id: 'vendor-56', name: 'Lone Star Mapping LLC', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Surveying' },\n  { id: 'vendor-57', name: 'Longhorn Texas Supply', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Supplier' },\n  { id: 'vendor-58', name: 'LP Drilling, Texas City', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Drilling' },\n  { id: 'vendor-59', name: 'Makmo Design LLC', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Design' },\n  { id: 'vendor-60', name: 'MBCI', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Supplier' },\n  { id: 'vendor-61', name: 'Norris Mechanical Services & More', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Mechanical' },\n  { id: 'vendor-62', name: 'Point Equipment Rental', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Rental' },\n  { id: 'vendor-63', name: 'Precision Concrete Pumping LLC', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Concrete' },\n  { id: 'vendor-64', name: 'Pye Barker Fire & Safety', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Fire Protection' },\n  { id: 'vendor-65', name: 'Quality Tles', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Flooring' },\n  { id: 'vendor-66', name: 'Quick Waste', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Waste Management' },\n  { id: 'vendor-67', name: 'Red River Storm Water', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Sitework' },\n  { id: 'vendor-68', name: 'Revels Brick Company Inc.', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Masonry' },\n  { id: 'vendor-69', name: 'Reynaldo Benitez', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-70', name: 'Ricardo Rodriguez', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-71', name: 'Rodolfo Ladesma', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-72', name: 'Rodrigos Concrete Cuts & Cores', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Concrete' },\n  { id: 'vendor-73', name: 'Roto Rooter', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Plumbing' },\n  { id: 'vendor-74', name: 'Sam\\'s Club', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Supplier' },\n  { id: 'vendor-75', name: 'Sandra Cruz', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-76', name: 'Sapo Engineering', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Engineering' },\n  { id: 'vendor-77', name: 'Sherwin Williams', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Painting' },\n  { id: 'vendor-78', name: 'South Houston Concrete Pipe Co.', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Concrete' },\n  { id: 'vendor-79', name: 'Stainless Kitchen & More', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Kitchen' },\n  { id: 'vendor-80', name: 'Strifes Air Conditioning & Heating', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'HVAC' },\n  { id: 'vendor-81', name: 'Sylvia Valadez', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-82', name: 'Tejas Materials, Inc.', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Supplier' },\n  { id: 'vendor-83', name: 'Texas Contracting Consultants', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Consulting' },\n  { id: 'vendor-84', name: 'Texas Shield Roofing LLC', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Roofing' },\n  { id: 'vendor-85', name: 'Texcon Ready Mix Inc.', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Concrete' },\n  { id: 'vendor-86', name: 'The Kings Transport', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Trucking' },\n  { id: 'vendor-87', name: 'The Murillo Company', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Construction' },\n  { id: 'vendor-88', name: 'TO BE PAID', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Accounting' },\n  { id: 'vendor-89', name: 'Triple S', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Supplier' },\n  { id: 'vendor-90', name: 'Tulio Linares', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n  { id: 'vendor-91', name: 'Uinted Rentals', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'Rental' },\n  { id: 'vendor-92', name: 'Victor Rodriguez', contactPerson: 'N/A', phone: 'N/A', email: 'N/A', trade: 'General Labor' },\n];\n\nexport const budgetCategories: BudgetCategory[] = [\n  { id: 'cat-1', name: 'Demolition' },\n  { id: 'cat-2', name: 'Concrete' },\n  { id: 'cat-3', name: 'Masonry' },\n  { id: 'cat-4', name: 'Steel' },\n  { id: 'cat-5', name: 'Framing' },\n  { id: 'cat-6', name: 'Plumbing' },\n  { id: 'cat-7', name: 'Electrical' },\n  { id: 'cat-8', name: 'HVAC' },\n  { id: 'cat-9', name: 'Finishes' },\n  { id: 'cat-10', name: 'Site Work' },\n  { id: 'cat-11', name: 'Ansul System' },\n  { id: 'cat-12', name: 'Bathroom Partitions' },\n  { id: 'cat-13', name: 'Bollards/Stoppers' },\n  { id: 'cat-14', name: 'Change Order' },\n  { id: 'cat-15', name: 'Cleaning' },\n  { id: 'cat-16', name: 'CMU' },\n  { id: 'cat-17', name: 'Doors/Hardware' },\n  { id: 'cat-18', name: 'Exterior panels' },\n  { id: 'cat-19', name: 'Fences' },\n  { id: 'cat-20', name: 'Floor' },\n  { id: 'cat-21', name: 'Foundation Labor' },\n  { id: 'cat-22', name: 'Foundation Material' },\n  { id: 'cat-23', name: 'Foundation-Piers Labor' },\n  { id: 'cat-24', name: 'Framing Labor' },\n  { id: 'cat-25', name: 'Framing Material' },\n  { id: 'cat-26', name: 'Fuel Canopy Labor' },\n  { id: 'cat-27', name: 'Fuel Canopy Material' },\n  { id: 'cat-28', name: 'FuelCanopyBricks' },\n  { id: 'cat-29', name: 'Get Reimbursed' },\n  { id: 'cat-30', name: 'Grass Cut' },\n  { id: 'cat-31', name: 'Haul-Off' },\n  { id: 'cat-32', name: 'KnoxBox' },\n  { id: 'cat-33', name: 'Landsacpe Labor' },\n  { id: 'cat-34', name: 'Landsacpe Material' },\n  { id: 'cat-35', name: 'Millwork' },\n  { id: 'cat-36', name: 'Misc' },\n  { id: 'cat-37', name: 'Nichiha Labor' },\n  { id: 'cat-38', name: 'Nichiha Material' },\n  { id: 'cat-39', name: 'Paint Labor' },\n  { id: 'cat-40', name: 'Paint Material' },\n  { id: 'cat-41', name: 'Parking lot Labor' },\n  { id: 'cat-42', name: 'Parking lot Material' },\n  { id: 'cat-43', name: 'Permit' },\n  { id: 'cat-44', name: 'Pollution Control' },\n  { id: 'cat-45', name: 'Rental' },\n  { id: 'cat-46', name: 'Roof' },\n  { id: 'cat-47', name: 'Sitework Labor' },\n  { id: 'cat-48', name: 'Sitework Material' },\n  { id: 'cat-49', name: 'Steel Labor' },\n  { id: 'cat-50', name: 'Steel Material' },\n  { id: 'cat-51', name: 'StoreFrontCanopy Labor' },\n  { id: 'cat-52', name: 'StoreFrontCanopy Material' },\n  { id: 'cat-53', name: 'Store Front Glass' },\n  { id: 'cat-54', name: 'Striping' },\n  { id: 'cat-55', name: 'Stucco/Stone' },\n  { id: 'cat-56', name: 'Survey' },\n  { id: 'cat-57', name: 'SWPP' },\n  { id: 'cat-58', name: 'Tiles Labor' },\n  { id: 'cat-59', name: 'Tiles Material' },\n  { id: 'cat-60', name: 'TO BE PAID' },\n  { id: 'cat-61', name: 'Undrgrnd pipes Labor' },\n  { id: 'cat-62', name: 'Undrgrnd pipes Material' },\n  { id: 'cat-63', name: 'Utility Bill' },\n  { id: 'cat-64', name: 'Venthood' },\n  { id: 'cat-65', name: 'Builders Risk' },\n  { id: 'cat-66', name: 'Curbs Labor' },\n  { id: 'cat-67', name: 'Curbs Material' },\n  { id: 'cat-68', name: 'Sitework Material' },\n  { id: 'cat-69', name: 'Sidewalk Labor' },\n  { id: 'cat-70', name: 'Sidewalk Material' },\n  { id: 'cat-71', name: 'Dirtwork-Lbr' },\n  { id: 'cat-72', name: '.GROUNDBREAK' },\n  { id: 'cat-73', name: 'Haul Off' },\n  { id: 'cat-74', name: 'Foundation-Main' },\n  { id: 'cat-75', name: 'Foundation-Mtrl' },\n  { id: 'cat-76', name: 'Parking lot-Mtrl' },\n  { id: 'cat-77', name: 'Parking lot-Labor' },\n];\n\nexport const projects: Project[] = [\n  {\n    id: 'proj-1',\n    projectNumber: '2023-001',\n    name: 'Downtown Office Tower',\n    ownerName: 'Metropolis Holdings',\n    addressStreet: '123 Commerce St',\n    city: 'New York',\n    zip: '10001',\n    description: 'A 50-story office building with retail space on the ground floor.',\n    status: 'In Progress',\n    percentComplete: 45,\n    startDate: '2023-01-15',\n    endDate: '2025-12-31',\n    revisedContract: 150000000,\n    finalBidAmount: 165000000,\n    imageUrl: 'https://picsum.photos/seed/tower/600/400',\n    imageHint: 'office tower',\n  },\n  {\n    id: 'proj-2',\n    projectNumber: '2023-002',\n    name: 'Suburban Retail Center',\n    ownerName: 'Community Builders',\n    addressStreet: '456 Retail Ave',\n    city: 'Anytown',\n    zip: '54321',\n    description: 'A sprawling retail center with multiple tenants.',\n    status: 'Planning',\n    percentComplete: 10,\n    startDate: '2023-06-01',\n    endDate: '2024-08-31',\n    revisedContract: 25000000,\n    finalBidAmount: 27500000,\n    imageUrl: 'https://picsum.photos/seed/retail/600/400',\n    imageHint: 'retail center',\n  },\n  {\n    id: 'proj-3',\n    projectNumber: '2023-003',\n    name: 'Hillside Residence',\n    ownerName: 'The Smith Family',\n    addressStreet: '789 Vista Dr',\n    city: 'Beverly Hills',\n    zip: '90210',\n    description: 'A luxury single-family home with a pool and guest house.',\n    status: 'Completed',\n    percentComplete: 100,\n    startDate: '2022-03-01',\n    endDate: '2023-09-15',\n    revisedContract: 5000000,\n    finalBidAmount: 5500000,\n    imageUrl: 'https://picsum.photos/seed/residence/600/400',\n    imageHint: 'luxury home',\n  },\n  {\n    id: 'proj-4',\n    projectNumber: '8845',\n    name: 'Temple 8845',\n    ownerName: 'Temple 8845 Owner',\n    addressStreet: 'Temple 8845 Address',\n    city: 'Temple',\n    zip: '76502',\n    description: 'Temple 8845 Project',\n    status: 'In Progress',\n    percentComplete: 50,\n    startDate: '2025-08-12',\n    endDate: '2026-08-12',\n    revisedContract: 500000,\n    finalBidAmount: 550000,\n    imageUrl: 'https://picsum.photos/seed/temple/600/400',\n    imageHint: 'construction site',\n  },\n  {\n    id: 'proj-5',\n    projectNumber: 'PM-001',\n    name: 'Power Mart',\n    ownerName: 'Power Mart Corp',\n    addressStreet: '789 Power Dr',\n    city: 'Houston',\n    zip: '77001',\n    description: 'New convenience store and gas station.',\n    status: 'Planning',\n    percentComplete: 5,\n    startDate: '2024-09-01',\n    endDate: '2025-03-31',\n    revisedContract: 2000000,\n    finalBidAmount: 2200000,\n    imageUrl: 'https://picsum.photos/seed/powermart/600/400',\n    imageHint: 'gas station',\n  }\n];\n\nexport const tasks: Task[] = [\n  { id: 'task-1', projectId: 'proj-1', title: 'Finalize structural steel drawings', status: 'In Progress', priority: 'High', assigneeId: 'user-1', dueDate: '2024-07-30' },\n  { id: 'task-2', projectId: 'proj-1', title: 'Procure curtain wall materials', status: 'To Do', priority: 'Medium', assigneeId: 'user-2', dueDate: '2024-08-15' },\n  { id: 'task-3', projectId: 'proj-2', title: 'Submit for zoning variance', status: 'Done', priority: 'High', assigneeId: 'user-1', dueDate: '2024-05-20' },\n  { id: 'task-4', projectId: 'proj-3', title: 'Complete final punch list', status: 'Done', priority: 'Low', assigneeId: 'user-2', dueDate: '2023-09-01' },\n  { id: 'task-5', projectId: 'proj-1', title: 'Install HVAC units on floors 10-15', status: 'To Do', priority: 'Medium', assigneeId: 'user-2', dueDate: '2024-08-05' },\n];\n\nexport const rfis: RFI[] = [\n  { id: 'rfi-1', projectId: 'proj-1', rfiNumber: 'RFI-001', dateSubmitted: '2024-07-20', subject: 'Clarification on beam connection detail', question: 'Drawing S-501 shows a bolted connection, but S-502 shows a welded connection for the same beam type. Please clarify which is correct.', status: 'Open' },\n  { id: 'rfi-2', projectId: 'proj-1', rfiNumber: 'RFI-002', dateSubmitted: '2024-07-15', subject: 'Specified window manufacturer lead time', question: 'The specified window manufacturer (Model XYZ) has a 16-week lead time, which will impact the schedule. Can we approve an alternate?', status: 'Closed', answer: 'Alternate manufacturer \"ABC Windows\" is approved. Proceed with substitution.', dateAnswered: '2024-07-18' },\n];\n\nexport const issues: Issue[] = [\n  { id: 'issue-1', projectId: 'proj-1', date: '2024-07-22', severity: 'High', description: 'Unforeseen rock formation discovered during excavation for foundation.', status: 'Open' },\n  { id: 'issue-2', projectId: 'proj-3', date: '2023-08-10', severity: 'Low', description: 'Incorrect paint color used in master bathroom. Needs to be repainted.', status: 'Closed', correctiveAction: 'Repainted with correct color (SW-7005) on 2023-08-12.' },\n];\n\nexport const budgetItems: BudgetItem[] = [\n  { id: 'bi-1', projectId: 'proj-1', category: 'Steel', costType: 'material', originalBudget: 15000000, approvedCOBudget: 0, committedCost: 14500000, projectedCost: 14500000 },\n  { id: 'bi-2', projectId: 'proj-1', category: 'Concrete', costType: 'material', originalBudget: 10000000, approvedCOBudget: 500000, committedCost: 10200000, projectedCost: 10500000 },\n  { id: 'bi-3', projectId: 'proj-1', category: 'Electrical', costType: 'both', originalBudget: 8000000, approvedCOBudget: 0, committedCost: 7500000, projectedCost: 8000000 },\n  { id: 'bi-4', projectId: 'proj-2', category: 'Site Work', costType: 'labor', originalBudget: 1200000, approvedCOBudget: 0, committedCost: 1100000, projectedCost: 1200000 },\n  { id: 'bi-5', projectId: 'proj-3', category: 'Finishes', costType: 'material', originalBudget: 750000, approvedCOBudget: 50000, committedCost: 800000, projectedCost: 800000 },\n];\n\nexport const expenses: Expense[] = [\n  { id: 'exp-1', projectId: 'proj-1', date: '2024-07-25', category: 'Steel', vendorName: 'Structural Steel Inc.', description: 'Payment for steel delivery #3', amount: 250000, paymentMethod: 'Check', paymentReference: 'CHK-1054' },\n  { id: 'exp-2', projectId: 'proj-1', date: '2024-07-26', category: 'Concrete', vendorName: 'City Concrete', description: 'Concrete pour for foundation slab', amount: 120000, paymentMethod: 'ACH' },\n  { id: 'exp-3', projectId: 'proj-4', date: '2025-08-12', category: '.GROUNDBREAK', vendorName: 'Shooker Moula', description: 'Groundbroke on', amount: 0, paymentMethod: 'Groundbreaking' },\n  { id: 'exp-4', projectId: 'proj-4', date: '2025-08-10', category: 'Pollution Control', vendorName: 'Fabco', description: 'Stand wired back silt fence + t post + ratchet stap + marking paint + twisted twine string', amount: 1182.36, paymentMethod: 'Credit Card', paymentReference: '5663', invoiceNumber: '2404185-118' },\n  { id: 'exp-5', projectId: 'proj-4', date: '2025-08-15', category: 'Rental', vendorName: 'Dumpster Dogs TX', description: 'Potty rental initiated, 1st month $179+$50setup $179/mo - 28 days', amount: 229, paymentMethod: 'Credit Card', paymentReference: '5663', invoiceNumber: 'Initial charge' },\n  { id: 'exp-6', projectId: 'proj-4', date: '2025-08-18', category: 'Steel', vendorName: 'Triple-S Steel Holdings Inc', description: 'Material for barjoist (material cost $42,688.29 + tax + freight cost $1055.44)', amount: 43743.73, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: 'RS-651836' },\n  { id: 'exp-7', projectId: 'proj-4', date: '2025-08-20', category: 'Survey', vendorName: 'Lone Star Mapping', description: 'Construction Staking', amount: 1500, paymentMethod: 'Credit Card', paymentReference: '5663', invoiceNumber: '1374' },\n  { id: 'exp-8', projectId: 'proj-4', date: '2025-08-20', category: 'Get Reimbursed', vendorName: 'City Of Temple TX', description: 'Temporary fire hydrant water meter', amount: 600, paymentMethod: 'Credit Card', paymentReference: '5663', invoiceNumber: '13' },\n  { id: 'exp-9', projectId: 'proj-4', date: '2025-08-20', category: 'Steel', vendorName: 'Triple-S Steel Holdings Inc', description: 'Material for barjoist (material cost $42,688.29 + (freight cost $1055.44)', amount: 1055.45, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: 'RS-651836' },\n  { id: 'exp-10', projectId: 'proj-4', date: '2025-08-22', category: 'Steel', vendorName: 'Carlos Osorto', description: 'Ttl Cntrct $55k labor, prv bal $55k, pd tdy $5k, new bal $50k', amount: 5000, paymentMethod: 'Check', paymentReference: '5433', invoiceNumber: '1st pmt' },\n  { id: 'exp-11', projectId: 'proj-4', date: '2025-08-22', category: 'Pollution Control', vendorName: 'Jose Ramirez', description: 'White Cap - 140N 15\\' x 360\\' Non Woven 600 SY Mirafi', amount: 790.21, paymentMethod: 'Check', paymentReference: '5434', invoiceNumber: '67839274' },\n  { id: 'exp-12', projectId: 'proj-4', date: '2025-08-22', category: 'Pollution Control', vendorName: 'Jose Ramirez', description: 'Terrazas Construction - 24 yrd bullrock load', amount: 825, paymentMethod: 'Check', paymentReference: '5434', invoiceNumber: 'Bullrock' },\n  { id: 'exp-13', projectId: 'proj-4', date: '2025-08-22', category: 'Dirtwork-Lbr', vendorName: 'Jose Ramirez', description: 'Labor to cut all the trees and clear the land with vegetation (Haul off separate approx 40 loads)', amount: 7500, paymentMethod: 'Check', paymentReference: '5434', invoiceNumber: 'Dirtwork' },\n  { id: 'exp-14', projectId: 'proj-4', date: '2025-08-23', category: 'Steel', vendorName: 'Triple-S Steel Holdings Inc', description: 'Material for barjoist (material cost $32,281.85 + tax + freight cost $650)', amount: 32281.85, paymentMethod: 'Credit Card', paymentReference: '5663', invoiceNumber: 'RS-659821' },\n  { id: 'exp-15', projectId: 'proj-4', date: '2025-08-23', category: 'Steel', vendorName: 'Triple-S Steel Holdings Inc', description: 'Material for barjoist (material cost $32,281.85 + tax + (freight cost $650)', amount: 650, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: '652659' },\n  { id: 'exp-16', projectId: 'proj-4', date: '2025-08-26', category: 'Haul Off', vendorName: 'Jose Ramirez', description: '42 x $160 haul off + $360 extra charge for over load (more to come)', amount: 7080, paymentMethod: 'Check', paymentReference: '5436', invoiceNumber: 'Haul Off' },\n  { id: 'exp-17', projectId: 'proj-4', date: '2025-08-26', category: 'Haul Off', vendorName: 'Jose Ramirez', description: '4 x backhoe with operator to haul off heavy tree trunks', amount: 2200, paymentMethod: 'Check', paymentReference: '5436', invoiceNumber: 'Haul Off' },\n  { id: 'exp-18', projectId: 'proj-4', date: '2025-08-26', category: 'Sitework-Mtrl', vendorName: 'Jose Ramirez', description: 'Ttl Base back fill needed 370 loads x this time charged $370 ea, x24 1st of 15', amount: 8880, paymentMethod: 'Check', paymentReference: '5436', invoiceNumber: 'Sitework' },\n  { id: 'exp-19', projectId: 'proj-4', date: '2025-08-28', category: 'Steel', vendorName: 'Triple-S Steel Holdings Inc', description: 'Material for barjoist (material cost $11,196.42 + tax + freight cost $703.64)', amount: 11196.42, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: 'RS-667851' },\n  { id: 'exp-20', projectId: 'proj-4', date: '2025-08-28', category: 'Steel', vendorName: 'Triple-S Steel Holdings Inc', description: 'Material for barjoist (material cost $11,196.42 + tax + freight cost $703.64)', amount: 703.64, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: 'RS-667851' },\n  { id: 'exp-21', projectId: 'proj-4', date: '2025-08-30', category: 'Foundation-Main', vendorName: 'Jose Ramirez', description: 'Foundation LABOR ttl $31500, prv bal $31500, pd tdy $10k, bal $21500', amount: 10000, paymentMethod: 'Check', paymentReference: '5437', invoiceNumber: '1st foundation chk' },\n  { id: 'exp-22', projectId: 'proj-4', date: '2025-08-31', category: 'Foundation-Main', vendorName: 'Tex-Mix Partners Ltd', description: 'Foundation footings concrete 34 yd 3000 psi x $130 ea + tax', amount: 4938.37, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: 'Concrete fndtion' },\n  { id: 'exp-23', projectId: 'proj-4', date: '2025-09-03', category: 'Pollution Control', vendorName: 'SD Construction Material', description: '3/4\"x18\" Nail stake w/holes for securing silt fences', amount: 267.38, paymentMethod: 'Credit Card', paymentReference: '5663', invoiceNumber: '16225' },\n  { id: 'exp-24', projectId: 'proj-4', date: '2025-09-04', category: 'Plumbing', vendorName: 'Leon Plumbing', description: 'TTl cntrct $75K, prv bal $75k, pd tdy $10k, bal $65k', amount: 10000, paymentMethod: 'Check', paymentReference: '5444', invoiceNumber: '1st chk' },\n  { id: 'exp-25', projectId: 'proj-4', date: '2025-09-05', category: 'Sitework-Mtrl', vendorName: 'Jose Ramirez', description: 'Ttl Base back fill needed 370 loads x this time charged $360 ea, x42 2nd of 15', amount: 15120, paymentMethod: 'Check', paymentReference: '5446', invoiceNumber: 'Sitework' },\n  { id: 'exp-26', projectId: 'proj-4', date: '2025-09-05', category: 'Haul Off', vendorName: 'Jose Ramirez', description: '21 x $160 branches haul off + spoil haul 13 x $150', amount: 5310, paymentMethod: 'Check', paymentReference: '5446', invoiceNumber: 'Haul Off' },\n  { id: 'exp-27', projectId: 'proj-4', date: '2025-09-05', category: 'Rental', vendorName: 'Jose Ramirez', description: 'Diesel for all the equipment up to Aug 31 2025', amount: 1400, paymentMethod: 'Check', paymentReference: '5446', invoiceNumber: 'Diesel Fuel' },\n  { id: 'exp-28', projectId: 'proj-4', date: '2025-09-13', category: 'Electrical', vendorName: 'A & G Electric', description: 'Elec.Cntrct $245k, prv bal $245k, pd tdy $15k, new bal: $230k', amount: 15000, paymentMethod: 'Check', paymentReference: '2448', invoiceNumber: '1st check' },\n  { id: 'exp-29', projectId: 'proj-4', date: '2025-09-15', category: 'Rental', vendorName: 'Dumpster Dogs TX', description: 'Potty rental renewal', amount: 179, paymentMethod: 'Credit Card', paymentReference: '5663', invoiceNumber: '2nd month' },\n  { id: 'exp-30', projectId: 'proj-4', date: '2025-09-16', category: 'Steel', vendorName: 'Henry Osorto', description: 'Ttl Cntrct $55k labor, prv bal $50k, pd tdy $15k, new bal $35k', amount: 15000, paymentMethod: 'Check', paymentReference: '5451', invoiceNumber: '2nd pmt' },\n  { id: 'exp-31', projectId: 'proj-4', date: '2025-09-18', category: 'Plumbing', vendorName: 'Leon Plumbing', description: 'TTl cntrct $75K, prv bal $65k, pd tdy $15k, bal $50k (underground work completed)', amount: 15000, paymentMethod: 'Check', paymentReference: '5455', invoiceNumber: '2nd chk' },\n  { id: 'exp-32', projectId: 'proj-4', date: '2025-09-18', category: 'Foundation-Labor', vendorName: 'Jose Ramirez', description: 'Foundation LABOR ttl $31500, prv bal $21500, PAID OFF', amount: 21500, paymentMethod: 'Check', paymentReference: '5456', invoiceNumber: 'PAID OFF' },\n  { id: 'exp-33', projectId: 'proj-4', date: '2025-09-18', category: 'Rental', vendorName: 'United Rental', description: 'Mini excavator for installing silt fences 08/08/25-08/14/25 Check#H20250918', amount: 1989.92, paymentMethod: 'Bank ACH', paymentReference: 'Bank ACH', invoiceNumber: '251514881-001' },\n  { id: 'exp-34', projectId: 'proj-4', date: '2025-09-18', category: 'Rental', vendorName: 'United Rental', description: 'Wood Chipper to chip off the smaller trees 8/12/25-8/14/25 Check#H20250918', amount: 1656.31, paymentMethod: 'Bank ACH', paymentReference: 'Bank ACH', invoiceNumber: '251631202-001' },\n  { id: 'exp-35', projectId: 'proj-4', date: '2025-09-18', category: 'Rental', vendorName: 'United Rental', description: 'Wood Chipper repair Check#H20250918', amount: 13.56, paymentMethod: 'Bank ACH', paymentReference: 'Bank ACH', invoiceNumber: '251851261-001' },\n  { id: 'exp-36', projectId: 'proj-4', date: '2025-09-18', category: 'Rental', vendorName: 'United Rental', description: 'EXCAVATOR BUCKET 36\"', amount: 4568.61, paymentMethod: 'Bank ACH', paymentReference: 'Bank ACH', invoiceNumber: '252117148-001' },\n  { id: 'exp-37', projectId: 'proj-4', date: '2025-09-18', category: 'Parking lot', vendorName: 'Jorge De Los Santos', description: '4 stab. sand $680ea,4x bank sand $230ea + haul off dirt and concrete $1892.09 (reimbursed on 10/03/25)', amount: 5532.09, paymentMethod: 'Karim\\'s Card', paymentReference: 'Karim\\'s Card', invoiceNumber: 'Parking lot' },\n  { id: 'exp-38', projectId: 'proj-4', date: '2025-09-18', category: 'Plumbing', vendorName: 'Gatco New Braunfels', description: 'TTl cntrct $75K, prv bal $50k, pd tdy $5102.52, bal $44897.48', amount: 5102.52, paymentMethod: 'Check', paymentReference: '5458', invoiceNumber: '3rd chk' },\n  { id: 'exp-39', projectId: 'proj-4', date: '2025-09-18', category: 'Plumbing', vendorName: 'Leon Plumbing', description: 'TTl cntrct $75K, prv bal $44897.48, pd tdy $4897.48, bal $40k', amount: 4897.48, paymentMethod: 'Check', paymentReference: '5459', invoiceNumber: '4th chk' },\n  { id: 'exp-40', projectId: 'proj-4', date: '2025-09-25', category: 'Steel', vendorName: 'Triple-S Steel Holdings Inc', description: 'Full order cost, excluding decking and delivery (Grand ttl $163,418.31),', amount: 42817.91, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: 'RS-293988' },\n  { id: 'exp-41', projectId: 'proj-4', date: '2025-09-26', category: 'Sitework-Mtrl', vendorName: 'Jose Ramirez', description: 'Ttl Base back fill needed 370 loads x this time charged $360 ea, x63 3rd of 15', amount: 22680, paymentMethod: 'Check', paymentReference: '5461', invoiceNumber: 'Back fill' },\n  { id: 'exp-42', projectId: 'proj-4', date: '2025-09-29', category: 'Foundation-Mtrl', vendorName: 'Tex Mix Concrete Mix', description: 'Foundation pour', amount: 53448.44, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: 'Foundtion Pour' },\n  { id: 'exp-43', projectId: 'proj-4', date: '2025-10-01', category: 'Parking lot-Mtrl', vendorName: 'Espinoza Stone Inc.', description: '3500 psi x 500 loads concrete $136/ld + $25/ld fee x 50 loads, for partial parking lot', amount: 74963.13, paymentMethod: 'Credit Card', paymentReference: '5663', invoiceNumber: 'ESP11864' },\n  { id: 'exp-44', projectId: 'proj-4', date: '2025-10-04', category: 'Steel', vendorName: 'Triple-S Steel Holdings Inc', description: 'Full order cost, excluding decking and delivery (Grand ttl $163,418.31),', amount: 13667.56, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: 'RS-295180' },\n  { id: 'exp-45', projectId: 'proj-4', date: '2025-10-04', category: 'Get Reimbursed', vendorName: 'City Of Temple TX', description: 'Temporary fire hydrant water meter usage fee acct# 41333-0', amount: 177.59, paymentMethod: 'Credit Card', paymentReference: '5663', invoiceNumber: '4015841' },\n  { id: 'exp-46', projectId: 'proj-4', date: '2025-10-06', category: 'Rental', vendorName: 'Sunrise Creek Pumping, LLC', description: 'Partial parking lot pour, approix. 500 yards', amount: 5547.6, paymentMethod: 'Bank ACH', paymentReference: 'Bank ACH', invoiceNumber: '456631' },\n  { id: 'exp-47', projectId: 'proj-4', date: '2025-10-07', category: 'Steel', vendorName: 'Triple-S Steel Holdings Inc', description: 'Full order cost, excluding decking and delivery (Grand ttl $163,418.31),', amount: 12530.94, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: 'RS-295180' },\n  { id: 'exp-48', projectId: 'proj-4', date: '2025-10-07', category: 'Rental', vendorName: 'Sunrise Creek Pumping, LLC', description: 'Foundation pour, approx. 250 yards', amount: 3266, paymentMethod: 'Bank ACH', paymentReference: 'Bank ACH', invoiceNumber: '456353' },\n  { id: 'exp-49', projectId: 'proj-4', date: '2025-10-07', category: 'Parking lot', vendorName: 'The Kings Transport', description: 'Hauled off excess dirt and concrete wash concrete (to be reimburesed)', amount: 4896.76, paymentMethod: 'Karim\\'s Card', paymentReference: 'Karim\\'s Card', invoiceNumber: 'Parking lot' },\n  { id: 'exp-50', projectId: 'proj-4', date: '2025-10-09', category: 'Steel', vendorName: 'Carlos Osorto', description: 'Ttl Cntrct $55k labor, prv bal $35k, pd tdy $15k, new bal $20k', amount: 15000, paymentMethod: 'Check', paymentReference: '5468', invoiceNumber: '3rd pmt' },\n  { id: 'exp-51', projectId: 'proj-4', date: '2025-10-09', category: 'Foundation-Mtrl', vendorName: 'GC Rebar', description: 'Ttl inv# 14441 $27669.86, FOUNDATION mtrl $22365.86', amount: 22365.86, paymentMethod: 'Check', paymentReference: '5469', invoiceNumber: '14441' },\n  { id: 'exp-52', projectId: 'proj-4', date: '2025-10-09', category: 'Parking lot', vendorName: 'GC Rebar', description: 'Ttl inv# 14441 $27669.86, parking lot $5304, got it because of big truck freight', amount: 5304, paymentMethod: 'Check', paymentReference: '5469', invoiceNumber: '14441' },\n  { id: 'exp-53', projectId: 'proj-4', date: '2025-10-09', category: 'Foundation-Mtrl', vendorName: 'GC Rebar', description: 'CUSTOM FAB 12\"X24\"X12\" #3 (3/8\") U BAR, 8\"X45\"X8\" #5 (5/8\") STRAIGHT BODY Z BAR', amount: 550.13, paymentMethod: 'Check', paymentReference: '5469', invoiceNumber: '14465' },\n  { id: 'exp-54', projectId: 'proj-4', date: '2025-10-09', category: 'Parking lot-Labor', vendorName: 'Jose Ramirez', description: 'Parkinglot ttl sf 40k sf $65k, poured 26k sf, remaining 14k sf, prv bal, $65k, pd tdy $39k, bal $26k', amount: 39000, paymentMethod: 'Check', paymentReference: '5470', invoiceNumber: '1st prkng lt Lbr' },\n  { id: 'exp-55', projectId: 'proj-4', date: '2025-10-09', category: 'Rental', vendorName: 'Jose Ramirez', description: 'Skidsteer one month', amount: 3400, paymentMethod: 'Check', paymentReference: '5470', invoiceNumber: 'Rental' },\n  { id: 'exp-56', projectId: 'proj-4', date: '2025-10-09', category: 'Rental', vendorName: 'Dumpster Dogs TX', description: 'Potty rental renewal', amount: 179, paymentMethod: 'Credit Card', paymentReference: '5663', invoiceNumber: '3rd month' },\n  { id: 'exp-57', projectId: 'proj-4', date: '2025-10-09', category: 'Rental', vendorName: 'The Kings Transport', description: '2 x 40 yards dumpter swaps $943.44 ea (to be reimburese)', amount: 1886.88, paymentMethod: 'Karim\\'s Card', paymentReference: 'Karim\\'s Card', invoiceNumber: 'Rental' },\n  { id: 'exp-58', projectId: 'proj-4', date: '2025-10-14', category: 'Rental', vendorName: 'Texas State Rentals', description: 'Forklift,Telescopic, 9000-10,000lb 2 to 3 months (08/20/25-09/17/25) 1st month', amount: 5740.29, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: '37625-6' },\n  { id: 'exp-59', projectId: 'proj-4', date: '2025-10-14', category: 'Rental', vendorName: 'Texas State Rentals', description: '12\" Bucket for SY26+24\" Bucket for SY35+Sany SY26 Mini Excavator (08/22/25-09/19/25)', amount: 2749.62, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: '37684-6' },\n  { id: 'exp-60', projectId: 'proj-4', date: '2025-10-14', category: 'Rental', vendorName: 'Texas State Rentals', description: 'Ammann ARS70 Roller, 66\" ACZ15184PN3031392 (08/22/25-09/19/25)', amount: 4565.49, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: '37687-6' },\n  { id: 'exp-61', projectId: 'proj-4', date: '2025-10-14', category: 'Rental', vendorName: 'Texas State Rentals', description: 'Dozer, CASE 650 or Cat D4 -rented (09/09/2025-10/07/25) FINAL', amount: 4307.6, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: '37514A-6' },\n  { id: 'exp-62', projectId: 'proj-4', date: '2025-10-14', category: 'Rental', vendorName: 'Texas State Rentals', description: 'Dozer, CASE 650 or Cat D4 -rented (08/12/2025-09/08/25)', amount: 6088.91, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: '37514-6' },\n  { id: 'exp-63', projectId: 'proj-4', date: '2025-10-14', category: 'Rental', vendorName: 'Texas State Rentals', description: 'Forklift,Telescopic, 9000-10,000lb 2 to 3 months (09/17/25-10-15-25) 2nd month', amount: 5090.79, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: '37636A-6' },\n  { id: 'exp-64', projectId: 'proj-4', date: '2025-10-14', category: 'Rental', vendorName: 'Texas State Rentals', description: '12\" Bucket for SY26+24\" Bucket for SY35+Sany SY26 Mini Excavator (09/19/25-10/03/25) FINAL', amount: 2134.89, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: '37684A-6' },\n  { id: 'exp-65', projectId: 'proj-4', date: '2025-10-14', category: 'Rental', vendorName: 'Texas State Rentals', description: 'Ammann ARS70 Roller, 66\" ACZ15184PN3031392 (09/19/25-10/01/25) FINAL', amount: 1566.4, paymentMethod: 'Credit Card', paymentReference: '1769', invoiceNumber: '3768A-6' },\n  { id: 'exp-66', projectId: 'proj-4', date: '2025-10-14', category: 'Rental', vendorName: 'Texas State Rentals', description: 'Forklift,Telescopic, 9000-10,000lb 3 to 3 months (10-15-25-11-12-25) 3rd month', amount: 5090.79, paymentMethod: 'to be paid', paymentReference: 'to be paid', invoiceNumber: '376836B-6' },\n  { id: 'exp-67', projectId: 'proj-4', date: '2025-10-15', category: 'Parking lot-Mtrl', vendorName: 'GC Rebar', description: '#4 rebar and other parkinglot material', amount: 30472.36, paymentMethod: 'to be paid', paymentReference: 'to be paid', invoiceNumber: '14822' },\n  { id: 'exp-68', projectId: 'proj-4', date: '2025-10-16', category: 'Parking lot-Mtrl', vendorName: 'GC Rebar', description: 'Parkinglot material', amount: 4495.97, paymentMethod: 'to be paid', paymentReference: 'to be paid', invoiceNumber: '15029' },\n  { id: 'exp-69', projectId: 'proj-4', date: '2025-10-17', category: 'Parking lot-Mtrl', vendorName: 'GC Rebar', description: 'Parkinglot material', amount: 1740.12, paymentMethod: 'to be paid', paymentReference: 'to be paid', invoiceNumber: '15325' },\n  { id: 'exp-70', projectId: 'proj-4', date: '2025-10-18', category: 'Steel', vendorName: 'Triple-S Steel Holdings Inc', description: 'Full order cost, excluding decking and delivery (Grand ttl $163,418.31), remaining amount', amount: 32043.88, paymentMethod: 'to be paid', paymentReference: 'to be paid', invoiceNumber: 'RS-651204' },\n];\n\nexport const changeOrders: ChangeOrder[] = [\n    { id: 'co-1', projectId: 'proj-1', coNumber: 'CO-001', description: 'Increase electrical capacity for 10th floor data center.', totalRequest: 125000, status: 'Approved' },\n    { id: 'co-2', projectId: 'proj-1', coNumber: 'CO-002', description: 'Owner requested change to lobby finishes.', totalRequest: 75000, status: 'Submitted' },\n    { id: 'co-3', projectId: 'proj-3', coNumber: 'CO-001', description: 'Add outdoor kitchen to patio.', totalRequest: 50000, status: 'Executed' },\n];\n\nexport const milestones: Milestone[] = [\n    { id: 'm-1', projectId: 'proj-1', name: 'Foundation Poured', description: 'Foundation and slab for the main tower have been poured.', dueDate: '2023-04-15', status: 'Completed' },\n    { id: 'm-2', projectId: 'proj-1', name: 'Steel Structure Topped Out', description: 'The final beam has been placed on the main tower structure.', dueDate: '2024-08-30', status: 'In Progress' },\n    { id: 'm-3', projectId: 'proj-1', name: 'Building Weather-Tight', description: 'Exterior cladding and roofing are complete, making the building weather-tight.', dueDate: '2025-02-28', status: 'Upcoming' },\n    { id: 'm-4', projectId: 'proj-2', name: 'Site Work Complete', description: 'All grading, utilities, and paving for the retail center are complete.', dueDate: '2023-10-01', status: 'Upcoming' },\n];\n",
  "src/lib/placeholder-images.json": "{\n  \"placeholderImages\": []\n}\n",
  "src/lib/placeholder-images.ts": "import data from './placeholder-images.json';\n\nexport type ImagePlaceholder = {\n  id: string;\n  description: string;\n  imageUrl: string;\n  imageHint: string;\n};\n\nexport const PlaceHolderImages: ImagePlaceholder[] = data.placeholderImages;\n",
  "src/lib/types.ts": "\n\nexport type Project = {\n  id: string;\n  projectNumber: string;\n  name: string;\n  ownerName: string;\n  addressStreet: string;\n  city: string;\n  zip: string;\n  description: string;\n  status: 'Planning' | 'In Progress' | 'Completed';\n  percentComplete: number;\n  startDate: string;\n  endDate: string;\n  revisedContract: number;\n  finalBidAmount: number;\n  imageUrl: string;\n  imageHint: string;\n};\n\nexport type BudgetCategory = {\n  id: string;\n  name: string;\n};\n\nexport type Vendor = {\n  id: string;\n  name: string;\n  contactPerson: string;\n  phone: string;\n  email: string;\n  trade: string;\n};\n\nexport type TeamMember = {\n  id: string;\n  name: string;\n  role: string;\n  email: string;\n  phone: string;\n  avatarUrl: string;\n};\n\nexport type BudgetItem = {\n  id: string;\n  projectId: string;\n  category: string;\n  costType: 'labor' | 'material' | 'both';\n  notes?: string;\n  originalBudget: number;\n  approvedCOBudget: number;\n  committedCost: number;\n  projectedCost: number;\n};\n\nexport type Expense = {\n  id: string;\n  projectId: string;\n  date: string;\n  category: string;\n  vendorName?: string;\n  description: string;\n  amount: number;\n  paymentMethod: string;\n  paymentReference?: any;\n  invoiceNumber?: string;\n};\n\nexport type ChangeOrder = {\n  id: string;\n  projectId: string;\n  coNumber: string;\n  description: string;\n  totalRequest: number;\n  status: 'Submitted' | 'Approved' | 'Executed' | 'Rejected';\n};\n\nexport type Task = {\n  id: string;\n  projectId: string;\n  title: string;\n  status: 'To Do' | 'In Progress' | 'Done';\n  priority: 'Low' | 'Medium' | 'High';\n  assigneeId: string;\n  dueDate: string;\n};\n\nexport type RFI = {\n  id: string;\n  projectId: string;\n  rfiNumber: string;\n  dateSubmitted: string;\n  subject: string;\n  question: string;\n  status: 'Open' | 'Closed';\n  answer?: string;\n  dateAnswered?: string;\n};\n\nexport type Issue = {\n  id: string;\n  projectId: string;\n  date: string;\n  severity: 'Low' | 'Medium' | 'High';\n  description: string;\n  status: 'Open' | 'Closed';\n  correctiveAction?: string;\n};\n\nexport type Milestone = {\n  id: string;\n  projectId: string;\n  name: string;\n  description: string;\n  dueDate: string;\n  status: 'Upcoming' | 'In Progress' | 'Completed';\n};\n\n\nexport type Drawing = {\n  id: string;\n  projectId: string;\n  sheetNo: string;\n  title: string;\n  versions: {\n    version: number;\n    date: string;\n    description: string;\n    url: string;\n  }[];\n};\n\nexport type ClientUpload = {\n  id: string;\n  projectId: string;\n  fileName: string;\n  fileType: string;\n  fileUrl: string;\n  fileSize: string;\n  uploadedAt: string;\n  uploadedBy: string; // TeamMember ID\n};\n\nexport type AppUser = {\n    id: string;\n    name: string;\n    email: string;\n    avatarUrl: string;\n};\n\nexport type CompanyProfile = {\n    id: string;\n    name: string;\n    logoUrl: string;\n};\n",
  "src/lib/utils.ts": "import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n",
  "tailwind.config.ts": "import type {Config} from 'tailwindcss';\n\nexport default {\n  darkMode: ['class'],\n  content: [\n    './src/pages/**/*.{js,ts,jsx,tsx,mdx}',\n    './src/components/**/*.{js,ts,jsx,tsx,mdx}',\n    './src/app/**/*.{js,ts,jsx,tsx,mdx}',\n  ],\n  theme: {\n    extend: {\n      fontFamily: {\n        body: ['Inter', 'sans-serif'],\n        headline: ['Inter', 'sans-serif'],\n        code: ['monospace'],\n      },\n      colors: {\n        background: 'hsl(var(--background))',\n        foreground: 'hsl(var(--foreground))',\n        card: {\n          DEFAULT: 'hsl(var(--card))',\n          foreground: 'hsl(var(--card-foreground))',\n        },\n        popover: {\n          DEFAULT: 'hsl(var(--popover))',\n          foreground: 'hsl(var(--popover-foreground))',\n        },\n        primary: {\n          DEFAULT: 'hsl(var(--primary))',\n          foreground: 'hsl(var(--primary-foreground))',\n        },\n        secondary: {\n          DEFAULT: 'hsl(var(--secondary))',\n          foreground: 'hsl(var(--secondary-foreground))',\n        },\n        muted: {\n          DEFAULT: 'hsl(var(--muted))',\n          foreground: 'hsl(var(--muted-foreground))',\n        },\n        accent: {\n          DEFAULT: 'hsl(var(--accent))',\n          foreground: 'hsl(var(--accent-foreground))',\n        },\n        destructive: {\n          DEFAULT: 'hsl(var(--destructive))',\n          foreground: 'hsl(var(--destructive-foreground))',\n        },\n        border: 'hsl(var(--border))',\n        input: 'hsl(var(--input))',\n        ring: 'hsl(var(--ring))',\n        chart: {\n          '1': 'hsl(var(--chart-1))',\n          '2': 'hsl(var(--chart-2))',\n          '3': 'hsl(var(--chart-3))',\n          '4': 'hsl(var(--chart-4))',\n          '5': 'hsl(var(--chart-5))',\n        },\n        sidebar: {\n          DEFAULT: 'hsl(var(--sidebar-background))',\n          foreground: 'hsl(var(--sidebar-foreground))',\n          primary: 'hsl(var(--sidebar-primary))',\n          'primary-foreground': 'hsl(var(--sidebar-primary-foreground))',\n          accent: 'hsl(var(--sidebar-accent))',\n          'accent-foreground': 'hsl(var(--sidebar-accent-foreground))',\n          border: 'hsl(var(--sidebar-border))',\n          ring: 'hsl(var(--sidebar-ring))',\n        },\n      },\n      borderRadius: {\n        lg: 'var(--radius)',\n        md: 'calc(var(--radius) - 2px)',\n        sm: 'calc(var(--radius) - 4px)',\n      },\n      keyframes: {\n        'accordion-down': {\n          from: {\n            height: '0',\n          },\n          to: {\n            height: 'var(--radix-accordion-content-height)',\n          },\n        },\n        'accordion-up': {\n          from: {\n            height: 'var(--radix-accordion-content-height)',\n          },\n          to: {\n            height: '0',\n          },\n        },\n      },\n      animation: {\n        'accordion-down': 'accordion-down 0.2s ease-out',\n        'accordion-up': 'accordion-up 0.2s ease-out',\n      },\n    },\n  },\n  plugins: [require('tailwindcss-animate')],\n} satisfies Config;\n",
  "tsconfig.json": "{\n  \"compilerOptions\": {\n    \"target\": \"ES2017\",\n    \"lib\": [\"dom\", \"dom.iterable\", \"esnext\"],\n    \"allowJs\": true,\n    \"skipLibCheck\": true,\n    \"strict\": true,\n    \"noEmit\": true,\n    \"esModuleInterop\": true,\n    \"module\": \"esnext\",\n    \"moduleResolution\": \"bundler\",\n    \"resolveJsonModule\": true,\n    \"isolatedModules\": true,\n    \"jsx\": \"preserve\",\n    \"incremental\": true,\n    \"plugins\": [\n      {\n        \"name\": \"next\"\n      }\n    ],\n    \"paths\": {\n      \"@/*\": [\"./src/*\"]\n    }\n  },\n  \"include\": [\"next-env.d.ts\", \"**/*.ts\", \"**/*.tsx\", \".next/types/**/*.ts\"],\n  \"exclude\": [\"node_modules\"]\n}\n"
}